define("@ta/social.engagement-card",["@ta/common.typeahead","@ta/overlays.custom-overlay","@ta/overlays.headers","@ta/overlays.managers","@ta/overlays.modal","@ta/social.button","@ta/social.onboarding-state","@ta/social.social-reference","@ta/tracking.interactions","@ta/common.global"],function(e,t,a,o,i,r,s,l,c,d){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/components/dist/",n(n.s="./packages/social/engagement-card/index.jsx")}({"./node_modules/exif-js/exif.js":function(e,t,a){var o;(function(){var a=!1,i=function(e){return e instanceof i?e:this instanceof i?void(this.EXIFwrapped=e):new i(e)};e.exports&&(t=e.exports=i),t.EXIF=i;var r=i.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},s=i.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},l=i.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c=i.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},d=i.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function u(e){return!!e.exifdata}function p(e,t){function n(n){var o=m(n);e.exifdata=o||{};var r=function(e){var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;var n=2,o=e.byteLength,i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;n<o;){if(i(t,n)){var r=t.getUint8(n+7);r%2!=0&&(r+=1),0===r&&(r=4);var s=n+8+r,l=t.getUint16(n+6+r);return g(e,s,l)}n++}}(n);if(e.iptcdata=r||{},i.isXmpEnabled){var s=function(e){if(!("DOMParser"in self))return;var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;var n=2,o=e.byteLength,i=new DOMParser;for(;n<o-4;){if("http"==b(t,n,4)){var r=n-1,s=t.getUint16(n-2)-1,l=b(t,r,s),c=l.indexOf("xmpmeta>")+8,d=(l=l.substring(l.indexOf("<x:xmpmeta"),c)).indexOf("x:xmpmeta")+10;l=l.slice(0,d)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(d);var u=i.parseFromString(l,"text/xml");return k(u)}n++}}(n);e.xmpdata=s||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),a=n.length,o=new ArrayBuffer(a),i=new Uint8Array(o),r=0;r<a;r++)i[r]=n.charCodeAt(r);return o}(e.src));else if(/^blob\:/i.test(e.src)){(r=new FileReader).onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(e.src,function(e){r.readAsArrayBuffer(e)})}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(o.response),o=null},o.open("GET",e.src,!0),o.responseType="arraybuffer",o.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var r;(r=new FileReader).onload=function(e){a&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},r.readAsArrayBuffer(e)}}function m(e){var t=new DataView(e);if(a&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;for(var n,o=2,i=e.byteLength;o<i;){if(255!=t.getUint8(o))return a&&console.log("Not a valid marker at offset "+o+", found: "+t.getUint8(o)),!1;if(n=t.getUint8(o+1),a&&console.log(n),225==n)return a&&console.log("Found 0xFFE1 marker"),y(t,o+4,t.getUint16(o+2));o+=2+t.getUint16(o+2)}}var f={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function g(e,t,n){for(var a,o,i,r,s=new DataView(e),l={},c=t;c<t+n;)28===s.getUint8(c)&&2===s.getUint8(c+1)&&(r=s.getUint8(c+2))in f&&((i=s.getInt16(c+3))+5,o=f[r],a=b(s,c+5,i),l.hasOwnProperty(o)?l[o]instanceof Array?l[o].push(a):l[o]=[l[o],a]:l[o]=a),c++;return l}function v(e,t,n,o,i){var r,s,l,c=e.getUint16(n,!i),d={};for(l=0;l<c;l++)r=n+12*l+2,!(s=o[e.getUint16(r,!i)])&&a&&console.log("Unknown tag: "+e.getUint16(r,!i)),d[s]=h(e,r,t,n,i);return d}function h(e,t,n,a,o){var i,r,s,l,c,d,u=e.getUint16(t+2,!o),p=e.getUint32(t+4,!o),m=e.getUint32(t+8,!o)+n;switch(u){case 1:case 7:if(1==p)return e.getUint8(t+8,!o);for(i=p>4?m:t+8,r=[],l=0;l<p;l++)r[l]=e.getUint8(i+l);return r;case 2:return b(e,i=p>4?m:t+8,p-1);case 3:if(1==p)return e.getUint16(t+8,!o);for(i=p>2?m:t+8,r=[],l=0;l<p;l++)r[l]=e.getUint16(i+2*l,!o);return r;case 4:if(1==p)return e.getUint32(t+8,!o);for(r=[],l=0;l<p;l++)r[l]=e.getUint32(m+4*l,!o);return r;case 5:if(1==p)return c=e.getUint32(m,!o),d=e.getUint32(m+4,!o),(s=new Number(c/d)).numerator=c,s.denominator=d,s;for(r=[],l=0;l<p;l++)c=e.getUint32(m+8*l,!o),d=e.getUint32(m+4+8*l,!o),r[l]=new Number(c/d),r[l].numerator=c,r[l].denominator=d;return r;case 9:if(1==p)return e.getInt32(t+8,!o);for(r=[],l=0;l<p;l++)r[l]=e.getInt32(m+4*l,!o);return r;case 10:if(1==p)return e.getInt32(m,!o)/e.getInt32(m+4,!o);for(r=[],l=0;l<p;l++)r[l]=e.getInt32(m+8*l,!o)/e.getInt32(m+4+8*l,!o);return r}}function b(e,t,a){var o="";for(n=t;n<t+a;n++)o+=String.fromCharCode(e.getUint8(n));return o}function y(e,t){if("Exif"!=b(e,t,4))return a&&console.log("Not valid EXIF data! "+b(e,t,4)),!1;var n,o,i,u,p,m=t+6;if(18761==e.getUint16(m))n=!1;else{if(19789!=e.getUint16(m))return a&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(m+2,!n))return a&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var f=e.getUint32(m+4,!n);if(f<8)return a&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(m+4,!n)),!1;if((o=v(e,m,m+f,s,n)).ExifIFDPointer)for(i in u=v(e,m,m+o.ExifIFDPointer,r,n)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":u[i]=d[i][u[i]];break;case"ExifVersion":case"FlashpixVersion":u[i]=String.fromCharCode(u[i][0],u[i][1],u[i][2],u[i][3]);break;case"ComponentsConfiguration":u[i]=d.Components[u[i][0]]+d.Components[u[i][1]]+d.Components[u[i][2]]+d.Components[u[i][3]]}o[i]=u[i]}if(o.GPSInfoIFDPointer)for(i in p=v(e,m,m+o.GPSInfoIFDPointer,l,n)){switch(i){case"GPSVersionID":p[i]=p[i][0]+"."+p[i][1]+"."+p[i][2]+"."+p[i][3]}o[i]=p[i]}return o.thumbnail=function(e,t,n,a){var o=function(e,t,n){var a=e.getUint16(t,!n);return e.getUint32(t+2+12*a,!n)}(e,t+n,a);if(!o)return{};if(o>e.byteLength)return{};var i=v(e,t,t+o,c,a);if(i.Compression)switch(i.Compression){case 6:if(i.JpegIFOffset&&i.JpegIFByteCount){var r=t+i.JpegIFOffset,s=i.JpegIFByteCount;i.blob=new Blob([new Uint8Array(e.buffer,r,s)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",i.Compression)}else 2==i.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return i}(e,m,f,n),o}function _(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var a=e.attributes.item(n);t["@attributes"][a.nodeName]=a.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o++){var i=e.childNodes.item(o),r=i.nodeName;if(null==t[r])t[r]=_(i);else{if(null==t[r].push){var s=t[r];t[r]=[],t[r].push(s)}t[r].push(_(i))}}return t}function k(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var a=e.children.item(n),o=a.attributes;for(var i in o){var r=o[i],s=r.nodeName,l=r.nodeValue;void 0!==s&&(t[s]=l)}var c=a.nodeName;if(void 0===t[c])t[c]=_(a);else{if(void 0===t[c].push){var d=t[c];t[c]=[],t[c].push(d)}t[c].push(_(a))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}i.enableXmp=function(){i.isXmpEnabled=!0},i.disableXmp=function(){i.isXmpEnabled=!1},i.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(u(e)?t&&t.call(e):p(e,t),!0)},i.getTag=function(e,t){if(u(e))return e.exifdata[t]},i.getIptcTag=function(e,t){if(u(e))return e.iptcdata[t]},i.getAllTags=function(e){if(!u(e))return{};var t,n=e.exifdata,a={};for(t in n)n.hasOwnProperty(t)&&(a[t]=n[t]);return a},i.getAllIptcTags=function(e){if(!u(e))return{};var t,n=e.iptcdata,a={};for(t in n)n.hasOwnProperty(t)&&(a[t]=n[t]);return a},i.pretty=function(e){if(!u(e))return"";var t,n=e.exifdata,a="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?a+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":a+=t+" : ["+n[t].length+" values]\r\n":a+=t+" : "+n[t]+"\r\n");return a},i.readFromBinaryFile=function(e){return m(e)},void 0===(o=function(){return i}.apply(t,[]))||(e.exports=o)}).call(this)},"./node_modules/react-apollo/react-apollo.browser.umd.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react-apollo/react-apollo.browser.umd.js")},"./node_modules/react-redux/es/index.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react-redux/es/index.js")},"./node_modules/react/index.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react/index.js")},"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./packages/common/classnames/classnames.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(){for(var e=[],t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=function(t){var i=n[t];if(i){var r=void 0===i?"undefined":a(i);"string"===r||"number"===r?e.push(i):Array.isArray(i)?e.push(o.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i))):"object"===r&&Object.keys(i).filter(function(e){return i[e]}).forEach(function(t){return e.push(t)})}},s=0;s<n.length;s++)r(s);return e.join(" ")}function i(e,t,n){var a=e.split(" ").filter(function(e){return e!==t});return n&&a.push(n),a}},"./packages/common/features/features.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/features/features.jsx")},"./packages/common/i18n/i18n.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/i18n/i18n.jsx")},"./packages/common/state/state.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/state/state.jsx")},"./packages/common/tracking/tracking.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/tracking/tracking.jsx")},"./packages/common/webview/NativeBridge.jsx":function(e,t,n){"use strict";function a(e){var t="";if(null!=e.tapCallback){var n=e.tapCallback,a="nativeInterop"+function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}();window[a]=function(){null!=n&&n()},t=a,e.tapFunction=t,e.tapCallback=null}}function o(){return"undefined"!=typeof window&&window.taBridgeContext?(window.bridge||window.bridge||(window.bridge=(e=[],t=0,n=[],document.addEventListener("PacificDidReceiveNativeCallback",function(t){if(t.detail){var n=t.detail,a=isNaN(parseInt(n.id))?-1:parseInt(n.id);-1!=a&&(e[a]&&e[a](n.parameters,n.error),delete e[a])}},!1),document.addEventListener("PacificDidReceiveNativeBroadcast",function(e){if(e.detail){var t=e.detail,a=t.name;if(void 0!==a&&n[a]){var o=n[a];if(o instanceof Array){var i=t.parameters;o.forEach(function(e){e(i)})}}}},!1),{post:function(n,a,o,i,r){var s=t++;e[s]=i,window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.pacific?window.webkit.messageHandlers.pacific.postMessage({action:n,parameters:a,uid:o,callback:s,print:r||0}):window.pacific&&window.pacific.postMessage(JSON.stringify({action:n,parameters:a,uid:o,callback:s,print:r||0}))},on:function(e,t){var a=n[e];return a||(n[e]=a=[]),a.push(t),function(){a[indexOf(a,t)]=null}},off:function(e){delete n[e]}})),window.taBridgeContext.uid):null;var e,t,n}function i(e,t){if("undefined"==typeof window||!window.taBridgeContext||!window.taBridgeContext.actions)return!1;var n=window.taBridgeContext.actions[e];return!(!n||!n.v)&&t===n.v}function r(e,t,n){o()&&(e?window.bridge.on(t,n):window.bridge.off(t))}function s(e){e.items.forEach(function(e,t){a(e)})}function l(e,t,n){var a=o();return!(!a||!i(e,t))&&(window.bridge.post(e,n||{},a),!0)}function c(){l("hideSkeleton",1,null)}function d(e){!function(e){null!=e.trailingMenuItems&&e.trailingMenuItems.forEach(function(e,t){var n=e;a(n),null!=n.nestedMenu&&s(n.nestedMenu)})}(e.navigation),l("onNewOrUpdatedScreen",1,e)}function u(e){s(e),l("overflowMenu",1,e)}function p(){i("map",2)?l("map",2,null):l("map",1,null)}function m(e){l("createTrip",1,{isPublic:e})}function f(e){l("shareTrip",1,e)}n.r(t),n.d(t,"isActionSupported",function(){return i}),n.d(t,"postToBridge",function(){return l}),n.d(t,"hideSkeleton",function(){return c}),n.d(t,"onNewOrUpdatedScreen",function(){return d}),n.d(t,"showNativeOverflowMenu",function(){return u}),n.d(t,"showNativeMap",function(){return p}),n.d(t,"showNativeCreateTrip",function(){return m}),n.d(t,"showNativeShareTrip",function(){return f}),n.d(t,"showSavesModal",function(){return g}),n.d(t,"showRegistration",function(){return v}),n.d(t,"close",function(){return h}),n.d(t,"startScreenTransition",function(){return b}),n.d(t,"onOverlayStateChange",function(){return y}),n.d(t,"onHeaderHeightChange",function(){return _}),n.d(t,"onShrinkMap",function(){return k}),n.d(t,"onNavigateToTripDetail",function(){return S}),n.d(t,"onHandleTripCollaboration",function(){return w}),n.d(t,"isNativeWebview",function(){return O}),n.d(t,"getHeaderHeight",function(){return x}),n.d(t,"onTripsRefetch",function(){return E}),n.d(t,"onTripUpdate",function(){return C}),n.d(t,"onTripItemDelete",function(){return I}),n.d(t,"onRefetchTripsWithItems",function(){return j});var g=function(e){i("presentSavesModal",2)?l("presentSavesModal",2,e):l("presentSavesModal",1,{itemId:e.id})},v=function(e){l("showReg",1,{dismissOnCancellation:e})};function h(){l("close",1,null)}function b(){l("startScreenTransition",1,null)}function y(e){l(e?"overlayShown":"overlayHidden",1,null)}function _(e,t){r(e,"updateHeaderHeight",t)}function k(e,t){r(e,"shrinkMap",t)}function S(e,t){r(e,"navigateToTripDetail",t)}function w(e,t){r(e,"handleTripCollaboration",t)}function O(){return null!=o()}function x(){if("undefined"!=typeof window&&void 0!==window.localStorage&&void 0!==window.localStorage.headerHeight){var e=window.localStorage.headerHeight;return"string"==typeof e&&(e=parseInt(e,10)),e}return 0}function E(e,t){r(e,"refetchTrips",t)}function C(e){l("tripUpdate",1,e)}function I(e){l("tripItemDelete",1,e)}function j(e,t){r(e,"refetchTripsWithItems",t)}},"./packages/common/webview/webview.jsx":function(e,t,n){"use strict";var a=n("./packages/common/webview/NativeBridge.jsx");n.d(t,"a",function(){return a})},"./packages/events/lifecycle/MountListener.jsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var r=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=Array(o),s=0;s<o;s++)r[s]=arguments[s];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.render=function(){return null},i(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),o(t,[{key:"componentDidMount",value:function(){this.props.onComponentDidMount&&this.props.onComponentDidMount()}},{key:"componentWillUnmount",value:function(){this.props.onComponentWillUnmount&&this.props.onComponentWillUnmount()}}]),t}();t.a=r},"./packages/input/drop-zone/DropZone.jsx":function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return d});var a=n("./node_modules/react/index.js"),o=n("./packages/input/drop-zone/DropZone.less"),i=n.n(o),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e){var t=e.lastIndexOf(".");if(!(t<0))return e.substring(t).toLowerCase()},c=function(e,t,n,a,o,i){var r=function(e,t,n){if(n&&e.size>n)return"file_too_large";if(t){var a=l(e.name);if(!a)return"wrong_file_type";if(!t.includes(a))return"wrong_file_type"}}(e,n,a);r?o&&o(e,r):t(e,i)},d=function(e,t,n,a,o){if(e.dataTransfer.items)for(var i=0;i<e.dataTransfer.items.length;i++){var r=e.dataTransfer.items[i].getAsFile();c(r,t,n,a,o,"drag_drop")}else for(var s=0;s<e.dataTransfer.files.length;s++){var l=e.dataTransfer.files[s];c(l,t,n,a,o,"drag_drop")}},u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.eventPreventDefault=function(e){e.preventDefault()},n.handleDragOver=function(e){e.preventDefault(),n.setState({isDragOver:!0})},n.handleDragLeave=function(e){e.preventDefault(),n.setState({isDragOver:!1})},n.handleDrop=function(e){e.preventDefault(),d(e,n.props.addFile,n.props.allowedFileTypes,n.props.maxSizeInBytes,n.props.fileRejected),n.setState({isDragOver:!1})},n.fileSelectionChanged=function(e){var t=e.target.files;Array.from(t).forEach(function(e){return c(e,n.props.addFile,n.props.allowedFileTypes,n.props.maxSizeInBytes,n.props.fileRejected,"file_picker")}),n.fileInputRef.value=""},n.render=function(){var e=n.props.allowMultipleSelection?{multiple:!0}:{};return a.createElement("div",{style:{width:n.props.width,height:n.props.height},className:i.a.dropZone+" "+(n.props.isDragOverOutsideComponent||n.state.isDragOver?i.a.isDragOver:""),onDragOver:n.handleDragOver,onDragLeave:n.handleDragLeave,onDrop:n.handleDrop,onClick:function(){return n.fileInputRef.click()}},a.createElement("input",r({style:{display:"none"},type:"file",name:"media",accept:n.props.allowedFileTypes.join(",")},e,{onChange:n.fileSelectionChanged,ref:function(e){n.fileInputRef=e}})),n.props.children)},n.state={isDragOver:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),s(t,[{key:"componentDidMount",value:function(){this.props.disableOnDropForPage&&(window.addEventListener("dragover",this.eventPreventDefault),window.addEventListener("drop",this.eventPreventDefault))}},{key:"componentWillUnmount",value:function(){this.props.disableOnDropForPage&&(window.removeEventListener("dragover",this.eventPreventDefault),window.removeEventListener("drop",this.eventPreventDefault))}}]),t}();u.defaultProps={allowedFileTypes:["*"],allowMultipleSelection:!0,disableOnDropForPage:!0,isDragOverOutsideComponent:!1,width:"100%",height:"100%"},t.a=u},"./packages/input/drop-zone/DropZone.less":function(e,t,n){e.exports={dropZone:"input-drop-zone-DropZone__dropZone--2DMlz",isDragOver:"input-drop-zone-DropZone__isDragOver--g59pf"}},"./packages/input/drop-zone/types.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var a=10485760,o=524288e3},"./packages/input/text-area/ManagedTextArea.jsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.newListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a){n.props.onInteractionStart&&!n.state.interactionStarted&&n.props.onInteractionStart(a),n.setState({composing:t});var o=a.currentTarget.value;n.props[e]&&n.props[e](a,o,n.state.composing),n.setState({interactionStarted:!0})}},n.onFocus=n.newListener("onFocus"),n.onBlur=n.newListener("onBlur"),n.onChange=n.newListener("onChange"),n.onKeyUp=n.newListener("onKeyUp"),n.onKeyDown=n.newListener("onKeyDown"),n.onCompositionStart=n.newListener("onCompositionStart",!0),n.onCompositionEnd=n.newListener("onCompositionEnd"),n.state={interactionStarted:!1,composing:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),o(t,[{key:"componentDidMount",value:function(){this.props.focusOnMount&&this.inputElem&&this.inputElem.focus()}},{key:"render",value:function(){var e=this,t=this.props.fontSize?{fontSize:this.props.fontSize}:void 0;return a.createElement("textarea",{type:"text",id:this.props.id,name:this.props.name,rows:this.props.rows,cols:this.props.cols,value:this.props.value,maxLength:this.props.maxLength,className:this.props.className,style:t,placeholder:this.props.placeholder,disabled:this.props.disabled,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,ref:function(t){e.inputElem=t,e.props.onRef&&e.props.onRef(t)}})}}]),t}();i.defaultProps={id:void 0,name:void 0,value:void 0,className:void 0,placeholder:void 0,disabled:!1,focusOnMount:!1,onFocus:void 0,onBlur:void 0,onChange:void 0,onKeyUp:void 0,onKeyDown:void 0,onCompositionStart:void 0,onCompositionEnd:void 0,onInteractionStart:void 0,onRef:void 0},t.a=i},"./packages/input/text-area/TextArea.jsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),o=n("./packages/common/classnames/classnames.jsx"),i=n("./packages/input/text-area/ManagedTextArea.jsx"),r=n("./packages/input/text-area/TextArea.less"),s=n.n(r),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.a=function(e){var t=Object(o.a)(s.a.inputElement,e.className),n=l({},e,{className:t});return a.createElement(i.a,n)}},"./packages/input/text-area/TextArea.less":function(e,t,n){e.exports={inputElement:"input-text-area-TextArea__inputElement--2DP7n"}},"./packages/media/common/PhotoDetails.gql":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PhotoDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"photos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"photoIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"id"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"statuses"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:119}};n.loc.source={body:"query PhotoDetails($id: Int!) {\n  photos(photoIds: [$id]) {\n    id\n    statuses\n    photoSizes {\n      url\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"./packages/media/common/types.jsx":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"f",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"e",function(){return d});var o=[".jpg",".jpeg",".gif",".png"],i=[".mp4",".m4v",".mov"],r=function(e){var t=void 0;return e.forEach(function(e){t?t.width*t.height<e.width*e.height&&(t=e):t=e}),t},s=function e(t,n){var o=this;a(this,e),this.distanceFrom=function(e){return Math.sqrt(Math.pow(o.x-e.x,2)+Math.pow(o.y-e.y,2))},this.x=t,this.y=n},l=function e(t,n){var o=this;a(this,e),this.equals=function(e){return e&&o.width===e.width&&o.height===e.height},this.aspectRatio=function(){return o.width/o.height},this.width=t,this.height=n},c=function(e,t,n){var a=Math.max(e,t);return Math.min(a,n)},d=function(e){var t="ta_video";return e&&("Home"===e.page?t="home_video":"Profile"===e.page&&(t="profile_video")),t}},"./packages/media/common/uploadUtils.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return d}),n.d(t,"g",function(){return u}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return m});var a=n("./packages/input/drop-zone/DropZone.jsx"),o=(n("./node_modules/react-apollo/react-apollo.browser.umd.js"),n("./packages/media/common/types.jsx")),i=n("./packages/media/common/PhotoDetails.gql"),r=n.n(i),s=function(e){for(var t=atob(e.split(",")[1]),n=[],a=0;a<t.length;)n.push(t.charCodeAt(a)),a+=1;return new Uint8Array(n)},l=function(e,t,n,a,o){var i=document.createElement("canvas");return i.width=a,i.height=o,i.getContext("2d").drawImage(e,t,n,a,o,0,0,a,o),i.toDataURL()},c=function(e){return 1===e?0:8===e?270:3===e?180:6===e?90:0},d=function(e,t){var n=new FileReader;n.onload=function(e){var n=new DataView(e.target.result);if(65496!==n.getUint16(0,!1))return t(-2);for(var a=n.byteLength,o=2;o<a;){if(n.getUint16(o+2,!1)<=8)return t(-1);var i=n.getUint16(o,!1);if(o+=2,65505===i){if(o+=2,1165519206!==n.getUint32(o,!1))return t(-1);var r=18761===n.getUint16(o+=6,!1);o+=n.getUint32(o+4,r);var s=n.getUint16(o,r);o+=2;for(var l=0;l<s;l++)if(274===n.getUint16(o+12*l,r))return t(n.getUint16(o+12*l+8,r))}else{if(65280!=(65280&i))break;o+=n.getUint16(o,!1)}}return t(-1)},n.readAsArrayBuffer(e)},u=function(e,t){d(e,function(n){var a=c(n);if(0===a)t(URL.createObjectURL(e));else{var o=URL.createObjectURL(e);!function(e,t,n){var a=new Image;a.onload=function(){var e=document.createElement("canvas");e.width=90===Math.abs(t%180)?a.height:a.width,e.height=90===Math.abs(t%180)?a.width:a.height;var o=e.getContext("2d");o.save(),o.translate(e.width/2,e.height/2),o.rotate(t*Math.PI/180),o.drawImage(a,-a.width/2,-a.height/2),o.restore(),n(e.toDataURL())},a.src=e}(o,a,function(e){URL.revokeObjectURL(o);var n=new Blob([s(e)],{type:"image/png"});t(URL.createObjectURL(n))})}})},p=function(e){return o.f.includes(Object(a.b)(e))?"photo":o.g.includes(Object(a.b)(e))?"video":"unknown"},m=function e(t,n,a,o,i){n>a?i():setTimeout(function(){o.query({query:r.a,variables:{id:t},fetchPolicy:"network-only"}).then(function(r){if(r.data&&r.data.photos&&r.data.photos[0]){var s=r.data.photos[0].statuses;s&&0!==s.length&&!s.includes("UPLOADING")?i():e(t,n+1,a,o,i)}else e(t,n+1,a,o,i)})},1e3)}},"./packages/media/upload/CompleteVideoUpload.gql":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"completeVideoUpload"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"request"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CompleteVideoUploadRequestInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"completeVideoUpload"},arguments:[{kind:"Argument",name:{kind:"Name",value:"request"},value:{kind:"Variable",name:{kind:"Name",value:"request"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mediaId"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:136}};n.loc.source={body:"mutation completeVideoUpload($request: CompleteVideoUploadRequestInput!) {\n  completeVideoUpload(request: $request) {\n    mediaId\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"./packages/media/upload/InitiateVideoUpload.gql":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"initiateVideoUpload"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"request"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"InitiateVideoUploadUserRequestInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"initiateVideoUpload"},arguments:[{kind:"Argument",name:{kind:"Name",value:"request"},value:{kind:"Variable",name:{kind:"Name",value:"request"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mediaId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uploadUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:154}};n.loc.source={body:"mutation initiateVideoUpload($request: InitiateVideoUploadUserRequestInput!) {\n  initiateVideoUpload(request: $request) {\n    mediaId\n    uploadUrl\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"./packages/media/upload/LocationTagWarning.less":function(e,t,n){e.exports={warningMessage:"media-upload-LocationTagWarning__warningMessage--3In46",warningTitle:"media-upload-LocationTagWarning__warningTitle--1Ni3R",warningDescription:"media-upload-LocationTagWarning__warningDescription--3r8zF",buttonWrap:"media-upload-LocationTagWarning__buttonWrap--CjaVZ",button:"media-upload-LocationTagWarning__button--3lXYV",postButton:"media-upload-LocationTagWarning__postButton--2cTkG"}},"./packages/media/upload/MediaUploadItem.jsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),o=n("./node_modules/react-apollo/react-apollo.browser.umd.js"),i=n("./packages/styleguide/icon/Icon.jsx"),r=n("./packages/common/classnames/classnames.jsx"),s=n("@ta/social.social-reference"),l=n("./packages/input/text-area/TextArea.jsx"),c=n("./node_modules/react-redux/es/index.js"),d=n("@ta/common.typeahead"),u=n("./packages/common/i18n/i18n.jsx"),p=n("./packages/media/common/types.jsx"),m=n("./packages/media/common/uploadUtils.jsx"),f=n("./node_modules/exif-js/exif.js"),g=n.n(f),v=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,o=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){o=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=new Map([["N",1],["S",-1]]),b=new Map([["E",1],["W",-1]]),y=function(e,t){var n=v(e,3),a=n[0],o=n[1],i=n[2],r=a+(o?o/60:0)+(i?i/3600:0);return t<0?-r:r},_=function(e,t){var n=document.createElement("img");n.onload=function(){g.a.getData(this,function(){var e=g.a.getTag(this,"GPSLatitude"),n=g.a.getTag(this,"GPSLatitudeRef"),a=h.get(n),o=g.a.getTag(this,"GPSLongitude"),i=g.a.getTag(this,"GPSLongitudeRef"),r=b.get(i);if(e&&a&&o&&r){var s=y(e,a),l=y(o,r);t({latitude:s,longitude:l})}})};var a=document.createAttribute("src");a.value=e,n.setAttributeNode(a)},k=n("./packages/common/features/features.jsx"),S=n("./packages/media/upload/MediaUploadItem.less"),w=n.n(S),O=n("./packages/media/upload/ProximityLocations.gql"),x=n.n(O),E=n("./packages/media/upload/ParentLocations.gql"),C=n.n(E);n.d(t,"c",function(){return M}),n.d(t,"b",function(){return D}),n.d(t,"d",function(){return F}),n.d(t,"e",function(){return L});var I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},j=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U={description:function(e){return e?Object(u.localize)("post_photo_add_description_v2_part_2"):Object(u.localize)("post_video_add_description_v2_part_2")},descriptionCharacterCount:function(e){return 0===e?Object(u.localize)("post_video_500_max_characters"):Object(u.localize)("post_video_character_count",{nCharacterCount:e})},addLocation:function(e){return e?Object(u.localize)("photo_uploader_add_a_location_tag"):Object(u.localize)("video_upload_add_tags")},addLocationSubtext:function(e){return e?Object(u.localize)("post_photo_tag_location_subtext"):Object(u.localize)("post_video_tag_location_subtext")},mediaCount:function(e,t,n){return e?Object(u.localize)("post_photo_video_count_text",{nCurrentphotoCount:t+1,nTotalphotoCount:n}):Object(u.localize)("post_video_video_count_text",{nCurrentVideoCount:t+1,nTotalVideoCount:n})}},T=500,M=new p.a(288,162),P=new p.a(272,153),D=function(e){return 1!==e.size?{type:"location_id"}:Array.from(e.values())[0]},F=function(e){if(0===e.description.length)return Object(u.localize)("uploader_error_required_field")},L=function(e){if("photo"===e.mediaType&&0===e.selectedLocations.size)return Object(u.localize)("uploader_error_required_field")},R=function(e){return{locationId:e.locationId,name:e.name,parentId:e.parentId}},A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.getDisplaySuggestions=function(){var e=n.props.itemState.selectedLocations,t=n.state,a=t.locationSuggestions,o=t.geoSuggestions;return 0===e.size&&a&&a.length>0&&o?a.concat(o):null},n.geoSuggestionsLoading=!1,n.locationSuggestionsLoading=!1,n.handleDescriptionChange=function(e){n.props.descriptionChanged(n.props.file,e),1===e.length&&n.track("started_description")},n.handleDescriptionFocus=function(){n.setState({descriptionHasFocus:!0})},n.handleDescriptionBlur=function(){n.setState({descriptionHasFocus:!1}),n.props.descriptionBlurred(n.props.file)},n.singleLocationSelectionChanged=function(e){var t=new Map([[String(e.value),e]]);n.multiLocationSelectionChanged(t)},n.handleSingleLocationFocus=function(){n.setState({locationHasFocus:!0})},n.handleSingleLocationBlur=function(){n.setState({locationHasFocus:!1}),n.props.locationSelectionBlurred(n.props.file)},n.multiLocationSelectionChanged=function(e){n.props.locationSelectionChanged(n.props.file,e),n.track("location_selection_changed",e.size)},n.handleHasResultsChanged=function(e){e&&n.selectorNode.current&&!n.props.isMobile&&n.selectorNode.current.scrollIntoView()},n.handleRemoveFile=function(){n.props.handleRemoveFile(n.props.file)},n.handleSelectLocationSuggestion=function(e){var t=e.toString(),a=new Map([[t,{type:"location_id",value:t}]]);n.props.locationSelectionChanged(n.props.file,a)},n.track=function(e,t){n.props.track(e,n.xOfYString(),t)},n.xOfYString=function(){return n.props.index+1+" of "+n.props.videoCount},n.render=function(){var e="photo"===n.props.itemState.mediaType,t=n.props.isMobile?P:M,c=n.state.rotationDegrees%180==90?new p.a(t.height,t.width):t,m=n.props.uploadProgress?n.props.uploadProgress:0,f=n.props.isUploading?a.createElement("div",{className:w.a.uploadItem},a.createElement("div",{className:w.a.progressOuter},a.createElement("div",{className:w.a.progressInner,style:{width:m+"%"}}))):null,g=e?a.createElement("div",{className:w.a.imagePreview,style:{width:t.width,height:t.height}},a.createElement("div",{className:w.a.imagePreviewInner,style:{backgroundImage:"url("+n.state.mediaUrl+")",transform:"rotate("+n.state.rotationDegrees+"deg)",width:c.width,height:c.height}})):a.createElement("video",{controls:!0,controlsList:"nodownload nofullscreen",className:w.a.videoPreview,onPlaying:function(){return n.track("preview_playing")},style:{width:t.width,height:t.height}},a.createElement("source",{src:n.state.mediaUrl,type:"video/mp4"})),v=e?a.createElement(d.MultiLocationSelector,{selectedLocations:n.props.itemState.selectedLocations,selectionChanged:n.multiLocationSelectionChanged,hasResultsChanged:n.handleHasResultsChanged,maxLocations:1,className:n.props.itemState.locationError&&!n.state.locationHasFocus?w.a.locationSelectError:"",onFocus:n.handleSingleLocationFocus,onBlur:n.handleSingleLocationBlur}):a.createElement(d.MultiLocationSelector,{selectedLocations:n.props.itemState.selectedLocations,selectionChanged:n.multiLocationSelectionChanged,hasResultsChanged:n.handleHasResultsChanged}),h=a.createElement("span",{className:w.a.titleRequired}," ",Object(u.localize)("post_video_required_fields_text")),b=n.getDisplaySuggestions(),y=Object(k.featureIsEnabled)("media_geo_suggestions_enabled");return a.createElement("div",{className:w.a.itemWrapper},a.createElement("div",{className:w.a.previewPanel},n.props.videoCount>1?a.createElement("div",{className:w.a.videoCount},U.mediaCount(e,n.props.index,n.props.videoCount)):null,a.createElement("div",{className:w.a.previewContainer},g,n.props.allowDelete&&a.createElement("div",{className:"ui_icon times "+w.a.trashIcon,onClick:n.handleRemoveFile}),f)),a.createElement("div",{className:w.a.inputPanel},a.createElement("div",null,a.createElement("div",{className:w.a.inputLabel},Object(u.localize)("post_video_add_description_v2_part_1"),h),a.createElement("div",{className:w.a.inputSubLabel},U.description(e)),Object(k.featureIsEnabled)("social_at_reference_ugc_editor")?a.createElement(s.ReferenceSelectorController,{name:"description",value:n.props.itemState.description,onChange:function(e,t){return n.handleDescriptionChange(t)},onFocus:function(e){e.currentTarget&&e.currentTarget.scrollIntoView(),n.handleDescriptionFocus()},onBlur:n.handleDescriptionBlur,maxLength:T,className:Object(r.a)(w.a.inputElement,w.a.descriptionInput,N({},w.a.descriptionError,n.props.itemState.descriptionError&&!n.state.descriptionHasFocus))}):a.createElement(l.a,{name:"description",value:n.props.itemState.description,onChange:function(e,t){return n.handleDescriptionChange(t)},onFocus:n.handleDescriptionFocus,onBlur:n.handleDescriptionBlur,maxLength:T,className:Object(r.a)(w.a.inputElement,w.a.descriptionInput,N({},w.a.descriptionError,n.props.itemState.descriptionError&&!n.state.descriptionHasFocus))}),a.createElement("div",{className:w.a.characterCountContainer},n.props.itemState.descriptionError&&!n.state.descriptionHasFocus&&a.createElement("div",{className:w.a.error},n.props.itemState.descriptionError),a.createElement("div",{className:w.a.characterCount},U.descriptionCharacterCount(n.props.itemState.description.length)))),a.createElement("div",{className:w.a.locationLabelAndElement,ref:n.selectorNode},a.createElement("div",{className:w.a.inputLabel},U.addLocation(e),e&&h),a.createElement("div",{className:w.a.inputSubLabel},U.addLocationSubtext(e)),a.createElement("div",{className:w.a.locationSelectElement},v,n.props.itemState.locationError&&!n.state.locationHasFocus&&a.createElement("div",{className:w.a.error},n.props.itemState.locationError))),b&&a.createElement("div",null,a.createElement("div",{className:w.a.suggestedTagsLabel},Object(u.localize)("suggested_tags")),a.createElement("div",{className:"ui_tag_group "+w.a.suggestedTagsContainer},b.map(function(e){return a.createElement("div",{className:"ui_tag_box "+w.a.suggestedTagItem,key:e.locationId,onClick:function(){return n.handleSelectLocationSuggestion(e.locationId)}},a.createElement(i.a,{name:"plus",className:w.a.suggestedTagIcon}),e.name)})))),!n.state.exifGeoPoint||n.state.locationSuggestions||n.locationSuggestionsLoading?null:(n.locationSuggestionsLoading=!0,a.createElement(o.Query,{query:x.a,variables:{fromPoint:n.state.exifGeoPoint,radius:1,limit:20}},function(e){var t=e.loading,a=e.data,o=e.error;if(!t){n.locationSuggestionsLoading=!1;var i=(!o&&a&&a.proximityLocations||[]).filter(function(e){return!e.isGeo&&!e.isClosed}).map(R).slice(0,y?3:4),r=y?void 0:[];n.setState({locationSuggestions:i,geoSuggestions:r})}return null})),n.state.locationSuggestions&&n.state.locationSuggestions.length>0&&!n.state.geoSuggestions&&!n.geoSuggestionsLoading?(n.geoSuggestionsLoading=!0,a.createElement(o.Query,{query:C.a,variables:{locationIds:[n.state.locationSuggestions[0].parentId]}},function(e){var t=e.loading,a=e.data,o=e.error;if(!t){n.geoSuggestionsLoading=!1;var i=(!o&&a&&a.locations||[]).map(R).slice(0,1);n.setState({geoSuggestions:i})}return null})):null)},n.selectorNode=a.createRef();var c=e.mediaUrl?e.mediaUrl:"",f=e.file?URL.createObjectURL(e.file):c;return n.state={mediaUrl:f,rotationDegrees:0,descriptionHasFocus:!1,locationHasFocus:!1},"photo"===e.itemState.mediaType&&(e.file&&Object(m.f)(e.file,function(e){n.setState({rotationDegrees:Object(m.e)(e)})}),Object(k.featureIsEnabled)("media_location_suggestions_enabled")&&_(f,function(e){return n.setState({exifGeoPoint:e})})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),j(t,[{key:"componentWillUnmount",value:function(){URL.revokeObjectURL(this.state.mediaUrl)}}]),t}();A.defaultProps={allowDelete:!0},A.defaultProps={allowDelete:!0};t.a=Object(c.connect)(function(e,t){return I({isMobile:"MOBILE"===e.meta.device.viewportCategory},t)})(A)},"./packages/media/upload/MediaUploadItem.less":function(e,t,n){e.exports={itemWrapper:"media-upload-MediaUploadItem__itemWrapper--t7k3S",previewPanel:"media-upload-MediaUploadItem__previewPanel--3-x2n",inputPanel:"media-upload-MediaUploadItem__inputPanel--22V-1",videoCount:"media-upload-MediaUploadItem__videoCount--_nWNH",previewContainer:"media-upload-MediaUploadItem__previewContainer--1JOf8",videoPreview:"media-upload-MediaUploadItem__videoPreview--1e5eC",imagePreview:"media-upload-MediaUploadItem__imagePreview--3BgR7",imagePreviewInner:"media-upload-MediaUploadItem__imagePreviewInner--29oHO",trashIcon:"media-upload-MediaUploadItem__trashIcon--3IeAV",locationLabelAndElement:"media-upload-MediaUploadItem__locationLabelAndElement--4eGUU",inputLabel:"media-upload-MediaUploadItem__inputLabel--1E6jr",inputSubLabel:"media-upload-MediaUploadItem__inputSubLabel--12fT7",titleRequired:"media-upload-MediaUploadItem__titleRequired--23bmI",inputElement:"media-upload-MediaUploadItem__inputElement--3UoNq",locationSelectElement:"media-upload-MediaUploadItem__locationSelectElement--3j7w-",locationSelectError:"media-upload-MediaUploadItem__locationSelectError--3CVBs",descriptionInput:"media-upload-MediaUploadItem__descriptionInput--2_cnd",descriptionError:"media-upload-MediaUploadItem__descriptionError--ZKH9M",characterCountContainer:"media-upload-MediaUploadItem__characterCountContainer--169I5",characterCount:"media-upload-MediaUploadItem__characterCount--ZtetS",error:"media-upload-MediaUploadItem__error--1tdD0",uploadItem:"media-upload-MediaUploadItem__uploadItem--LfNGV",progressOuter:"media-upload-MediaUploadItem__progressOuter--2kfE2",progressInner:"media-upload-MediaUploadItem__progressInner--2hdqf",suggestedTagsLabel:"media-upload-MediaUploadItem__suggestedTagsLabel--1CaPx",suggestedTagsContainer:"media-upload-MediaUploadItem__suggestedTagsContainer--P8mnZ",suggestedTagItem:"media-upload-MediaUploadItem__suggestedTagItem--19Tyz",suggestedTagIcon:"media-upload-MediaUploadItem__suggestedTagIcon--bydZn"}},"./packages/media/upload/MediaUploaderModal.jsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/react-apollo/react-apollo.browser.umd.js"),r=n("./packages/common/classnames/classnames.jsx"),s=n("./packages/events/lifecycle/MountListener.jsx"),l=n("./packages/common/features/features.jsx"),c=n("./packages/common/state/state.jsx"),d=n("./packages/common/i18n/i18n.jsx"),u=n("./packages/input/drop-zone/DropZone.jsx"),p=n("./packages/input/drop-zone/types.jsx"),m=n("@ta/overlays.modal"),f=n("@ta/overlays.headers"),g=n("@ta/social.button"),v=n.n(g),h=n("./packages/styleguide/loading/LoadingBubbles.jsx"),b=n("./packages/common/tracking/tracking.jsx"),y=n.n(b),_=(n("@ta/common.typeahead"),n("./packages/media/common/uploadUtils.jsx")),k=n("./packages/media/common/types.jsx"),S=n("@ta/overlays.custom-overlay"),w=n.n(S),O=n("./packages/media/upload/LocationTagWarning.less"),x=n.n(O),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},C=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var I=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayPosition=function(){if(!n.containerRef.current||!n.contentRef.current)throw new Error("Refs are not set. Should not be able to get here.");var e=n.containerRef.current,t=n.contentRef.current;n.setState({top:e.getBoundingClientRect().top+"px",left:e.getBoundingClientRect().left+e.getBoundingClientRect().width-t.getBoundingClientRect().width+"px"})},n.containerRef=a.createRef(),n.contentRef=a.createRef(),n.state={top:"0px",left:"0px"},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),C(t,[{key:"componentDidMount",value:function(){this.setOverlayPosition()}},{key:"render",value:function(){var e={ref:this.containerRef},t={ref:this.contentRef};return a.createElement("div",e,a.createElement(w.a,{blockScroll:!1,fixed:!0,top:this.state.top,left:this.state.left,right:"auto",bottom:"auto"},a.createElement("div",E({className:x.a.warningMessage},t),a.createElement("div",{className:x.a.warningTitle},Object(d.localize)("post_video_didnt_tag_location")),a.createElement("div",{className:x.a.warningDescription},Object(d.localize)("post_video_tag_location_push_2")),a.createElement("div",{className:x.a.buttonWrap},a.createElement("div",{className:x.a.button},a.createElement(v.a,{type:"secondary",size:"fullwidth",onClick:this.props.onCancel},Object(d.localize)("uploader_error_add_tag"))),a.createElement("div",{className:Object(r.a)(x.a.button,x.a.postButton)},a.createElement(v.a,{type:"primary",size:"fullwidth",onClick:this.props.onPost},Object(d.localize)("uploader_button_post")))))))}}]),t}(),j=n("./packages/media/upload/MediaUploadItem.jsx"),N=n("./packages/media/upload/MediaUploaderModal.less"),U=n.n(N),T=n("./packages/media/upload/InitiateVideoUpload.gql"),M=n.n(T),P=n("./packages/media/upload/CompleteVideoUpload.gql"),D=n.n(P),F=n("./packages/media/upload/Moderate.gql"),L=n.n(F);n.d(t,"a",function(){return G});var R=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,o=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){o=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B={fileTypeError:function(e){return e?Object(d.localize)("post_photo_unsupported_file"):Object(d.localize)("post_video_file_type_error")},fileSizeError:function(e){return e?Object(d.localize)("post_photo_size_error"):Object(d.localize)("post_video_size_error")},guidelinesLink:function(e){return e?Object(d.localize)("mobile_help_center_url")+"/articles/200615067":Object(d.localize)("mobile_help_center_url")+"/articles/115011046367"},dropZoneButton:function(e){return e?Object(d.localize)("post_photo_upload_photos_button"):Object(d.localize)("post_video_upload_videos_button")},uploadAnother:function(e,t){return t?e?'<span class="'+U.a.uploadAnother+'">'+Object(d.localize)("add_more_photos_mw_uploader")+"</span>":'<span class="'+U.a.uploadAnother+'">'+Object(d.localize)("add_more_videos_mw_uploader")+"</span>":e?Object(d.localize)("post_photo_upload_another_video",{sColorClass1:U.a.uploadAnother}):Object(d.localize)("post_video_upload_another_video",{sColorClass1:U.a.uploadAnother})},submitButton:function(e,t){var n=1===t?Object(d.localize)("ugc_uploader_photo_v2"):Object(d.localize)("ugc_uploader_photo_v3"),a=1===t?Object(d.localize)("post_video_button"):Object(d.localize)("post_videos_button");return e?n:a},uploadFailed:function(e){return e?Object(d.localize)("post_photo_upload_failed"):Object(d.localize)("video_upload_fail")},title:function(e){return e?Object(d.localize)("post_photos_form_header"):Object(d.localize)("post_a_video_modal_header")},fieldRequired:function(){return Object(d.localize)("uploader_error_required_field")},maxAllowedFiles:function(e,t){return e?Object(d.localize)("post_photo_tips_guidelines"):Object(d.localize)("video_upload_max_number",{nVideos:t})},acceptedFormats:function(e,t){return e?Object(d.localize)("post_photo_accepted_formats"):Object(d.localize)("video_upload_video_formats_accepted",{sFileExtentions:t.join(" ")})},guidelinesMoreInfo:function(e){return e?Object(d.unescaped)(Object(d.localize)("post_photo_more_info_2")):Object(d.unescaped)(Object(d.localize)("video_upload_more_info_guidelines_link"))}},V=function(e){return e.some(function(e){return"PROFANITY"===e.check&&e.present})},G=function(e,t,n,a){e.query({query:L.a,variables:{texts:t,checks:["PROFANITY"]},fetchPolicy:"network-only"}).then(function(e){var t=e.data.moderate;t.some(function(e){return V(e)})?a(t):n()})},q=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.emptyState=function(){return{errorMessage:void 0,itemStates:new Map,itemUploadProgresses:new Map,displayLocationWarning:!1,submitIndex:-1,isDragOver:!1}},n.track=function(e,t,a){var o={module:"photo"===n.props.mediaType?"photo_uploader":"video_uploader",action:e,context:t,value:a};Object.keys(o).forEach(function(e){return void 0===o[e]&&delete o[e]}),y()(o)},n.handleComponentOpened=function(){n.track("opened"),n.props.isMobile&&n.fileInputRef&&n.fileInputRef.click()},n.handleComponentClosed=function(){(n.isUploading()||n.isFinishedUploading())&&n.setState(n.emptyState()),n.isEditing()&&n.track("close_during_editing"),n.isUploading()&&n.track("close_during_uploading")},n.fileSelectionChanged=function(e){var t=e.target.files;Array.from(t).forEach(function(e){return Object(u.c)(e,n.addFile,n.allowedFileTypes,n.maxFileSizeInBytes,n.fileRejected,"file_picker")}),n.fileInputRef.value=""},n.addFile=function(e,t){n.setState(function(a){var o=a.itemStates,i=a.itemUploadProgresses;if(o.size>=n.maxAllowedFiles)return a;if(Array.from(o.keys()).some(function(t){return e.name===t.name&&e.size===t.size}))return a;var r=new Map(o);r.set(e,{mediaType:Object(_.d)(e.name),description:"",selectedLocations:new Map,uploadSuccess:!1});var s=new Map(i);return s.set(e,0),n.track("file_selected",t,r.size),A({},a,{itemStates:r,itemUploadProgresses:s})})},n.fileRejected=function(e,t){n.track("invalid_file",t);var a=void 0,o="photo"===n.props.mediaType;a="wrong_file_type"===t?B.fileTypeError(o):"file_too_large"===t?B.fileSizeError(o):t,n.setState(function(e){return A({},e,{errorMessage:a})}),setTimeout(function(){n.setState({errorMessage:void 0})},3e3)},n.handleRemoveFile=function(e){if(e){var t=n.state,a=t.itemStates,o=t.itemUploadProgresses,i=new Map(a);i.delete(e);var r=new Map(o);r.delete(e),n.setState({itemStates:i,itemUploadProgresses:r})}},n.handleDescriptionChanged=function(e,t){if(e){var a=new Map(n.state.itemStates),o=a.get(e);if(o){var i=A({},o);Object.assign(i,{description:t});var r=Object(j.d)(i);Object.assign(i,{descriptionError:r}),a.set(e,i),n.setState({itemStates:a})}}},n.handleDescriptionBlurred=function(e){if(e){var t=new Map(n.state.itemStates),a=t.get(e);if(a){var o=Object(j.d)(a),i=A({},a,{descriptionError:o});t.set(e,i),n.setState({itemStates:t})}}},n.handleLocationSelectionChanged=function(e,t){if(e){var a=new Map(n.state.itemStates),o=a.get(e);if(o){var i=A({},o);Object.assign(i,{selectedLocations:t});var r=Object(j.e)(i);Object.assign(i,{locationError:r}),a.set(e,i),n.setState({itemStates:a})}n.setState({displayLocationWarning:!1})}},n.handleLocationSelectionBlurred=function(e){if(e){var t=new Map(n.state.itemStates),a=t.get(e);if(a){var o=Object(j.e)(a),i=A({},a,{locationError:o});t.set(e,i),n.setState({itemStates:t})}}},n.missingLocations=function(){return Array.from(n.state.itemStates.values()).some(function(e){return 0===e.selectedLocations.size})},n.handleSubmitClicked=function(){if(n.requiredFieldsComplete()){var e=Array.from(n.state.itemStates.values()).map(function(e){return e.description});G(n.apolloClient,e,n.submit,n.handleDescriptionProfanityError)}},n.submit=function(){n.track("submit_clicked"),!n.missingLocations()||n.state.displayLocationWarning?(n.setState({submitIndex:-1,displayLocationWarning:!1}),n.submitNextMedia()):n.setState({displayLocationWarning:!0})},n.handleDescriptionProfanityError=function(e){var t=new Map(n.state.itemStates);Array.from(n.state.itemStates.entries()).forEach(function(n,a){if(V(e[a])){var o=n[0],i=n[1],r=Object(d.localize)("media_upload_description_profanity_error"),s=A({},i,{descriptionError:r});t.set(o,s)}}),n.setState({itemStates:t})},n.handleCancel=function(){n.setState({displayLocationWarning:!1})},n.submitNextMedia=function(){var e=n.state.submitIndex;if(e+=1,n.setState({submitIndex:e}),e>=n.state.itemStates.size){n.hadUploadError()?n.track("uploaded_error_exists"):(n.track("uploaded_all"),n.props.showGlobalOverlay(),n.setState(n.emptyState()),n.props.onSubmit&&n.props.onSubmit())}else{var t=Array.from(n.state.itemStates.keys())[e];n.submitMedia(t,e)}},n.videoFormDataLegacy=function(e,t){var a=new FormData;return a.append("the_file",e,e.name),a.append("description",t.description),a.append("locationIds",JSON.stringify(Array.from(t.selectedLocations.keys()))),a.append("photorelease","true"),a.append("securityToken",n.props.csrfToken),a.append("useHttpErrorResponse","true"),a},n.photoFormData=function(e,t){var a=new FormData;a.append("the_file",e,e.name),a.append("caption",t.description);var o=Object(j.b)(t.selectedLocations).value;if(!o)throw new Error("locationId should exist");return a.append("singleLocationId",o),a.append("flowaction","SERIAL"),a.append("reviewComplete","true"),a.append("photorelease","true"),a.append("securityToken",n.props.csrfToken),a.append("useHttpErrorResponse","true"),n.props.pid&&a.append("pid",n.props.pid.toString()),n.props.pidAttr&&a.append("pidAttr",n.props.pidAttr),a},n.submitMedia=function(e,t){var a=n.state.itemStates.get(e);if(!a)throw new Error("itemState should not be null");"photo"===a.mediaType?n.submitPhoto(e,a,t):n.submitVideo(e,a,t)},n.submitPhoto=function(e,t,a){var o=n.photoFormData(e,t);n.submitUsingTa(e,t,a,"/PhotoUpload",o)},n.submitVideo=function(e,t,a){if(Object(l.featureIsEnabled)("media_video_upload_use_s3"))n.submitUsingS3Method(e,t,a);else{var o=n.videoFormDataLegacy(e,t);n.submitUsingTa(e,t,a,"/PostVideo",o)}},n.submitUsingTa=function(e,t,a,o,i){var r=n.state,s=r.itemStates,l=r.itemUploadProgresses,c=t,d=new XMLHttpRequest;d.open("POST",o,!0),d.onload=function(){l.set(e,100),200===d.status?(n.track("upload_success",a+1+" of "+n.state.itemStates.size),c.uploadSuccess=!0):n.trackSubmitErrorXhr(a,d),n.setState({itemStates:s,itemUploadProgresses:l}),n.submitNextMedia()},d.upload.addEventListener("progress",function(t){var a=t.loaded/t.total*100,o=Math.floor(.95*a);l.set(e,o),n.setState({itemUploadProgresses:l})},!1),d.send(i)},n.trackSubmitErrorXhr=function(e,t){var a=void 0;try{a=t.responseText}catch(e){a=t.responseType}n.trackSubmitError(e,t.status,t.statusText,a)},n.trackSubmitError=function(e,t,a,o){n.track("upload_fail",e+1+" of "+n.state.itemStates.size),(t||0===t)&&n.track("upload_fail_status_code",t.toString()),a&&n.track("upload_fail_status",a),o&&n.track("upload_fail_response",o)},n.submitUsingS3Method=function(e,t,a){n.apolloClient.mutate({mutation:M.a,variables:{request:{mimeType:e.type,fileName:e.name,fileSize:e.size,description:t.description,locationIds:Array.from(t.selectedLocations.keys()),pid:n.props.pid,pidAttr:n.props.pidAttr}}}).then(function(t){var o=t.data.initiateVideoUpload;n.submitFileToS3(e,a,o.mediaId,o.uploadUrl)}).catch(function(e){n.trackSubmitError(a,void 0,void 0,"initateUpload "+e.toString()),n.submitNextMedia()})},n.submitFileToS3=function(e,t,a,o){var i=new XMLHttpRequest;i.open("PUT",o,!0),i.onload=function(){if(200===i.status){var o=n.state.itemUploadProgresses;o.set(e,100),n.setState({itemUploadProgresses:o}),n.completeVideoUpload(e,t,a)}else n.trackSubmitErrorXhr(t,i),n.submitNextMedia()},i.onerror=function(){n.trackSubmitError(t,void 0,void 0,"s3 onerror "+i.readyState+" "+i.status.toString()),n.submitNextMedia()},i.onabort=function(){n.trackSubmitError(t,void 0,void 0,"s3 onabort "+i.readyState+" "+i.status.toString()),n.submitNextMedia()},i.upload.addEventListener("progress",function(t){var a=t.loaded/t.total*100,o=Math.floor(a),i=n.state.itemUploadProgresses;i.set(e,o),n.setState({itemUploadProgresses:i})},!1),i.send(e)},n.completeVideoUpload=function(e,t,a){n.apolloClient.mutate({mutation:D.a,variables:{request:{mediaId:a}}}).then(function(){var a=n.state.itemStates.get(e);n.track("upload_success",t+1+" of "+n.state.itemStates.size),a&&(a.uploadSuccess=!0,n.setState({itemStates:n.state.itemStates})),n.submitNextMedia()}).catch(function(e){n.trackSubmitError(t,void 0,void 0,"completeUpload "+e.toString()),n.submitNextMedia()})},n.tryAgainClicked=function(){var e=n.state.itemStates,t=new Map;e.forEach(function(e,n){e.uploadSuccess||t.set(n,0)}),n.setState({itemUploadProgresses:t,submitIndex:-1})},n.handleDragOver=function(e){e.preventDefault(),n.setState({isDragOver:!0})},n.handleDragLeave=function(e){e.preventDefault(),n.setState({isDragOver:!1})},n.handleDrop=function(e){e.preventDefault(),Object(u.d)(e,n.addFile,n.allowedFileTypes,n.maxFileSizeInBytes,n.fileRejected),n.setState({isDragOver:!1})},n.requiredFieldsComplete=function(){var e=n.state.itemStates,t=new Map,a=!1;return e.forEach(function(e,n){var o=Object(j.d)(e),i=Object(j.e)(e);(o||i)&&(a=!0);var r=A({},e,{descriptionError:o,locationError:i});t.set(n,r)}),n.setState({itemStates:t}),!a},n.isEditing=function(){return n.state.submitIndex<0},n.isFinishedUploading=function(){return n.state.submitIndex>=n.state.itemStates.size},n.isUploading=function(){return!n.isFinishedUploading()&&n.state.submitIndex>=0},n.hadUploadError=function(){return!!n.isFinishedUploading()&&Array.from(n.state.itemStates.values()).some(function(e){return!e.uploadSuccess})},n.render=function(){var e="photo"===n.props.mediaType,t=n.state.itemStates.size>0,o=t?null:a.createElement("div",{className:U.a.guidelinesWrapper},a.createElement("div",{className:U.a.guidelinesTips},Object(d.localize)("flash_uploader_tips_and_guidelines_10d8")),a.createElement("div",{className:U.a.guidelinesNumVideos},B.maxAllowedFiles(e,n.maxAllowedFiles)),a.createElement("div",null,B.acceptedFormats(e,n.allowedFileTypes)),Object(l.featureIsEnabled)("social_link_posting_enabled")&&"video"===n.props.mediaType?a.createElement("div",null,a.createElement("span",{className:U.a.guidelinesLinkUploader,onClick:function(){n.track("post_a_link_click"),n.props.linkUploaderModalName&&n.props.showGlobalOverlay(n.props.linkUploaderModalName)}},Object(d.unescaped)(Object(d.localize)("video_upload_go_to_link_posting")))):null,a.createElement("div",{className:U.a.guidelinesMoreInfo},a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:B.guidelinesLink(e),onClick:function(){return n.track("guidelines_click")}},B.guidelinesMoreInfo(e)))),c=Array.from(n.state.itemStates.entries()).map(function(e,t){var o=R(e,2),i=o[0],r=o[1];return a.createElement(a.Fragment,{key:"fragment_"+i.name+"_"+i.size},t>0?a.createElement("div",{className:U.a.itemDivider}):null,a.createElement(j.a,{file:i,index:t,videoCount:n.state.itemStates.size,itemState:r,descriptionChanged:n.handleDescriptionChanged,descriptionBlurred:n.handleDescriptionBlurred,handleRemoveFile:n.handleRemoveFile,locationSelectionChanged:n.handleLocationSelectionChanged,locationSelectionBlurred:n.handleLocationSelectionBlurred,track:n.track,isMobile:n.props.isMobile,isUploading:n.isUploading(),uploadProgress:n.state.itemUploadProgresses.get(i)}))}),p=n.state.errorMessage,g=t?null:a.createElement("div",{className:U.a.dropZone+" "+U.a.dropZoneBig},a.createElement("div",{className:U.a.dropZoneItem},a.createElement(v.a,{type:"primary"},B.dropZoneButton(e))),n.props.isMobile?null:a.createElement(a.Fragment,null,a.createElement("div",{className:U.a.dropZoneItem},Object(d.localize)("post_video_or_just_text")),a.createElement("div",{className:U.a.dropZoneItem+" "+U.a.dragDropText},Object(d.localize)("post_videodrag_and_drop_from_desktop")))),b=t?a.createElement("div",{className:U.a.dropZone+" "+U.a.dropZoneSmall},Object(d.unescaped)(B.uploadAnother(e,n.props.isMobile))):null,y={display:n.state.itemStates.size>=n.maxAllowedFiles?"none":"block"},_=p?null:a.createElement("div",{className:""+(t?U.a.dropZoneSmallWrapper:""),style:y},a.createElement(u.a,{allowedFileTypes:n.allowedFileTypes,allowMultipleSelection:n.maxAllowedFiles>1,addFile:n.addFile,maxSizeInBytes:n.maxFileSizeInBytes,fileRejected:n.fileRejected,isDragOverOutsideComponent:n.state.isDragOver},g,b)),k=p?a.createElement("div",{className:U.a.errorDisplay},p):null,S=t?a.createElement("div",{className:Object(r.a)(U.a.postButtonContainer,z({},U.a.paddingForReference,Object(l.featureIsEnabled)("social_at_reference_ugc_editor")))},a.createElement("div",{className:U.a.postButton},n.isUploading()||n.isFinishedUploading()?a.createElement("div",{className:Object(r.a)(U.a.loaderContainer,z({},U.a.fullWidth,n.props.isMobile))},a.createElement("div",{className:U.a.loaderCenter},a.createElement(h.a,{color:"dark"}))):a.createElement(v.a,{type:"primary",size:n.props.isMobile?"fullwidth":"default",onClick:n.handleSubmitClicked},B.submitButton(e,n.state.itemStates.size)))):null,w=void 0;w=e?n.state.itemStates.size>1?Object(d.localize)("new_photos_terms_of_use",{link:"/pages/terms.html"}):Object(d.localize)("new_photo_terms_of_use",{link:"/pages/terms.html"}):n.state.itemStates.size>1?Object(d.localize)("new_videos_terms_of_use",{link:"/pages/terms.html"}):Object(d.localize)("new_video_terms_of_use",{link:"/pages/terms.html"});var O=n.hadUploadError(),x=t&&!O?a.createElement("div",{className:U.a.releaseContainer},a.createElement("span",{className:U.a.releaseItem},Object(d.unescaped)(w))):null,E=O?a.createElement("div",{className:U.a.uploadError},a.createElement("div",{className:U.a.oopsMessage},B.uploadFailed(e)),a.createElement(v.a,{type:"primary",size:"fullwidth",onClick:n.tryAgainClicked},Object(d.localize)("content_upload_fail_try_again"))):null,C=a.createElement(f.TitleBar,{iconName:e?"camera-fill":"video-fill",displayType:"LEFT_ALIGN_GRAY"},B.title(e)),N=[U.a.uploaderWrapper];return n.isUploading()&&N.push(U.a.uploading),n.isFinishedUploading()&&N.push(U.a.autoWidth),a.createElement(m.Modal,{name:n.props.modalName,header:n.isFinishedUploading()?null:C,onDragOver:n.handleDragOver,onDragLeave:n.handleDragLeave,onDrop:n.handleDrop},a.createElement(a.Fragment,null,a.createElement("div",{className:Object(r.a)(N)},a.createElement("div",{style:{display:n.isFinishedUploading()?"none":"block",overflowY:"auto",overflowX:"hidden",paddingLeft:"2px",paddingRight:"2px"}},_,o,c,k,n.state.displayLocationWarning&&a.createElement(I,{onCancel:n.handleCancel,onPost:n.handleSubmitClicked}),S),x,E),a.createElement("input",{style:{display:"none"},type:"file",name:"media",accept:n.allowedFileTypes.join(","),multiple:!0,onChange:n.fileSelectionChanged,ref:function(e){n.fileInputRef=e}}),a.createElement(s.a,{onComponentDidMount:n.handleComponentOpened,onComponentWillUnmount:n.handleComponentClosed})),a.createElement(i.ApolloConsumer,null,function(e){return n.apolloClient=e,null}))},n.state=n.emptyState(),"video"===n.props.mediaType)n.allowedFileTypes=k.g,n.maxAllowedFiles=5;else{if("photo"!==n.props.mediaType)throw new Error("unknown mediaType "+n.props.mediaType);n.allowedFileTypes=k.f,n.maxAllowedFiles=10}return n.maxFileSizeInBytes="photo"===n.props.mediaType?p.a:p.b,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),t}();t.b=Object(o.connect)(function(e,t){return A({isMobile:"MOBILE"===e.meta.device.viewportCategory,csrfToken:e.auth.csrfToken,pidAttr:e.meta.device.userAgentCategory},t)},{showGlobalOverlay:c.actions.overlays.showGlobalOverlay})(q)},"./packages/media/upload/MediaUploaderModal.less":function(e,t,n){e.exports={uploaderWrapper:"media-upload-MediaUploaderModal__uploaderWrapper--3vpRu",uploading:"media-upload-MediaUploaderModal__uploading--VHHT5",autoWidth:"media-upload-MediaUploaderModal__autoWidth--326vh",paddingForReference:"media-upload-MediaUploaderModal__paddingForReference--2kWVh",guidelinesWrapper:"media-upload-MediaUploaderModal__guidelinesWrapper--1iufw",guidelinesTips:"media-upload-MediaUploaderModal__guidelinesTips--C-awX",guidelinesNumVideos:"media-upload-MediaUploaderModal__guidelinesNumVideos--1VMIe",guidelinesLinkUploader:"media-upload-MediaUploaderModal__guidelinesLinkUploader--2-7jm",itemDivider:"media-upload-MediaUploaderModal__itemDivider--2k7Te",dropZone:"media-upload-MediaUploaderModal__dropZone--1OS_4",dropZoneBig:"media-upload-MediaUploaderModal__dropZoneBig--3vVou",dropZoneSmall:"media-upload-MediaUploaderModal__dropZoneSmall--2m4Qh",dropZoneSmallWrapper:"media-upload-MediaUploaderModal__dropZoneSmallWrapper--2zafs",dropZoneItem:"media-upload-MediaUploaderModal__dropZoneItem--3YzvV",dragDropText:"media-upload-MediaUploaderModal__dragDropText--2HiJs",uploadAnother:"media-upload-MediaUploaderModal__uploadAnother--qzHA1",errorDisplay:"media-upload-MediaUploaderModal__errorDisplay--2OSJB",postButtonContainer:"media-upload-MediaUploaderModal__postButtonContainer--2H7j7",releaseItem:"media-upload-MediaUploaderModal__releaseItem--IQ8i-",releaseContainer:"media-upload-MediaUploaderModal__releaseContainer--2YLtS",loaderContainer:"media-upload-MediaUploaderModal__loaderContainer--139vi",fullWidth:"media-upload-MediaUploaderModal__fullWidth--1vyco",loaderCenter:"media-upload-MediaUploaderModal__loaderCenter--TixTO",postButton:"media-upload-MediaUploaderModal__postButton--1fSV4",uploadError:"media-upload-MediaUploaderModal__uploadError--21dIT",oopsMessage:"media-upload-MediaUploaderModal__oopsMessage--1acPn",guidelinesMoreInfo:"media-upload-MediaUploaderModal__guidelinesMoreInfo--1GJRK"}},"./packages/media/upload/Moderate.gql":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Moderate"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"texts"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"checks"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"moderate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"texts"},value:{kind:"Variable",name:{kind:"Name",value:"texts"}}},{kind:"Argument",name:{kind:"Name",value:"checks"},value:{kind:"Variable",name:{kind:"Name",value:"checks"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"check"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"present"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:131}};n.loc.source={body:"query Moderate($texts: [String!]!, $checks: [String!]!) {\n  moderate(texts: $texts, checks: $checks) {\n    check\n    present\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"./packages/media/upload/ParentLocations.gql":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ParentLocations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locationIds"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"Variable",name:{kind:"Name",value:"locationIds"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"query ParentLocations($locationIds: [Int!]!) {\n  locations(locationIds: $locationIds) {\n    locationId\n    name\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"./packages/media/upload/ProximityLocations.gql":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ProximityLocations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fromPoint"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"GeoPointInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"radius"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"proximityLocations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fromPoint"},value:{kind:"Variable",name:{kind:"Name",value:"fromPoint"}}},{kind:"Argument",name:{kind:"Name",value:"radius"},value:{kind:"Variable",name:{kind:"Name",value:"radius"}}},{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parentId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGeo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isClosed"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:251}};n.loc.source={body:"query ProximityLocations($fromPoint: GeoPointInput!, $radius: Float!, $limit: Int!) {\n  proximityLocations(fromPoint: $fromPoint, radius: $radius, page: { offset: 0, limit: $limit }) {\n    locationId\n    name\n    parentId\n    isGeo\n    isClosed\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"./packages/social/engagement-card/BrandEducatorCard.less":function(e,t,n){e.exports={card:"social-engagement-card-BrandEducatorCard__card--2pARK",message:"social-engagement-card-BrandEducatorCard__message--3N-ZT",cta:"social-engagement-card-BrandEducatorCard__cta--2Npgo"}},"./packages/social/engagement-card/EngagementCard.less":function(e,t,n){e.exports={card:"social-engagement-card-EngagementCard__card--2uNZN",cardContent:"social-engagement-card-EngagementCard__cardContent--3N6sw",closeIcon:"social-engagement-card-EngagementCard__closeIcon--2HHmH",title:"social-engagement-card-EngagementCard__title--37xXb",description:"social-engagement-card-EngagementCard__description--11QEy",button_container:"social-engagement-card-EngagementCard__button_container--xDDLV",facebook_ui_button:"social-engagement-card-EngagementCard__facebook_ui_button--cC_3M"}},"./packages/social/engagement-card/UpdateInsightProfileTracking.gql":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateInsightProfile"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cardId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CardTypeEnumInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cardAction"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ActionTypeEnumInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateInsightProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"request"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"profile"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"uiCardActions"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"cardId"},value:{kind:"Variable",name:{kind:"Name",value:"cardId"}}},{kind:"ObjectField",name:{kind:"Name",value:"cardAction"},value:{kind:"Variable",name:{kind:"Name",value:"cardAction"}}}]}]}}]}}]}}],directives:[]}]}}],loc:{start:0,end:218}};n.loc.source={body:"mutation updateInsightProfile($cardId: CardTypeEnumInput!, $cardAction: ActionTypeEnumInput!) {\n  updateInsightProfile(\n    request: { profile: { uiCardActions: [{ cardId: $cardId, cardAction: $cardAction }] } }\n  )\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"./packages/social/engagement-card/index.jsx":function(e,t,n){"use strict";n.r(t);var a=n("./node_modules/react/index.js"),o=n("./node_modules/react-apollo/react-apollo.browser.umd.js"),i=n("@ta/tracking.interactions"),r=n("./node_modules/react-redux/es/index.js"),s=n("@ta/social.button"),l=n.n(s),c=n("@ta/overlays.managers"),d=n("./packages/media/upload/MediaUploaderModal.jsx"),u=n("./packages/common/features/features.jsx"),p=n("./packages/social/login-gate/AuthGated.jsx"),m=n("@ta/social.onboarding-state"),f=n("./packages/social/engagement-card/BrandEducatorCard.less"),g=n.n(f),v=Object(r.connect)(function(e){return{}},{setFireOnboarding:m.ACTIONS.setShouldFire})(function(e){return a.createElement("div",{className:g.a.card},a.createElement("div",{className:g.a.message},e.message),a.createElement("div",{className:g.a.cta},a.createElement(p.a,{pid:40464},function(t){return a.createElement(l.a,{type:"secondary",onClick:function(n){e.onClick(n),t().then(function(t){var n=t&&(t.hasCreatedMember||!t.hasAcceptedTermsOfUse);e.setFireOnboarding(n,"BRAND_EDUCATOR")})}},e.ctaText)})))}),h=n("./packages/social/engagement-card/EngagementCard.less"),b=n.n(h),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var _=function(e){var t=e.cardType,n=e.actionText,o=e.logInteraction;switch(t){case"CONNECT_TO_FACEBOOK":return a.createElement("div",{className:b.a.button_container},a.createElement("button",{className:"ui_button "+b.a.facebook_ui_button,onClick:function(e){return o(e,"feedClick")}},n));case"ADD_PHOTO":return a.createElement("div",{className:b.a.button_container},a.createElement(c.Opener,{name:"photo-upload"},function(e){return a.createElement(l.a,{size:"default",type:"primary",onClick:function(t){o(t,"feedClick"),e()}},n)}),a.createElement(d.b,{modalName:"photo-upload",mediaType:"photo",linkUploaderModalName:"link-uploader"}));default:return a.createElement("div",null)}},k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dismiss=function(){n.setState({dismissed:!0})},n.state={dismissed:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),y(t,[{key:"componentDidMount",value:function(){"LOG_IN"!==this.props.cardType&&Object(u.featureIsEnabled)("show_engagement_card_in_home_feed_for_login_user")&&this.props.updateInsightProfile({variables:{cardId:this.props.cardType,cardAction:"SHOW"}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.cardType,o=t.title,i=t.description,r=t.actionText,s=t.userId,l=t.logInteraction,c=t.updateInsightProfile;return s||"LOG_IN"!==n?s&&Object(u.featureIsEnabled)("show_engagement_card_in_home_feed_for_login_user")&&"LOG_IN"!==n&&!this.state.dismissed?a.createElement("div",{className:b.a.card},a.createElement("div",{className:b.a.cardContent},a.createElement("div",{className:b.a.title},o),a.createElement("div",{className:b.a.description},i),a.createElement(_,{cardType:n,actionText:r,logInteraction:l})),a.createElement("span",{className:b.a.closeIcon+" ui_icon times",onClick:function(t){l(t,"dismiss"),c({variables:{cardId:n,cardAction:"DISMISS"}}),e.dismiss()}})):null:a.createElement(v,{onClick:function(e){return l(e,"feedClick")},message:i,ctaText:r})}}]),t}(),S=Object(r.connect)(function(e){return{userId:e.auth.loggedInUserId}})(k),w=n("./packages/social/engagement-card/UpdateInsightProfileTracking.gql"),O=n.n(w),x=function(e){var t=e.cardType,n=e.description,r=e.actionText,s=e.title;return a.createElement(i.InteractionLogger,null,function(e){return a.createElement(o.Mutation,{mutation:O.a},function(o){return a.createElement(S,{cardType:t,description:n,actionText:r,logInteraction:e,updateInsightProfile:o,title:s})})})};n.d(t,"EngagementCard",function(){return x}),n.d(t,"BrandEducatorCard",function(){return v})},"./packages/social/login-gate/AuthGated.jsx":function(e,t,n){"use strict";(function(e){var a=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/react-apollo/react-apollo.browser.umd.js"),r=n("./packages/common/webview/webview.jsx"),s=n("@ta/tracking.interactions"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a["Component"]),c(n,[{key:"formatInteraction",value:function(e){var t=this.props.tracking;return t?{variables:{interaction:d({},t.source,d({},e,l({element:t.element},t.attributes||{})))}}:null}},{key:"renderInner",value:function(t){var n=this.props,a=n.loggedInUserId,o=n.pid,i=n.flowOrigin,s=n.flow,l=n.extraQueryParams,c=n.onClose;return(0,n.children)(function(){return new Promise(function(n){if(a)n();else if(r.a.isNativeWebview())r.a.showRegistration(!1);else{var d={flow:s||"CORE_COMBINED",pid:o||-1,userRequestedForce:!0,extraQueryParams:l||{},locationId:window.require("page-model").GEO_ID,onSuccess:function(e){t("modalSuccess"),n(e)},onClose:c};i&&(d.extraQueryParams.flowOrigin=i),e.require(["trjs!ta/registration/RegOverlay"],function(e){t("elementClick"),e.showRegOverlayByPageModel(null,null,window.require("page-model"),d)})}})},a)}},{key:"render",value:function(){var e=this;return a.createElement(i.Mutation,{mutation:s.LogInteractionV4},function(t){return e.renderInner(function(n){var a=e.formatInteraction(n);a&&t(a)})})}}]),n}();t.a=Object(o.connect)(function(e,t){return l({loggedInUserId:e.auth.loggedInUserId},t)})(u)}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./packages/styleguide/icon/Icon.jsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),o=function(e){var t=e.name,n=e.className;return a.createElement("span",{className:"ui_icon "+t+" "+n})};o.defaultProps={className:""},t.a=o},"./packages/styleguide/loading/LoadingBubbles.jsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),o=function(e){var t=e.size,n=e.color;return a.createElement("span",{className:"ui_loader "+(t||"")+" "+(n||"")},a.createElement("span",null),a.createElement("span",null),a.createElement("span",null),a.createElement("span",null),a.createElement("span",null))};o.defaultProps={size:void 0,color:void 0},t.a=o},"@ta/common.typeahead":function(t,n){t.exports=e},"@ta/overlays.custom-overlay":function(e,n){e.exports=t},"@ta/overlays.headers":function(e,t){e.exports=a},"@ta/overlays.managers":function(e,t){e.exports=o},"@ta/overlays.modal":function(e,t){e.exports=i},"@ta/social.button":function(e,t){e.exports=r},"@ta/social.onboarding-state":function(e,t){e.exports=s},"@ta/social.social-reference":function(e,t){e.exports=l},"@ta/tracking.interactions":function(e,t){e.exports=c},"dll-reference @ta/common.global":function(e,t){e.exports=d}})});