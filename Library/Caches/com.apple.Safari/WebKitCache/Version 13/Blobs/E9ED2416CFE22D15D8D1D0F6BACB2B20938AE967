define("@ta/common.typeahead",["@ta/list.navigable-list","@ta/media.image","@ta/common.global"],function(e,t,n){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/components/dist/",n(n.s="./packages/common/typeahead/typeaheadExports.jsx")}({"./node_modules/react-apollo/react-apollo.browser.umd.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react-apollo/react-apollo.browser.umd.js")},"./node_modules/react/index.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react/index.js")},"./packages/common/classnames/classnames.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(){for(var e=[],t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var i=function(t){var a=n[t];if(a){var i=void 0===a?"undefined":o(a);"string"===i||"number"===i?e.push(a):Array.isArray(a)?e.push(r.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a))):"object"===i&&Object.keys(a).filter(function(e){return a[e]}).forEach(function(t){return e.push(t)})}},s=0;s<n.length;s++)i(s);return e.join(" ")}function a(e,t,n){var o=e.split(" ").filter(function(e){return e!==t});return n&&o.push(n),o}},"./packages/common/i18n/i18n.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/i18n/i18n.jsx")},"./packages/common/logging/logging.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/logging/logging.jsx")},"./packages/common/string/string.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a});var o=function(e){if(!e)return 0;for(var t=0,n=e.length-1;n>=0;n--){t+=1;var o=e.charCodeAt(n);(o>=19968&&o<=40959||o>=12352&&o<=12543||o>=44032&&o<=55295)&&(t+=1)}return t},r=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0},a=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},"./packages/common/tracking/tracking.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/tracking/tracking.jsx")},"./packages/common/typeahead/location/LocationDetails.gql":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"LocationDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locationIds"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"Variable",name:{kind:"Name",value:"locationIds"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"placeType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnail"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isHorizontal"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:372}};n.loc.source={body:"query LocationDetails($locationIds: [Int!]!) {\n  locations(locationIds: $locationIds) {\n    locationId\n    placeType\n    name\n    thumbnail {\n      id\n      photoSizes {\n        url\n        width\n        height\n        isHorizontal\n      }\n    }\n    parent {\n      locationId\n      additionalNames {\n        long\n      }\n    }\n    additionalNames {\n      long\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"./packages/common/typeahead/location/MultiLocationSelector.less":function(e,t,n){e.exports={wrapper:"common-typeahead-location-MultiLocationSelector__wrapper--2sLrR",searchIcon:"common-typeahead-location-MultiLocationSelector__searchIcon--YLe10",inputContainer:"common-typeahead-location-MultiLocationSelector__inputContainer--Eocvy",inputFocused:"common-typeahead-location-MultiLocationSelector__inputFocused--12OVL",selectedItem:"common-typeahead-location-MultiLocationSelector__selectedItem--2PZaM",textInput:"common-typeahead-location-MultiLocationSelector__textInput--1oyuO",results:"common-typeahead-location-MultiLocationSelector__results--2ZFoy"}},"./packages/common/typeahead/location/POIObjectList.less":function(e,t,n){e.exports={no_photo_available:"common-typeahead-location-POIObjectList__no_photo_available--18uTo",icon:"common-typeahead-location-POIObjectList__icon--19m37",poi_block:"common-typeahead-location-POIObjectList__poi_block--DwyCz",relative_container:"common-typeahead-location-POIObjectList__relative_container--2Y8P2",poi_thumbnail:"common-typeahead-location-POIObjectList__poi_thumbnail--3CQFD",poi_info_vertical_center:"common-typeahead-location-POIObjectList__poi_info_vertical_center--11qZh",poi_info:"common-typeahead-location-POIObjectList__poi_info--3gQ56",poi_name:"common-typeahead-location-POIObjectList__poi_name--1VmJ4",poi_location:"common-typeahead-location-POIObjectList__poi_location--3ZjoZ",trashIcon:"common-typeahead-location-POIObjectList__trashIcon--3kbIQ"}},"./packages/common/typeahead/location/Selector.less":function(e,t,n){e.exports={textInput:"common-typeahead-location-Selector__textInput--2SXY4",socialInput:"common-typeahead-location-Selector__socialInput--3Jw8X",results:"common-typeahead-location-Selector__results--fToBJ"}},"./packages/common/typeahead/results/BasicResult.less":function(e,t,n){e.exports={result:"common-typeahead-results-BasicResult__result--1TNhe",subtitle:"common-typeahead-results-BasicResult__subtitle--2Jmq-",active:"common-typeahead-results-BasicResult__active--RvGi9",narrow:"common-typeahead-results-BasicResult__narrow--1LuJl",leftIcon:"common-typeahead-results-BasicResult__leftIcon--1E5Ou",rightIcon:"common-typeahead-results-BasicResult__rightIcon--2S3qO",verified:"common-typeahead-results-BasicResult__verified--pZxG-"}},"./packages/common/typeahead/results/NoResults.less":function(e,t,n){e.exports={no_results:"common-typeahead-results-NoResults__no_results--2e_ti"}},"./packages/common/typeahead/results/SectionTitle.less":function(e,t,n){e.exports={section:"common-typeahead-results-SectionTitle__section--1osNA"}},"./packages/common/typeahead/typeaheadExports.jsx":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/react/index.js"),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={results:Object.freeze({})},o.notifyFetchers=function(e){o.props.fetchers.forEach(function(t){return t.fetch(e,o.props.context,o.recalculate)})},o.recalculate=function(){var e={};o.props.fetchers.forEach(function(t){var n=t.getResults();e[t.id]=n?n.filter(function(e){return e&&(o.props.filters||[]).every(function(t){return t(e)})}):n}),o.setState({results:e},function(){return o.props.onResultsChange(o.state.results)})},a(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),r(t,[{key:"componentDidMount",value:function(){this.props.runOnInit&&this.notifyFetchers("")}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.context&&this.props.fetchers.forEach(function(n){var o=n;o.onContextChange&&"function"==typeof o.onContextChange&&o.onContextChange(e.context,t.recalculate)})}},{key:"render",value:function(){return this.props.children?this.props.children(this.state.results,this.notifyFetchers):null}}]),t}();i.defaultProps={context:void 0,filters:void 0,onResultsChange:function(){},runOnInit:!1};var s=i,c=9,u=13,l=20,p=27,f=37,h=38,d=39,m=40,y=91,v=16,g=17,b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.onChange=function(e,t){if(o.props.onChange&&o.props.onChange(t),(!e||e.keyCode!==u)&&o.currentQuery!==t){if(e)switch(e.keyCode){case m:case h:case p:case c:case l:case f:case d:case y:case v:case g:return}o.updateSearchTimeout&&clearTimeout(o.updateSearchTimeout),o.currentQuery=t,o.updateSearchTimeout=setTimeout(function(){o.props.onQueryChange&&o.props.onQueryChange(t)},o.props.searchDelay)}},_(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),b(t,[{key:"render",value:function(){var e={name:this.props.name,value:this.props.value,type:this.props.type,className:this.props.inputComponentClassName,fontSize:this.props.fontSize,lineHeight:this.props.lineHeight,placeholder:this.props.placeholder,onChange:this.onChange,onKeyUp:this.onChange,onCompositionEnd:this.onChange,onInteractionStart:this.props.onInteractionStart,onFocus:this.props.onFocus,onBlur:this.props.onBlur,focusOnMount:this.props.focusOnMount,focusOnUpdate:this.props.focusOnUpdate,onRef:this.props.onRef};return o.createElement(this.props.inputComponentType,e)}}]),t}();k.defaultProps={name:void 0,value:void 0,type:void 0,placeholder:void 0,focusOnMount:!1,focusOnUpdate:!1,searchDelay:250,onQueryChange:void 0,onInteractionStart:void 0,onFocus:void 0,onBlur:void 0,onRef:void 0};var O=k,S=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.onChange=function(e,t){if(o.props.onChange&&o.props.onChange(e,t),(!e||e.keyCode!==u)&&o.currentQuery!==t){if(e)switch(e.keyCode){case m:case h:case p:case c:case l:case f:case d:case y:case v:case g:return}o.updateSearchTimeout&&clearTimeout(o.updateSearchTimeout),o.currentQuery=t,o.updateSearchTimeout=setTimeout(function(){o.props.onQueryChange&&o.props.onQueryChange(t)},o.props.searchDelay)}},w(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),S(t,[{key:"render",value:function(){var e={id:this.props.id,name:this.props.name,value:this.props.value,className:this.props.inputComponentClassName,rows:this.props.rows,cols:this.props.cols,placeholder:this.props.placeholder,disabled:this.props.disabled,focusOnMount:this.props.focusOnMount,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onChange:this.onChange,onKeyUp:this.onChange,onKeyDown:this.onChange,onCompositionEnd:this.onChange,onInteractionStart:this.props.onInteractionStart,onRef:this.props.onRef,maxLength:this.props.maxLength};return o.createElement(this.props.inputComponentType,e)}}]),t}();x.defaultProps={name:void 0,value:void 0,placeholder:void 0,focusOnMount:!1,focusOnUpdate:!1,searchDelay:250,onQueryChange:void 0,onInteractionStart:void 0,onFocus:void 0,onBlur:void 0,onRef:void 0};var I=x,j=n("./packages/common/tracking/tracking.jsx"),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var E=function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setInteractionStart=function(e){o.interactionStart=e},this.createTrackingData=function(e){var t=e.eventType,n=e.userInteractionType,r=e.selectedItem,a=r&&r.query,i=r&&r.value,s=r&&r.url,c=r&&r.resultIdx,u=r&&r.type,l=r&&r.data_type,p=r&&r.totalCount,f=r&&r.document_id,h={action:"RECORD",eventType:t,uiOrigin:o.uiOrigin,global:"true",type:u,value:i,source:o.uiOrigin,startTime:String(o.interactionStart),selDepth:c,isChild:"false",totalNum:p?String(p):void 0,userInteractionType:n,scope:"1",query:a,dataType:l,url:s,searchSessionId:o.searchSessionId,documentId:f},d={};return Object.keys(h).forEach(function(e){var t=h[e];void 0!==t&&null!==t&&(d[e]=String(h[e]))}),d},this.ajaxTrack=function(e){var t=o.createTrackingData(e);fetch("/TypeAheadJson?"+new URLSearchParams(t).toString(),{credentials:"same-origin"})},this.trackInteractionStart=function(){o.ajaxTrack({eventType:"start",userInteractionType:"start"})},this.trackSelection=function(e,t){o.ajaxTrack({eventType:"select",userInteractionType:t,selectedItem:e})},this.trackEventViaMEVTCookie=function(e,t){var n=o.createTrackingData({eventType:"search",userInteractionType:t,selectedItem:e});Object(j.addMevtCookie)(C({},n,{t:"ta"}))},this.uiOrigin=t,this.searchSessionId=n},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var N="geonavi",P=function(){function e(t){var n=t.geoId,o=t.limit;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=N,this.geoId="1",this.limit=26,this.cache={},this.results=null,this.stack=[],n&&(this.geoId=n),o&&(this.limit=o)}return T(e,[{key:"getResults",value:function(){return this.results}},{key:"fetch",value:function(e,t,n){this.onContextChange(t,n)}},{key:"onContextChange",value:function(e,t){var n=this;if(e&&e.geoNaviId){var o=e.geoNaviId;"1"===o?this.stack=[]:-1!==this.stack.indexOf(o)?this.stack=this.stack.slice(0,this.stack.indexOf(o)):this.stack.push(this.geoId),this.geoId=o;var r=this.cache[this.geoId];if(r){if(r instanceof Promise)return;return this.results=r,void t()}var a=new URLSearchParams({action:"GEONAVI",geoID:this.geoId}),i=this.geoId;this.cache[i]=fetch("/TypeAheadJson?"+a.toString(),{method:"GET",credentials:"same-origin"}).then(function(e){if(e.ok)return e;throw Error(e.statusText)}).then(function(e){return e.json()}).then(function(e){return e.results.map(function(e,t){var o=String(e.id)===i?n.stack[n.stack.length-1]:String(e.id),r=0===t&&1!==parseInt(n.geoId,10);return{name:e.displayName,geoId:o,back:r,forward:!r&&!e.isLeaf}})}).then(function(e){return n.results=e.slice(0,n.limit),n.cache[i]=n.results,t(),n.results}).catch(function(){return n.results=[],t(),n.results})}}}]),e}(),R=n("./packages/common/logging/logging.jsx"),L=n.n(R),M=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var F="recentlyviewed",A=function(){function e(t){var n=t.categories,o=t.limit;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=F,this.limit=10,this.results=null,this.inFlight=!1,n&&(this.categories=n),o&&(this.limit=o)}return M(e,[{key:"getResults",value:function(){return this.results}},{key:"fetch",value:function(e){function t(t,n,o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){var o=this;if(!this.inFlight&&null===this.results){var r=new URLSearchParams({limit:String(this.limit)});this.categories&&this.categories.forEach(function(e){return r.append("categories[]",e)}),this.inFlight=!0,fetch("/data/1.0/recent?"+r.toString(),{method:"GET",credentials:"same-origin"}).then(function(e){if(e.ok)return e;throw Error(e.statusText)}).then(function(e){return e.json()}).then(function(e){o.results=e.data.map(function(e){return e.result_object}),o.inFlight=!1,n()}).catch(function(e){L.a.error("recentPrefill",e),o.results=[],o.inFlight=!1,n()})}})}]),e}(),V=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var D="geotheme",B=function(){function e(t){var n=t.theme,o=t.limit;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=D,this.theme=0,this.limit=10,this.results=null,this.inFlight=!1,n&&(this.theme=n),o&&(this.limit=o)}return V(e,[{key:"getResults",value:function(){return this.results}},{key:"fetch",value:function(e){function t(t,n,o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){var o=this;if(!this.inFlight&&null===this.results){var r=new URLSearchParams({geoThemeId:String(this.theme),limit:String(this.limit)});this.inFlight=!0,fetch("/data/1.0/destinations/bundle?"+r.toString(),{method:"GET",credentials:"same-origin"}).then(function(e){if(e.ok)return e;throw Error(e.statusText)}).then(function(e){return e.json()}).then(function(e){o.results=e.geos,o.inFlight=!1,n()}).catch(function(e){L.a.error("Could not fetch geo theme typeahead results.",e),o.results=[],o.inFlight=!1,n()})}})}]),e}(),z=n("./packages/common/string/string.jsx"),G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},U=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var J=["act","air","al","attr","eat","geo","hotel","nbrhd"],H="typeaheadjson",Q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=H,this.results=null,this.props=t,void 0===this.props.cache&&(this.props.cache=!0),this.props.cache&&(this.cache={})}return U(e,[{key:"setAdditionalParams",value:function(e){this.additionalParams=e}},{key:"getResults",value:function(){return this.results}},{key:"fetch",value:function(e){function t(t,n,o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){var o=this;if(this.mostRecentTerm=e,Object(z.a)(e)<3)null!==this.results&&(this.results=null,n());else if(this.cache&&this.cache[e]){var r=this.cache[e];this.results!==r&&(this.results=r,n())}else{var a={action:"API",query:e};Object.keys(this.props).filter(function(e){return"cache"!==e}).forEach(function(e){var t=o.props[e];t&&(Array.isArray(t)?a[e]=t.join(","):a[e]=String(t))}),this.additionalParams&&(a=G({},a,this.additionalParams)),fetch("/TypeAheadJson?"+new URLSearchParams(a).toString(),{method:"GET",credentials:"same-origin"}).then(function(e){if(e.ok)return e;throw Error(e.statusText)}).then(function(e){return e.json()}).then(function(t){t&&o.cache&&(o.cache[e]=t),e===o.mostRecentTerm&&(t?(o.results=t,n()):o.results=[])}).catch(function(){o.results=[],n()})}})}]),e}(),K=n("./packages/styleguide/icon/Icon.jsx"),q=n("./packages/common/typeahead/results/BasicResult.less"),Y=n.n(q),Z=function(e){var t=[Y.a.result];e.active&&t.push(Y.a.active),e.isNarrow&&t.push(Y.a.narrow);var n=e.subtitle?o.createElement("span",{className:Y.a.subtitle},e.subtitle):void 0,r=e.iconName?o.createElement("span",{className:Y.a.leftIcon},o.createElement(K.a,{name:e.iconName})):void 0,a=e.chevronName?o.createElement("span",{className:Y.a.rightIcon},o.createElement(K.a,{name:e.chevronName})):void 0,i=e.verifiedIcon?o.createElement("span",{className:Y.a.verified}):void 0;return o.createElement("div",{className:t.join(" ")},r,o.createElement("span",null,e.title,i,n),a)};Z.defaultProps={subtitle:void 0,active:void 0,iconName:void 0,verifiedIcon:!1,chevronName:void 0,isNarrow:!1};var W=Z,X=function(e){switch(e){case"HOTEL":return"hotels";case"EATERY":return"restaurants";case"ATTRACTION":return"attractions";case"UNIVERSITY":return"classes-workshops";case"TRAIN_STATION":return"train";case"AIRPORT":return"flights";case"THEME_PARK":return"amusement-parks";case"ACTIVITY":return"activities";case"SHOPPING":return"shopping-bag-fill";case"PORT":return"ports";case"GENERAL_HOSPITAL":return"hospital";case"FERRY":return"cruises";case"CORPORATION":return"office";case"BRAND":case"NEIGHBORHOOD":return"";case"GEO":default:return"map-pin-fill"}},$=n("@ta/list.navigable-list"),ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function te(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ne=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=te(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.onSelection=function(e){if(o.props.onSelection&&"function"==typeof o.props.onSelection){var t=o.props.result,n=t.geoId,r=t.back,a=t.forward,i=r||a?"geonavi":"location_id";o.props.onSelection(e,{type:i,value:n})}},te(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),ee(t,[{key:"render",value:function(){var e=void 0;return this.props.result.back?e="single-chevron-left":this.props.result.forward&&(e="single-chevron-right"),o.createElement($.NavigableListItem,{onSelection:this.onSelection,onMouseMove:this.props.onMouseMove,active:!!this.props.active},o.createElement(W,{title:this.props.result.name,chevronName:e,active:!!this.props.active}))}}]),t}();ne.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1};var oe=ne,re=n("./packages/common/i18n/i18n.jsx"),ae=function(e){return o.createElement($.NavigableListItem,{onSelection:function(t){e.onSelection&&e.onSelection(t,{type:"nearby"})},onMouseMove:e.onMouseMove,active:e.active},o.createElement(W,{title:Object(re.localize)("mx_nearby"),iconName:"nearby-fill",active:e.active}))};ae.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1};var ie=ae,se=function(e){return o.createElement($.NavigableListItem,{onSelection:function(t){e.onSelection&&e.onSelection(t,{type:"worldwide"})},onMouseMove:e.onMouseMove,active:e.active},o.createElement(W,{title:Object(re.localize)("dual_search_worldwide"),iconName:"globe-world",active:e.active}))};se.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1};var ce=se,ue=n("./packages/common/typeahead/results/NoResults.less"),le=n.n(ue),pe=function(){return o.createElement("div",{className:le.a.no_results},Object(re.localize)("mobile_no_results_found_8e0"))};pe[$.NonNavigableItem]=!0;var fe=pe,he=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function de(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var me=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=de(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.onSelect=function(e){var t="click"===e.type?"click":"enter";o.props.tracker.trackSelection(o.props.result,t);var n=o.props.result.location_id;o.props.onSelection&&o.props.onSelection(e,{type:"recent_location_id",value:n})},de(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),he(t,[{key:"render",value:function(){var e=this.props.result.name,t=this.props.result.ancestors?this.props.result.ancestors.length:0,n=void 0;return t>1?n=this.props.result.ancestors[0].name+", "+this.props.result.ancestors[1].name:t>0&&(n=this.props.result.ancestors[0].name),o.createElement($.NavigableListItem,{active:!!this.props.active,onMouseMove:this.props.onMouseMove,onSelection:this.onSelect},o.createElement(W,{title:e,subtitle:n,active:this.props.active}))}}]),t}();me.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1};var ye=me,ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function ge(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var be=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=ge(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.onSelect=function(e){var t="click"===e.type?"click":"enter";o.props.tracker.trackSelection(o.props.result,t);var n=o.props.result.location_id;o.props.onSelection&&o.props.onSelection(e,{type:"geo_theme_location_id",value:n})},ge(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),ve(t,[{key:"render",value:function(){var e=this.props.result.name,t=this.props.result.ancestors?this.props.result.ancestors.length:0,n=void 0;return t>1?n=this.props.result.ancestors[0].name+", "+this.props.result.ancestors[1].name:t>0&&(n=this.props.result.ancestors[0].name),o.createElement($.NavigableListItem,{active:!!this.props.active,onMouseMove:this.props.onMouseMove,onSelection:this.onSelect},o.createElement(W,{title:e,subtitle:n,active:this.props.active}))}}]),t}();be.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1};var _e=be,ke=n("./packages/common/typeahead/results/SectionTitle.less"),Oe=n.n(ke),Se=function(e){var t=e.title;return o.createElement("div",{className:Oe.a.section},t)};Se[$.NonNavigableItem]=!0;var we=Se,xe=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function Ie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var je=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=Ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.onSelect=function(e){var t="click"===e.type?"click":"enter";o.props.tracker.trackSelection(o.props.result,t),o.props.tracker.trackEventViaMEVTCookie(o.props.result,t);var n=o.props.result.value;o.props.onSelection&&o.props.onSelection(e,{type:"location_id",value:n,displayValue:o.props.result.name,scope:o.props.result.scope})},Ie(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),xe(t,[{key:"render",value:function(){var e=this.props.result.details||{},t=e.parent_ids?e.parent_ids.length:0,n=e.name,r=this.props.addressDisplay,a="";"full_address"===r&&e.address?a=e.address+" "+a:"parent_geos"===r&&(t>2?a=e.parent_name+", "+e.grandparent_name:t>1&&(a=e.parent_name));var i=this.props.includeIcon?X(this.props.result.type):"";return o.createElement($.NavigableListItem,{onSelection:this.onSelect,onMouseMove:this.props.onMouseMove,active:this.props.active},o.createElement(W,{title:n,subtitle:a,iconName:i,active:this.props.active}))}}]),t}();je.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1,includeIcon:!1,addressDisplay:"parent_geos"};var Ce=je,Ee=n("./packages/common/classnames/classnames.jsx"),Te=n("./packages/input/text-input/ManagedTextInput.jsx"),Ne=n("./packages/common/typeahead/location/Selector.less"),Pe=n.n(Ne),Re=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function Le(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Me=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=Le(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.onSelection=function(e,t){t&&(o.props.selectionChanged(t),o.updateSearch(""),o.textInput&&o.textInput.focus())},o.tracker=new E("",""),Le(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),Re(t,[{key:"render",value:function(){var e=this,t=this.props.placeHolder||Object(re.localize)("common_Search");return o.createElement(s,{fetchers:this.props.fetchers},function(n,r){e.updateSearch=r;var a=n&&Object.keys(n).filter(function(e){return!(!(t=n[e])||0===t.length);var t}).length>0?n:null;return o.createElement("div",null,o.createElement("span",{className:Object(Ee.a)("ui_icon",e.props.iconType,Pe.a.textInput)},o.createElement(O,{inputComponentType:Te.a,inputComponentClassName:Object(Ee.a)("ui_input_text",Pe.a.socialInput,e.props.className),value:e.props.typeaheadTextInputValue,type:e.props.inputType,onChange:function(t){return e.props.textInputChanged(t)},onQueryChange:function(e){r(e)},onFocus:e.props.onFocus,onBlur:e.props.onBlur,searchDelay:50,placeholder:t,onRef:function(t){e.textInput=t}}),a&&o.createElement("div",{className:Pe.a.results},e.props.children(n,e.tracker,e.onSelection))))})}}]),t}();Me.defaultProps={placeHolder:null,className:void 0,inputType:void 0,iconType:"search",onFocus:void 0,onBlur:void 0};var Fe=Me,Ae=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function Ve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var De=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=Ve(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={textInputValue:o.props.selectedLocation.displayValue||""},o.onResultSelected=function(e){o.props.selectionChanged(e),o.setState({textInputValue:o.props.clearValueOnSelection?"":e.displayValue||""})},o.typeaheadJsonFetcher=new Q({interleaved:!0,types:o.props.locationTypes,name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8,scoreThreshold:.8}),o.textInputChanged=function(e){o.setState({textInputValue:e})},Ve(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),Ae(t,[{key:"render",value:function(){return o.createElement(Fe,{fetchers:[this.typeaheadJsonFetcher],typeaheadTextInputValue:this.state.textInputValue,selectionChanged:this.onResultSelected,textInputChanged:this.textInputChanged,className:this.props.className,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeHolder:this.props.placeHolder},function(e,t,n){return o.createElement($.NavigableList,null,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.typeaheadjson||[])).map(function(e){return function(r,a){return o.createElement(Ce,{result:e,tracker:t,onMouseMove:a,onSelection:n,active:r,key:"result="+e.value,includeIcon:!0})}}))})}}]),t}();De.defaultProps={locationTypes:J,className:void 0,onFocus:void 0,onBlur:void 0,placeHolder:void 0,clearValueOnSelection:!1};var Be=De,ze=n("./node_modules/react-apollo/react-apollo.browser.umd.js"),Ge=n("@ta/media.image"),Ue=n("./packages/common/typeahead/location/POIObjectList.less"),Je=n.n(Ue),He=n("./packages/common/typeahead/location/LocationDetails.gql"),Qe=n.n(He),Ke=function(e){var t=e.selectedLocations,n=e.onClose;return o.createElement(ze.Query,{errorPolicy:"all",query:Qe.a,variables:{locationIds:Array.from(t.keys()).map(function(e){return parseInt(e,10)})}},function(e){var t=e.data;return t&&t.locations&&t.locations[0]?o.createElement(o.Fragment,null,t.locations.map(function(e){return function(e){var t=void 0;t="CITY"===e.placeType?e.additionalNames.longOnlyParent:e.parent.additionalNames.long;var r=void 0;switch(e.placeType){case"ACCOMMODATION":r="hotels";break;case"ATTRACTION":r="attractions";break;case"ACTIVITY":r="activities";break;case"CITY":r="globe-world";break;case"EATERY":r="restaurants";break;default:r=""}return o.createElement("div",{key:"poi_tag_"+e.locationId,className:Je.a.poi_block+" "+Je.a.relative_container},o.createElement("div",{className:Je.a.poi_thumbnail},e.thumbnail?o.createElement(Ge.ResponsiveImage,{sources:e.thumbnail.photoSizes,width:"60px",height:"60px",notLazy:!1,borderRadius:"2px"}):o.createElement("div",{style:{width:"60px",height:"60px"}},o.createElement("div",{className:Je.a.no_photo_available},o.createElement(K.a,{name:r,className:Je.a.icon})))),o.createElement("div",{className:Je.a.poi_info_vertical_center},o.createElement("div",{className:Je.a.poi_info},o.createElement("div",{className:Je.a.poi_name},e.name),o.createElement("div",{className:Je.a.poi_location},t))),o.createElement("div",{className:"ui_icon times "+Je.a.trashIcon,onClick:function(){return n(e.locationId.toString())}}))}(e)})):null})},qe=n("./packages/common/typeahead/location/MultiLocationSelector.less"),Ye=n.n(qe),Ze=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),We=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function Xe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var $e=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=Xe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={textInputValue:"",focused:!1,hasResults:!1},o.onSelection=function(e,t){if(t&&"location_id"===t.type&&t.value){var n=String(t.value),r=new Map(o.props.selectedLocations);if(!r.has(n)){if(r.set(n,t),o.props.maxLocations>0&&r.size>o.props.maxLocations){var a=Array.from(r.keys())[0];r.delete(a)}o.props.selectionChanged(r)}o.setState({textInputValue:""}),o.updateSearch(""),o.textInput&&o.textInput.focus()}},o.handleResultChange=function(e){var t=e&&e.typeaheadjson&&e.typeaheadjson.length>0;t&&!o.state.hasResults?(o.props.hasResultsChanged&&o.props.hasResultsChanged(!0),o.setState({hasResults:!0})):!t&&o.state.hasResults&&(o.props.hasResultsChanged&&o.props.hasResultsChanged(!1),o.setState({hasResults:!1}))},o.handleItemRemoveClick=function(e){var t=new Map(o.props.selectedLocations);t.delete(e),o.props.selectionChanged(t)},o.typeaheadJsonFetcher=new Q({interleaved:!0,types:J,name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8,scoreThreshold:.8}),o.tracker=new E("",""),Xe(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),We(t,[{key:"render",value:function(){var e=this;return o.createElement(s,{fetchers:[this.typeaheadJsonFetcher],onResultsChange:this.handleResultChange},function(t,n){return e.updateSearch=n,o.createElement("div",{className:Ye.a.wrapper+" "+(e.props.className?e.props.className:"")},o.createElement("div",{className:Ye.a.inputContainer+" "+(e.state.focused?Ye.a.inputFocused:""),onClick:function(){return e.textInput&&e.textInput.focus()}},o.createElement("span",{className:"ui_icon search "+Ye.a.searchIcon}),o.createElement(O,{inputComponentType:Te.a,inputComponentClassName:Ye.a.textInput,value:e.state.textInputValue,onChange:function(t){return e.setState({textInputValue:t})},onQueryChange:function(e){n(e)},onFocus:function(t){e.setState({focused:!0}),e.props.onFocus&&e.props.onFocus(t)},onBlur:function(t){e.setState({focused:!1}),e.props.onBlur&&e.props.onBlur(t)},searchDelay:50,placeholder:0===e.props.selectedLocations.size||e.props.selectedLocations.size===e.props.maxLocations?Object(re.localize)("post_video_typeahead_placeholder_text_search"):Object(re.localize)("post_video_location_typeahead_add_location"),onRef:function(t){e.textInput=t}})),t&&t.typeaheadjson&&t.typeaheadjson.length>0?o.createElement("div",{className:Ye.a.results},o.createElement($.NavigableList,null,t&&t.typeaheadjson?t.typeaheadjson.map(function(t){return function(n,r){return o.createElement(Ce,{result:t,tracker:e.tracker,onMouseMove:r,onSelection:e.onSelection,active:n,key:"result="+t.value,includeIcon:!0})}}):[])):null,e.props.showLocationsAsPoiObjects?o.createElement(Ke,{selectedLocations:e.props.selectedLocations,onClose:e.handleItemRemoveClick}):Array.from(e.props.selectedLocations.entries()).map(function(t){var n=Ze(t,2),r=n[0],a=n[1];return o.createElement("div",{className:"ui_tag_box ui_icon times "+Ye.a.selectedItem,key:r,onClick:function(){return e.handleItemRemoveClick(r)}},a.displayValue)}))})}}]),t}();$e.defaultProps={hasResultsChanged:null,maxLocations:0,className:void 0,onFocus:void 0,onBlur:void 0,showLocationsAsPoiObjects:!0};var et=$e,tt=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var nt="worldwide",ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=nt,this.results=null,this.name=Object(re.localize)("dual_search_worldwide")}return tt(e,[{key:"getResults",value:function(){return this.results}},{key:"fetch",value:function(e,t,n){this.results=e.length<3||this.name.toLowerCase().indexOf(e.toLowerCase())<0?null:[{type:"GEO",value:"1",displayValue:this.name,details:{name:this.name}}],n()}}]),e}(),rt=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function at(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function it(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var st=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=it(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={textInputValue:o.props.selectedLocation.displayValue||""},o.onResultSelected=function(e){o.props.selectionChanged(e),o.setState({textInputValue:e.displayValue||""})},o.typeaheadJsonFetcher=new Q({interleaved:!0,types:["geo"],filter:"cities"===o.props.mode?["nobroad"]:void 0,name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8}),o.textInputChanged=function(e){o.setState({textInputValue:e})},it(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),rt(t,[{key:"render",value:function(){var e=[this.typeaheadJsonFetcher];return this.props.includeWorld&&e.unshift(new ot),o.createElement(Fe,{fetchers:e,typeaheadTextInputValue:this.state.textInputValue,selectionChanged:this.onResultSelected,textInputChanged:this.textInputChanged},function(e,t,n){return o.createElement($.NavigableList,null,[].concat(at(e.worldwide||[]),at(e.typeaheadjson||[])).map(function(e){return function(r,a){return o.createElement(Ce,{result:e,tracker:t,onMouseMove:a,onSelection:n,active:r,key:"result="+e.value,includeIcon:!0})}}))})}}]),t}();st.defaultProps={mode:"all",includeWorld:!0};var ct=st,ut=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function lt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var pt=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=lt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={textInputValue:""},o.onResultSelected=function(e){o.props.selectionChanged(e),o.setState({textInputValue:e.displayValue||""})},o.typeaheadJsonFetcher=new Q({interleaved:!0,types:["hotel","attr","eat"],filter:["nobroad"],name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8}),o.textInputChanged=function(e){o.setState({textInputValue:e})},lt(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),ut(t,[{key:"render",value:function(){return o.createElement(Fe,{fetchers:[this.typeaheadJsonFetcher],typeaheadTextInputValue:this.state.textInputValue,selectionChanged:this.onResultSelected,textInputChanged:this.textInputChanged,placeHolder:this.props.placeholderText},function(e,t,n){return o.createElement($.NavigableList,null,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.typeaheadjson||[])).map(function(e){return function(r,a){return o.createElement(Ce,{result:e,tracker:t,onMouseMove:a,onSelection:n,active:r,key:"result="+e.value,includeIcon:!0})}}))})}}]),t}();n.d(t,"Typeahead",function(){return s}),n.d(t,"TypeaheadTextInput",function(){return O}),n.d(t,"TypeaheadTextArea",function(){return I}),n.d(t,"TypeaheadTracking",function(){return E}),n.d(t,"GeoNaviFetcher",function(){return P}),n.d(t,"GeoNaviFetcherId",function(){return N}),n.d(t,"RecentlyViewedFetcher",function(){return A}),n.d(t,"RecentlyViewedFetcherId",function(){return F}),n.d(t,"GeoThemeFetcher",function(){return B}),n.d(t,"GeoThemeFetcherId",function(){return D}),n.d(t,"TypeaheadJsonFetcher",function(){return Q}),n.d(t,"TypeaheadJsonFetcherId",function(){return H}),n.d(t,"BasicResult",function(){return W}),n.d(t,"getIconFromResultType",function(){return X}),n.d(t,"GeoNaviResult",function(){return oe}),n.d(t,"GoNearbyResult",function(){return ie}),n.d(t,"GoWorldwideResult",function(){return ce}),n.d(t,"NoResults",function(){return fe}),n.d(t,"RecentlyViewedResult",function(){return ye}),n.d(t,"GeoThemeResult",function(){return _e}),n.d(t,"SectionTitle",function(){return we}),n.d(t,"TypeaheadJsonResult",function(){return Ce}),n.d(t,"LocationSelector",function(){return Be}),n.d(t,"MultiLocationSelector",function(){return et}),n.d(t,"GeoSelector",function(){return ct}),n.d(t,"POISelector",function(){return pt}),n.d(t,"Selector",function(){return Fe}),n.d(t,"WorldwideFetcher",function(){return ot})},"./packages/input/text-input/ManagedTextInput.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n("./packages/common/classnames/classnames.jsx"),a=n("./packages/input/text-input/ManagedTextInput.less"),i=n.n(a),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.newListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(o){n.props.onInteractionStart&&!n.state.interactionStarted&&n.props.onInteractionStart(o),n.setState({composing:t});var r=o.currentTarget.value;n.props[e]&&n.props[e](o,r,n.state.composing),n.setState({interactionStarted:!0})}},n.onFocus=n.newListener("onFocus"),n.onBlur=n.newListener("onBlur"),n.onChange=n.newListener("onChange"),n.onKeyUp=n.newListener("onKeyUp"),n.onKeyDown=n.newListener("onKeyDown"),n.onCompositionStart=n.newListener("onCompositionStart",!0),n.onCompositionEnd=n.newListener("onCompositionEnd"),n.state={interactionStarted:!1,composing:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),s(t,[{key:"componentDidMount",value:function(){this.props.focusOnMount&&this.inputElem&&this.inputElem.focus()}},{key:"componentDidUpdate",value:function(){this.props.focusOnUpdate&&this.inputElem&&this.inputElem.focus()}},{key:"render",value:function(){var e=this,t={fontSize:this.props.fontSize,lineHeight:this.props.lineHeight};return o.createElement("input",{id:this.props.id,type:this.props.type,name:this.props.name,value:this.props.value,maxLength:this.props.maxLength,className:Object(r.a)(i.a.managedInput,this.props.className),style:t,placeholder:this.props.placeholder,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,ref:function(t){e.inputElem=t,e.props.onRef&&e.props.onRef(t)}})}}]),t}();c.defaultProps={id:void 0,name:void 0,value:void 0,type:"text",className:void 0,placeholder:void 0,focusOnMount:!1,focusOnUpdate:!1,onFocus:void 0,onBlur:void 0,onChange:void 0,onKeyUp:void 0,onKeyDown:void 0,onCompositionStart:void 0,onCompositionEnd:void 0,onInteractionStart:void 0,onRef:void 0,onCTAClick:void 0},t.a=c},"./packages/input/text-input/ManagedTextInput.less":function(e,t,n){e.exports={managedInput:"input-text-input-ManagedTextInput__managedInput--106PS"}},"./packages/styleguide/icon/Icon.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=function(e){var t=e.name,n=e.className;return o.createElement("span",{className:"ui_icon "+t+" "+n})};r.defaultProps={className:""},t.a=r},"@ta/list.navigable-list":function(t,n){t.exports=e},"@ta/media.image":function(e,n){e.exports=t},"dll-reference @ta/common.global":function(e,t){e.exports=n}})});