define("@ta/brand.trip-search-geopill-flyout",["@ta/common.typeahead","@ta/list.navigable-list","@ta/overlays.fullscreen-overlay","@ta/overlays.managers","@ta/overlays.pieces","@ta/common.global"],function(e,t,n,o,r,a){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/components/dist/",n(n.s="./packages/brand/trip-search-geopill-flyout/trip-search-geopill-flyout.jsx")}({"./node_modules/react-redux/es/index.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react-redux/es/index.js")},"./node_modules/react/index.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react/index.js")},"./packages/brand/geopill-util/legacyBuildUrl.jsx":function(e,t,n){"use strict";n.d(t,"b",function(){return o});var o=function(e,t){var n=window.location.pathname,o=window.location.search,r=n.match(/\/(\w+)/)[1].replace("MobileRestaurantSearch","Restaurants").replace("Attraction_Products","Attractions").replace(/(Hotel|Attraction|Restaurant)_Review/,"$1s").replace(/(Restaurants|Attractions|Hotels)Near/,"$1").replace(/Mobile(Hotel|Restaurant)Search/,"$1s").replace(/(HotelHighlight|SmartDeals|HotelsList|MobileMetaHac|LastMinute)/,"Hotels"),a=void 0;return-1!==r.indexOf("MobileNearby")?a=r+"?j=distLow":["Hotels","Restaurants","Attractions"].indexOf(r)>=0?a="/MobileNearby"+r+"?j=distLow":["VacationRentals","MobileVacationRentalSearch"].indexOf(r)>=0?a="/MobileVacationRentalSearch?j=distLow":"Search"===r&&(a=(n+o).replace(/&?(latitude|longitude|searchNearby|geo)=[^&]*/g,"")+"&searchNearby=true"),a?a+"&latitude="+e+"&longitude="+t:"/"};t.a=function(e,t){if(!e||0===e.length)return"/";var n=window.location.pathname,o=function(e){var t=e.match(/(\/[\w_]+).*/);return t&&t.length>1?t[1]:null}(n),r=n.replace("_Review","s").replace(/\/(ForumFAQAdmin|ForumItineraryAdmin|ShowTopic)-g\d+-.*/,"/ShowForum-g").replace(/-g.*/,"-g"+e).replace(/\/(MobileRestaurantSearch).*/,"/$1-g"+e).replace(/\/AttractionProductDetail.*/,"/Attraction_Products-g"+e).replace(/\/HotelsList.*/,"/Hotels-g"+e).replace(/\/MobileNearby(\w+).*/,"/$1-g"+e).replace(/\/MobileMetaHac/,"/Hotels-g"+e).replace(/\/Neighborhood-g.*/,"/NeighborhoodList-g"+e);return"/Search"===o&&(r=function(e,t){var n=new URLSearchParams(document.location.search.substring(1)).get("q");return n?"/Search?"+new URLSearchParams({q:n,geo:t}).toString():e}(r,e)),r===n&&(r=t?t+"-g"+e:"/Home-g"+e),r}},"./packages/brand/trip-search-geopill-flyout/GeoPillRedCarpetContents.less":function(e,t,n){e.exports={overlayContents:"brand-trip-search-geopill-flyout-GeoPillRedCarpetContents__overlayContents--36jP5"}},"./packages/brand/trip-search-geopill-flyout/GeoPillSearch.less":function(e,t,n){e.exports={transitionLoadingOverlay:"brand-trip-search-geopill-flyout-GeoPillSearch__transitionLoadingOverlay--3m-rD"}},"./packages/brand/trip-search-geopill-flyout/GeoScopedResults.less":function(e,t,n){e.exports={loading:"brand-trip-search-geopill-flyout-GeoScopedResults__loading--2382z",topSeparator:"brand-trip-search-geopill-flyout-GeoScopedResults__topSeparator--3dZur"}},"./packages/brand/trip-search-geopill-flyout/GeoScopedTypeahead.less":function(e,t,n){e.exports={input_container:"brand-trip-search-geopill-flyout-GeoScopedTypeahead__input_container--2WMNJ"}},"./packages/brand/trip-search-geopill-flyout/geoPillCommon.less":function(e,t,n){e.exports={container:"brand-trip-search-geopill-flyout-geoPillCommon__container--jdf9E",overlayContents:"brand-trip-search-geopill-flyout-geoPillCommon__overlayContents--yWQ_N"}},"./packages/brand/trip-search-geopill-flyout/trip-search-geopill-flyout.jsx":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/react/index.js"),r=n("./node_modules/react-redux/es/index.js"),a=n("@ta/overlays.fullscreen-overlay"),i=n.n(a),l=n("@ta/overlays.managers"),s=n("@ta/overlays.pieces"),c=n("./packages/events/keyboard-event-listener/KeyboardEventListener.jsx"),u=n("./packages/common/is-visible/is-visible.jsx"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.overlayProps=function(){var e=n.props.target,t={transitionProperties:[{property:"top",timing:n.props.transitionTiming},{property:"left",timing:n.props.transitionTiming},{property:"transform",timing:n.props.transitionTiming},{property:"opacity",timing:n.props.transitionTiming}]};if(("exited"===n.props.transitionStatus||"exiting"===n.props.transitionStatus)&&e){var o=e.getBoundingClientRect();return p({},t,{opacity:"0",position:{position:"absolute",top:o.top+window.pageYOffset+e.clientHeight/2+"px",left:o.left+e.clientWidth/2+"px",transform:"translate(-10%, -10%) scale(.2, .2)",transformOrigin:"0 0"}})}return p({},t,{opacity:"1",position:{position:"absolute",top:window.pageYOffset+n.props.offsetTop+"px",left:"50%",transform:"translate(-50%, 0) scale(1, 1)",transformOrigin:"0 0"}})},n.checkIfScrolledAway=function(){n.state.mounted&&n.props.closeOnScrollAway&&!n.state.closing&&(n.props.close(),n.setState({closing:!0}))},n.state={closing:!1,mounted:!1},n.contentsWrapRef=o.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),f(t,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"componentWillUnmount",value:function(){this.setState({mounted:!1})}},{key:"render",value:function(){return o.createElement(s.Backdrop,{close:this.props.close},o.createElement(s.Overlay,this.overlayProps(),o.createElement(u.VisibilityObserver,{onInvisible:this.checkIfScrolledAway,node:this.contentsWrapRef},o.createElement("div",{ref:this.contentsWrapRef},this.props.overlayContents))),o.createElement(c.a,{keyName:"Escape",callback:this.props.close}))}}]),t}(),m=Object(r.connect)(function(e){return{closeOnScrollAway:"DESKTOP"===e.meta.device.viewportCategory&&"DESKTOP"===e.meta.device.userAgentCategory}})(d),h=n("./packages/brand/trip-search-geopill-flyout/geoPillCommon.less"),y=n.n(h),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b,w=(b=0,function(){return"targeted_flyout_"+(b+=1)}),_=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={name:w(),openedAt:0},r.overlayContent=function(e){return o.createElement("div",{className:y.a.overlayContents},r.props.overlayContents,o.createElement(s.CloseX,{close:e}))},v(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),g(t,[{key:"render",value:function(){var e=this,t=this.props.animate?150:0;return o.createElement(l.Opener,{name:this.state.name},function(n,r){var a=function(){e.setState({openedAt:window.pageYOffset}),n()};return o.createElement(l.Closer,null,function(n){return o.createElement(s.Target,null,function(c,u){return o.createElement(o.Fragment,null,o.createElement("div",{onClick:r?n:a},e.props.children(c)),e.props.fullscreen?o.createElement(l.Global,{name:e.state.name},o.createElement(o.Fragment,null,o.createElement(i.a,null,e.overlayContent(n)))):o.createElement(l.Global,{name:e.state.name,transitionDuration:t},o.createElement(s.OverlayConsumer,null,function(r){return o.createElement(m,{offsetTop:e.props.offsetTop,transitionStatus:r.transitionStatus,close:n,target:u,overlayContents:e.overlayContent(n),openedAt:e.state.openedAt,transitionTiming:t})})))})})})}}]),t}();_.defaultProps={animate:!0};var k=Object(r.connect)(function(e){return{fullscreen:"MOBILE"===e.meta.device.viewportCategory,animate:"DESKTOP"===e.meta.device.userAgentCategory}})(_),S=n("./packages/common/i18n/i18n.jsx"),O=n("./packages/common/features/features.jsx"),x=n("./packages/common/tracking/tracking.jsx"),E=n("./packages/common/geolocation/geolocation.jsx"),j=n("./packages/styleguide/loading/LoadingSpinner.jsx"),C=n("./packages/input/text-input/UnderlinedTextInput.jsx"),T=n("@ta/common.typeahead"),P=n("./packages/brand/geopill-util/legacyBuildUrl.jsx"),R=n("@ta/list.navigable-list"),L=n("./packages/brand/trip-search-geopill-flyout/GeoScopedResults.less"),I=n.n(L),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var U=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=M(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.createResultItems=function(){var e=[],t=r.props.results[T.GeoNaviFetcherId],n=r.props.results[T.TypeaheadJsonFetcherId],a=r.props.results[T.RecentlyViewedFetcherId],i=r.props.results[T.GeoThemeFetcherId];return r.props.enableGeoLocation&&!n&&e.push(function(e,t){return o.createElement(T.GoNearbyResult,{onSelection:r.props.onSelection,onMouseMove:t,active:e,key:"go_nearby"})}),r.props.enableWorldwide&&!n&&e.push(function(e,t){return o.createElement(T.GoWorldwideResult,{onSelection:r.props.onSelection,onMouseMove:t,active:e,key:"go_worldwide"})}),n?n.length?e=e.concat(n.map(function(e){return function(t,n){return o.createElement(T.TypeaheadJsonResult,{result:e,tracker:r.props.tracker,onSelection:r.props.onSelection,onMouseMove:n,active:t,key:"typeahead_"+e.value})}})):e.push(function(){return o.createElement(T.NoResults,{key:"no_results"})}):(t&&t.length>0&&(e=e.concat(t.map(function(e){return function(t,n){return o.createElement(T.GeoNaviResult,{result:e,onSelection:r.props.onSelection,onMouseMove:n,active:t,key:"geonavi_"+e.geoId})}}))),a?a.length>0?(e.push(function(){return o.createElement("div",{className:I.a.topSeparator,key:"recent_section_title"},o.createElement(T.SectionTitle,{title:Object(S.localize)("dual_search_recently_viewed_all_caps")}))}),e=e.concat(a.map(function(e){return function(t,n){return o.createElement("div",{"data-test-geopill-result":!0,key:"recent_"+e.location_id},o.createElement(T.RecentlyViewedResult,{result:e,tracker:r.props.tracker,onSelection:r.props.onSelection,onMouseMove:n,active:t}))}}))):0===a.length&&i&&i.length&&(e.push(function(){return o.createElement("div",{className:I.a.topSeparator,key:"popular_section_title"},o.createElement(T.SectionTitle,{title:Object(S.localize)("mx_geo_picker_popular_destinations")}))}),e=e.concat(i.map(function(e){return function(t,n){return o.createElement("div",{"data-test-geopill-result":!0,key:"popular_"+e.location_id},o.createElement(T.GeoThemeResult,{result:e,tracker:r.props.tracker,onSelection:r.props.onSelection,onMouseMove:n,active:t}))}}))):e.push(function(){return o.createElement("div",{className:I.a.loading,key:"recent_loader"},o.createElement(j.a,{size:"small"}))})),e},M(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),N(t,[{key:"render",value:function(){return o.createElement(R.NavigableList,null,this.createResultItems())}}]),t}();U.defaultProps={onSelection:void 0,enableGeoLocation:void 0};var G=U,A=n("./packages/brand/trip-search-geopill-flyout/GeoScopedTypeahead.less"),F=n.n(A),D=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var W=function(e){return function(t){var n=t.value;return n||(n=t.location_id),Number(n)!==e}},z=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInteractionStart=function(){var e=Date.now();n.typeaheadJsonFetcher.setAdditionalParams({startTime:String(e)}),n.typeaheadTracking.setInteractionStart(e),n.typeaheadTracking.trackInteractionStart()},n.onSelection=function(e,t){if(n.props.onSelection&&n.props.onSelection(e,t),!(e.isDefaultPrevented&&"function"==typeof e.isDefaultPrevented&&e.isDefaultPrevented()||e.defaultPrevented)){var o=function(){n.props.pageTransitionCallback&&n.props.pageTransitionCallback(),Object(x.trackEventCookie)({module:"HomeNav_"+(n.props.pageName||""),action:"submit_recent",context:"GeoPicker",value:0,destinationUrl:"/Home"}),window.location="/"};if("location_id"===t.type||["recent_location_id","geo_theme_location_id"].includes(t.type)&&t.value){n.props.pageTransitionCallback&&n.props.pageTransitionCallback();var r=String(t.value);if(n.props.geoUrlTemplate)return void(window.location=encodeURI(n.props.geoUrlTemplate.replace(/\$\{geoId\}/,encodeURIComponent(r))));var a=Object(P.a)(r,"Home");window.location=a}else"nearby"===t.type?(n.props.pageTransitionCallback&&n.props.pageTransitionCallback(),Object(E.b)(function(e,t){n.props.latLngUrlTemplate?window.location=encodeURI(n.props.latLngUrlTemplate.replace(/\$\{latitude\}/,encodeURIComponent(""+e)).replace(/\$\{longitude\}/,encodeURIComponent(""+t))):window.location="/?latitude="+encodeURIComponent(""+e)+"&longitude="+encodeURIComponent(""+t)},function(){alert(Object(S.localize)("mw_js_positionPermissionDenied")),o()})):"worldwide"===t.type?o():"geonavi"===t.type&&t.value&&n.setState({typeaheadContext:{geoNaviId:String(t.value)}})}},n.recentlyViewedFetcher=new T.RecentlyViewedFetcher({categories:["geos"],limit:7}),n.geoThemeFetcher=new T.GeoThemeFetcher({theme:0,limit:7}),n.typeaheadJsonFetcher=new T.TypeaheadJsonFetcher({types:["geo"],name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8,uiOrigin:n.props.uiOrigin,source:n.props.uiOrigin,searchSessionId:n.props.searchSessionId}),n.geoNaviFetcher=n.props.enableGeoNavi?new T.GeoNaviFetcher({}):void 0,n.filters=[W(n.props.geoId)],n.typeaheadTracking=new T.TypeaheadTracking(e.uiOrigin,e.searchSessionId),n.fetchers=[n.recentlyViewedFetcher,n.geoThemeFetcher,n.typeaheadJsonFetcher],n.geoNaviFetcher&&n.fetchers.unshift(n.geoNaviFetcher),n.state={typeaheadContext:{geoNaviId:"1"}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),D(t,[{key:"render",value:function(){var e=this;return o.createElement(T.Typeahead,{fetchers:this.fetchers,filters:this.filters,context:this.state.typeaheadContext,runOnInit:!0},function(t,n){return o.createElement(o.Fragment,null,o.createElement("div",{className:F.a.input_container},o.createElement(T.TypeaheadTextInput,{inputComponentType:C.a,placeholder:e.props.placeholder,searchDelay:50,onQueryChange:n,onInteractionStart:e.onInteractionStart,focusOnMount:!0,fontSize:e.props.smallInputText?"18px":"24px",lineHeight:"1.7em"})),o.createElement(G,{results:t,tracker:e.typeaheadTracking,onSelection:e.onSelection,enableGeoLocation:e.props.enableGeoLocation,enableWorldwide:e.props.enableWorldwide}))})}}]),t}();z.defaultProps={placeholder:void 0,uiOrigin:void 0,enableGeoLocation:!1,enableWorldwide:!1,enableGeoNavi:!1};var H=Object(r.connect)(function(e){return{pageName:e.meta.initialServletName,smallInputText:"MOBILE"===e.meta.device.viewportCategory}})(z),B=n("./packages/brand/trip-search-geopill-flyout/GeoPillSearch.less"),K=n.n(B),V=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function $(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var J=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=$(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={isTransitioning:!1},o.onSelection=function(e,t){if(("url"===t.type||"recent_url"===t.type)&&t.value){var n="url"===t.type?"submit":"submit_recent",r="string"==typeof t.value?t.value:"";Object(x.trackEventCookie)({module:"HomeNav_"+(o.props.servletName||""),action:n,context:"GeoPicker",value:0,destinationUrl:r})}},$(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),V(t,[{key:"render",value:function(){var e=this;return o.createElement(o.Fragment,null,o.createElement(H,{placeholder:Object(S.localize)("mobile_discovery_where_to"),geoId:this.props.geo,searchSessionId:this.props.searchSessionId,uiOrigin:this.props.uiOrigin,onSelection:this.onSelection,enableGeoLocation:this.props.enableGeoLocation&&Object(E.a)(),enableWorldwide:this.props.enableWorldwide,enableGeoNavi:Object(O.featureIsEnabled)("mobile_web_feature_dual_search_geo_navi"),latLngUrlTemplate:this.props.latLngUrlTemplate,geoUrlTemplate:this.props.geoUrlTemplate,pageTransitionCallback:function(){return e.setState({isTransitioning:!0})}}),this.state.isTransitioning&&o.createElement("div",{className:K.a.transitionLoadingOverlay},o.createElement(j.a,null)))}}]),t}();J.defaultProps={enableGeoLocation:!0};var X=Object(r.connect)(function(e){var t=e.route.geo,n=(e.tracking||{}).searchSessionId,o=e.meta,r=o.initialRelativeUrl,a=o.initialServletName,i=o.device.viewportCategory;return{geo:t,searchSessionId:n,uiOrigin:r?r.substring(1).replace(/-.*/,"_geopicker"):"geopicker",servletName:a,viewportCategory:i,enableWorldwide:void 0!==e.route.latitude||t}})(J),Y=function(e){return o.createElement(k,{overlayContents:o.createElement("div",{className:y.a.container,"data-test-geopill-contents":!0},o.createElement(X,{offsetTop:150,latLngUrlTemplate:e.latLngUrlTemplate,geoUrlTemplate:e.geoUrlTemplate,enableGeoLocation:e.enableGeoLocation})),offsetTop:150},function(t){return e.children(t)})};Y.defaultProps={latLngUrlTemplate:void 0,geoUrlTemplate:void 0};var Q=Object(r.connect)(function(e){return{enableGeoLocation:"MOBILE"===e.meta.device.userAgentCategory}})(Y),q=n("./packages/events/window-resize/WindowResize.jsx"),Z=n("./packages/events/window-scroll/WindowScroll.jsx"),ee=n("./packages/brand/trip-search-geopill-flyout/GeoPillRedCarpetContents.less"),te=n.n(ee),ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},oe=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var re=300,ae=150,ie=74,le=150,se=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.overlayContent=function(e,t){return o.createElement("div",{className:te.a.overlayContents,style:{height:n.state.height}},o.createElement("div",{ref:n.innerContentsRef},n.props.overlayContents,t&&o.createElement(s.CloseX,{close:e,testAttribute:"geopill-red-carpet-close"})))},n.overlayProps=function(e,t){if(!t||!document||!document.documentElement)return{position:{}};var o={transitionProperties:[{property:"right",timing:ae,delay:"exiting"===e||"entered"===e?re:0},{property:"left",timing:ae,delay:"exiting"===e||"entered"===e?re:0},{property:"opacity",timing:ae,delay:"exiting"===e||"entered"===e?re:0}]};return ne({},o,"exited"===e||"exiting"===e?{opacity:"0",position:{position:"absolute",top:le+"px",left:n.state.offsetLeft,right:n.state.offsetRight,transform:"translate(0%, 0) scale(1, 1)"}}:{opacity:"1",position:{position:"absolute",top:le+"px",left:n.state.offsetLeft,right:n.state.offsetRight,transform:"translate(0%, 0) scale(1, 1)"}})},n.bodyEl=document&&document.documentElement?document.documentElement:null;return n.state={height:ie+"px",readyToShrink:!1,closing:!1,offsetLeft:"50vw",offsetRight:"50vw",mounted:!1},n.innerContentsRef=o.createRef(),n.timer=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),oe(t,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"componentDidUpdate",value:function(e,t){var n=this,o=this.innerContentsRef.current;"exited"===e.transitionStatus&&"entering"===this.props.transitionStatus&&o&&(this.setLeftRightOffsetState(),this.timer=setTimeout(function(){n.setState({height:o.clientHeight+"px"})},re)),"entering"===e.transitionStatus&&"entered"===this.props.transitionStatus&&this.setState({height:"auto"}),"entered"===e.transitionStatus&&"exiting"===this.props.transitionStatus&&!t.readyToShrink&&o&&(this.setState({height:o.clientHeight+"px",readyToShrink:!0}),this.setLeftRightOffsetState()),this.state.readyToShrink&&"exiting"===this.props.transitionStatus&&this.state.readyToShrink&&!t.readyToShrink&&this.setState({height:ie+"px",readyToShrink:!1})}},{key:"componentWillUnmount",value:function(){this.setState({mounted:!1}),this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"setLeftRightOffsetState",value:function(){var e=this.getLeftRightOffset(),t=e.offsetLeft,n=e.offsetRight;this.setState({offsetLeft:t,offsetRight:n})}},{key:"getLeftRightOffset",value:function(){if(!this.props.target||!document||!document.documentElement)return{offsetLeft:"auto",offsetRight:"auto"};var e=document.documentElement,t=this.props,n=t.target,o=t.transitionStatus,r=n.getBoundingClientRect();if("exited"===o||"exiting"===o)return{offsetLeft:r.left+"px",offsetRight:e.clientWidth-n.clientWidth-r.left+"px"};var a=e.clientWidth/2-250;return{offsetLeft:a+"px",offsetRight:a+"px"}}},{key:"checkIfScrolledAway",value:function(){if(this.state.mounted){var e=this.innerContentsRef.current,t=document.documentElement;!this.state.closing&&e&&t&&window.pageYOffset>e.getBoundingClientRect().top-t.getBoundingClientRect().top+e.offsetHeight-100&&(this.props.close(),this.setState({closing:!0}))}}},{key:"render",value:function(){var e=this;return o.createElement(o.Fragment,null,o.createElement(s.Overlay,this.overlayProps(this.props.transitionStatus,this.props.target),this.overlayContent(this.props.close,"entered"===this.props.transitionStatus)),o.createElement(q.a,{callback:function(){return e.setLeftRightOffsetState()},throttle:0}),o.createElement(Z.a,{callback:function(){return e.checkIfScrolledAway()},throttle:50}))}}]),t}(),ce=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function ue(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var pe=function(){var e=0;return function(){return"redcarpet_"+(e+=1)}}(),fe=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=ue(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={name:pe()},r.overlayContents=function(){return o.createElement("div",{className:y.a.container,"data-test-geopill-contents":!0},o.createElement(X,null))},ue(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),ce(t,[{key:"render",value:function(){var e=this;return o.createElement(l.Opener,{name:this.state.name},function(t,n){return o.createElement(l.Closer,null,function(r){var a=function(){r()};return o.createElement(s.Target,null,function(u,p){return o.createElement(o.Fragment,null,o.createElement("div",{onClick:n?r:t},e.props.children(u)),e.props.fullscreen?o.createElement(l.Global,{name:e.state.name},o.createElement(i.a,null,o.createElement("div",{className:y.a.overlayContents},o.createElement("div",null,e.overlayContents(),o.createElement(s.CloseX,{close:a,testAttribute:"geopill-red-carpet-close"}))))):o.createElement(l.Global,{name:e.state.name,transitionDuration:450},o.createElement(s.OverlayConsumer,null,function(t){return o.createElement(s.Backdrop,{close:a},o.createElement(se,{target:p,transitionStatus:t.transitionStatus,close:a,overlayContents:e.overlayContents()}),o.createElement(c.a,{keyName:"Escape",callback:a}))})))})})})}}]),t}(),de=Object(r.connect)(function(e){return{fullscreen:"MOBILE"===e.meta.device.viewportCategory}})(fe);n.d(t,"GeoPillFlyout",function(){return Q}),n.d(t,"GeoPillRedCarpet",function(){return de})},"./packages/common/classnames/classnames.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(){for(var e=[],t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var i=function(t){var a=n[t];if(a){var i=void 0===a?"undefined":o(a);"string"===i||"number"===i?e.push(a):Array.isArray(a)?e.push(r.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a))):"object"===i&&Object.keys(a).filter(function(e){return a[e]}).forEach(function(t){return e.push(t)})}},l=0;l<n.length;l++)i(l);return e.join(" ")}function a(e,t,n){var o=e.split(" ").filter(function(e){return e!==t});return n&&o.push(n),o}},"./packages/common/features/features.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/features/features.jsx")},"./packages/common/geolocation/geolocation.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){return"undefined"!=typeof navigator&&void 0!==navigator.geolocation};t.b=function(e,t){e&&"function"==typeof e&&(o()?navigator.geolocation.getCurrentPosition(function(t){e(t.coords.latitude,t.coords.longitude)},function(e){"function"==typeof t&&t(e)}):t&&"function"==typeof t&&t(new Error("Location services not available")))}},"./packages/common/i18n/i18n.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/i18n/i18n.jsx")},"./packages/common/is-visible/is-visible.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/is-visible/is-visible.jsx")},"./packages/common/throttle/throttle.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/throttle/throttle.jsx")},"./packages/common/tracking/tracking.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/tracking/tracking.jsx")},"./packages/events/keyboard-event-listener/KeyboardEventListener.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleEvent=function(e){var t=e.key;t&&-1!==n.keyNames.indexOf(t)&&n.props.callback(e)},n.keyNames=Array.isArray(e.keyName)?e.keyName:[e.keyName],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),r(t,[{key:"componentDidMount",value:function(){window.addEventListener(this.props.eventType,this.handleEvent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener(this.props.eventType,this.handleEvent)}},{key:"render",value:function(){return null}}]),t}();a.defaultProps={eventType:"keydown"},t.a=a},"./packages/events/window-resize/WindowResize.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n("./packages/common/throttle/throttle.jsx"),a=n.n(r),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleResize=a()(function(){o.props.callback()},o.props.throttle||0,o.props.useDebounce),l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),i(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){return null}}]),t}();s.defaultProps={throttle:200,useDebounce:!1},t.a=s},"./packages/events/window-scroll/WindowScroll.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n("./packages/common/throttle/throttle.jsx"),a=n.n(r),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleScroll=o.props.throttle?a()(function(){o.props.callback()},o.props.throttle,o.props.useDebounce):o.props.callback,l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),i(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.disableListeners()}},{key:"disableListeners",value:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleScroll)}},{key:"render",value:function(){return null}}]),t}();s.defaultProps={throttle:200,useDebounce:!1},t.a=s},"./packages/input/text-input/ManagedTextInput.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n("./packages/common/classnames/classnames.jsx"),a=n("./packages/input/text-input/ManagedTextInput.less"),i=n.n(a),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.newListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(o){n.props.onInteractionStart&&!n.state.interactionStarted&&n.props.onInteractionStart(o),n.setState({composing:t});var r=o.currentTarget.value;n.props[e]&&n.props[e](o,r,n.state.composing),n.setState({interactionStarted:!0})}},n.onFocus=n.newListener("onFocus"),n.onBlur=n.newListener("onBlur"),n.onChange=n.newListener("onChange"),n.onKeyUp=n.newListener("onKeyUp"),n.onKeyDown=n.newListener("onKeyDown"),n.onCompositionStart=n.newListener("onCompositionStart",!0),n.onCompositionEnd=n.newListener("onCompositionEnd"),n.state={interactionStarted:!1,composing:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),l(t,[{key:"componentDidMount",value:function(){this.props.focusOnMount&&this.inputElem&&this.inputElem.focus()}},{key:"componentDidUpdate",value:function(){this.props.focusOnUpdate&&this.inputElem&&this.inputElem.focus()}},{key:"render",value:function(){var e=this,t={fontSize:this.props.fontSize,lineHeight:this.props.lineHeight};return o.createElement("input",{id:this.props.id,type:this.props.type,name:this.props.name,value:this.props.value,maxLength:this.props.maxLength,className:Object(r.a)(i.a.managedInput,this.props.className),style:t,placeholder:this.props.placeholder,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,ref:function(t){e.inputElem=t,e.props.onRef&&e.props.onRef(t)}})}}]),t}();s.defaultProps={id:void 0,name:void 0,value:void 0,type:"text",className:void 0,placeholder:void 0,focusOnMount:!1,focusOnUpdate:!1,onFocus:void 0,onBlur:void 0,onChange:void 0,onKeyUp:void 0,onKeyDown:void 0,onCompositionStart:void 0,onCompositionEnd:void 0,onInteractionStart:void 0,onRef:void 0,onCTAClick:void 0},t.a=s},"./packages/input/text-input/ManagedTextInput.less":function(e,t,n){e.exports={managedInput:"input-text-input-ManagedTextInput__managedInput--106PS"}},"./packages/input/text-input/UnderlinedTextInput.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n("./packages/input/text-input/ManagedTextInput.jsx"),a=n("./packages/input/text-input/UnderlinedTextInput.less"),i=n.n(a),l=function(e){return o.createElement("div",{className:i.a.input_container},o.createElement(r.a,e),o.createElement("span",{className:i.a.underline,style:{fontSize:e.fontSize}},e.value))};l.defaultProps={fontSize:"12px"},t.a=l},"./packages/input/text-input/UnderlinedTextInput.less":function(e,t,n){e.exports={input_container:"input-text-input-UnderlinedTextInput__input_container--3-Xpn",underline:"input-text-input-UnderlinedTextInput__underline--3S8TW"}},"./packages/styleguide/loading/LoadingSpinner.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=function(e){var t=e.size,n=e.inverted;return o.createElement("div",{className:"ui_spinner "+(t||"")+" "+(n?"inverted":"")})};r.defaultProps={size:void 0,inverted:!1},t.a=r},"@ta/common.typeahead":function(t,n){t.exports=e},"@ta/list.navigable-list":function(e,n){e.exports=t},"@ta/overlays.fullscreen-overlay":function(e,t){e.exports=n},"@ta/overlays.managers":function(e,t){e.exports=o},"@ta/overlays.pieces":function(e,t){e.exports=r},"dll-reference @ta/common.global":function(e,t){e.exports=a}})});