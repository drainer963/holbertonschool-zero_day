define("@ta/social.onboarding-controller",["@ta/overlays.managers","@ta/overlays.modal","@ta/social.button","@ta/social.educational-tooltips","@ta/social.onboarding","@ta/social.onboarding-state","@ta/tracking.interactions","@ta/common.global"],function(e,n,t,a,o,r,i,s){return function(e){var n={};function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(a,o,function(n){return e[n]}.bind(null,o));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/components/dist/",t(t.s="./packages/social/onboarding-controller/OnboardingController.jsx")}({"./node_modules/lodash/_Symbol.js":function(e,n,t){var a=t("./node_modules/lodash/_root.js").Symbol;e.exports=a},"./node_modules/lodash/_baseGetTag.js":function(e,n,t){var a=t("./node_modules/lodash/_Symbol.js"),o=t("./node_modules/lodash/_getRawTag.js"),r=t("./node_modules/lodash/_objectToString.js"),i="[object Null]",s="[object Undefined]",l=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:i:l&&l in Object(e)?o(e):r(e)}},"./node_modules/lodash/_freeGlobal.js":function(e,n,t){(function(n){var t="object"==typeof n&&n&&n.Object===Object&&n;e.exports=t}).call(this,t("./node_modules/webpack/buildin/global.js"))},"./node_modules/lodash/_getRawTag.js":function(e,n,t){var a=t("./node_modules/lodash/_Symbol.js"),o=Object.prototype,r=o.hasOwnProperty,i=o.toString,s=a?a.toStringTag:void 0;e.exports=function(e){var n=r.call(e,s),t=e[s];try{e[s]=void 0;var a=!0}catch(e){}var o=i.call(e);return a&&(n?e[s]=t:delete e[s]),o}},"./node_modules/lodash/_objectToString.js":function(e,n){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},"./node_modules/lodash/_root.js":function(e,n,t){var a=t("./node_modules/lodash/_freeGlobal.js"),o="object"==typeof self&&self&&self.Object===Object&&self,r=a||o||Function("return this")();e.exports=r},"./node_modules/lodash/debounce.js":function(e,n,t){var a=t("./node_modules/lodash/isObject.js"),o=t("./node_modules/lodash/now.js"),r=t("./node_modules/lodash/toNumber.js"),i="Expected a function",s=Math.max,l=Math.min;e.exports=function(e,n,t){var c,u,d,m,p,f,g=0,b=!1,k=!1,v=!0;if("function"!=typeof e)throw new TypeError(i);function _(n){var t=c,a=u;return c=u=void 0,g=n,m=e.apply(a,t)}function h(e){var t=e-f;return void 0===f||t>=n||t<0||k&&e-g>=d}function y(){var e=o();if(h(e))return O(e);p=setTimeout(y,function(e){var t=n-(e-f);return k?l(t,d-(e-g)):t}(e))}function O(e){return p=void 0,v&&c?_(e):(c=u=void 0,m)}function N(){var e=o(),t=h(e);if(c=arguments,u=this,f=e,t){if(void 0===p)return function(e){return g=e,p=setTimeout(y,n),b?_(e):m}(f);if(k)return p=setTimeout(y,n),_(f)}return void 0===p&&(p=setTimeout(y,n)),m}return n=r(n)||0,a(t)&&(b=!!t.leading,d=(k="maxWait"in t)?s(r(t.maxWait)||0,n):d,v="trailing"in t?!!t.trailing:v),N.cancel=function(){void 0!==p&&clearTimeout(p),g=0,c=f=u=p=void 0},N.flush=function(){return void 0===p?m:O(o())},N}},"./node_modules/lodash/isObject.js":function(e,n){e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},"./node_modules/lodash/isObjectLike.js":function(e,n){e.exports=function(e){return null!=e&&"object"==typeof e}},"./node_modules/lodash/isSymbol.js":function(e,n,t){var a=t("./node_modules/lodash/_baseGetTag.js"),o=t("./node_modules/lodash/isObjectLike.js"),r="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&a(e)==r}},"./node_modules/lodash/now.js":function(e,n,t){var a=t("./node_modules/lodash/_root.js");e.exports=function(){return a.Date.now()}},"./node_modules/lodash/toNumber.js":function(e,n,t){var a=t("./node_modules/lodash/isObject.js"),o=t("./node_modules/lodash/isSymbol.js"),r=NaN,i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return r;if(a(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=a(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var t=l.test(e);return t||c.test(e)?u(e.slice(2),t?2:8):s.test(e)?r:+e}},"./node_modules/react-apollo/react-apollo.browser.umd.js":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./node_modules/react-apollo/react-apollo.browser.umd.js")},"./node_modules/react-redux/es/index.js":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./node_modules/react-redux/es/index.js")},"./node_modules/react/index.js":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./node_modules/react/index.js")},"./node_modules/webpack/buildin/global.js":function(e,n){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(t=window)}e.exports=t},"./packages/common/api/api.jsx":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./packages/common/api/api.jsx")},"./packages/common/classnames/classnames.jsx":function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(){for(var e=[],n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];for(var i=function(n){var r=t[n];if(r){var i=void 0===r?"undefined":a(r);"string"===i||"number"===i?e.push(r):Array.isArray(r)?e.push(o.apply(void 0,function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(r))):"object"===i&&Object.keys(r).filter(function(e){return r[e]}).forEach(function(n){return e.push(n)})}},s=0;s<t.length;s++)i(s);return e.join(" ")}function r(e,n,t){var a=e.split(" ").filter(function(e){return e!==n});return t&&a.push(t),a}},"./packages/common/client/ClientOnly.jsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),o=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();var r=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.componentDidMount=function(){t.setState({componentMounted:!0})},t.state={componentMounted:!1},t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a["Component"]),o(n,[{key:"render",value:function(){return this.state.componentMounted?this.props.children:null}}]),n}();n.a=r},"./packages/common/features/features.jsx":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./packages/common/features/features.jsx")},"./packages/common/i18n/i18n.jsx":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./packages/common/i18n/i18n.jsx")},"./packages/common/localstorage/localstorage.jsx":function(e,n,t){"use strict";var a=function(e){return function(){try{return e.apply(void 0,arguments)}catch(e){return null}}},o=function(){return window&&window.localStorage?window.localStorage:null},r=a(function(e){var n=o();n&&n.removeItem(e)}),i=a(function(e){var n=o();if(!n)return null;var t=JSON.parse(n.getItem(e)||"0");return t?t.ttl&&t.ttl+t.now<(new Date).getTime()?(r(e),null):t.value:null}),s=a(function(e,n,t){var a=o();a&&a.setItem(e,JSON.stringify({ttl:t||0,now:(new Date).getTime(),value:n}))});n.a={get:i,set:s,has:function(e){return!!i(e)},remove:r}},"./packages/common/logging/logging.jsx":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./packages/common/logging/logging.jsx")},"./packages/common/routing/routing.jsx":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./packages/common/routing/routing.jsx")},"./packages/common/throttle/throttle.jsx":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./packages/common/throttle/throttle.jsx")},"./packages/common/tracking/tracking.jsx":function(e,n,t){e.exports=t("dll-reference @ta/common.global")("./packages/common/tracking/tracking.jsx")},"./packages/events/window-scroll/WindowScroll.jsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),o=t("./packages/common/throttle/throttle.jsx"),r=t.n(o),i=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();function s(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}var l=function(e){function n(){var e,t,a;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return t=a=s(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),a.handleScroll=a.props.throttle?r()(function(){a.props.callback()},a.props.throttle,a.props.useDebounce):a.props.callback,s(a,t)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a["Component"]),i(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.disableListeners()}},{key:"disableListeners",value:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleScroll)}},{key:"render",value:function(){return null}}]),n}();l.defaultProps={throttle:200,useDebounce:!1},n.a=l},"./packages/input/text-input/ManagedTextInput.jsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),o=t("./packages/common/classnames/classnames.jsx"),r=t("./packages/input/text-input/ManagedTextInput.less"),i=t.n(r),s=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();var l=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.newListener=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a){t.props.onInteractionStart&&!t.state.interactionStarted&&t.props.onInteractionStart(a),t.setState({composing:n});var o=a.currentTarget.value;t.props[e]&&t.props[e](a,o,t.state.composing),t.setState({interactionStarted:!0})}},t.onFocus=t.newListener("onFocus"),t.onBlur=t.newListener("onBlur"),t.onChange=t.newListener("onChange"),t.onKeyUp=t.newListener("onKeyUp"),t.onKeyDown=t.newListener("onKeyDown"),t.onCompositionStart=t.newListener("onCompositionStart",!0),t.onCompositionEnd=t.newListener("onCompositionEnd"),t.state={interactionStarted:!1,composing:!1},t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a["Component"]),s(n,[{key:"componentDidMount",value:function(){this.props.focusOnMount&&this.inputElem&&this.inputElem.focus()}},{key:"componentDidUpdate",value:function(){this.props.focusOnUpdate&&this.inputElem&&this.inputElem.focus()}},{key:"render",value:function(){var e=this,n={fontSize:this.props.fontSize,lineHeight:this.props.lineHeight};return a.createElement("input",{id:this.props.id,type:this.props.type,name:this.props.name,value:this.props.value,maxLength:this.props.maxLength,className:Object(o.a)(i.a.managedInput,this.props.className),style:n,placeholder:this.props.placeholder,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,ref:function(n){e.inputElem=n,e.props.onRef&&e.props.onRef(n)}})}}]),n}();l.defaultProps={id:void 0,name:void 0,value:void 0,type:"text",className:void 0,placeholder:void 0,focusOnMount:!1,focusOnUpdate:!1,onFocus:void 0,onBlur:void 0,onChange:void 0,onKeyUp:void 0,onKeyDown:void 0,onCompositionStart:void 0,onCompositionEnd:void 0,onInteractionStart:void 0,onRef:void 0,onCTAClick:void 0},n.a=l},"./packages/input/text-input/ManagedTextInput.less":function(e,n,t){e.exports={managedInput:"input-text-input-ManagedTextInput__managedInput--106PS"}},"./packages/input/text-input/TextInput.jsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),o=t("./packages/common/classnames/classnames.jsx"),r=t("./packages/input/text-input/ManagedTextInput.jsx"),i=t("./packages/input/text-input/TextInput.less"),s=t.n(i),l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};n.a=function(e){var n=Object(o.a)(s.a.inputElement,e.className),t=l({},e,{className:n});return a.createElement(r.a,t)}},"./packages/input/text-input/TextInput.less":function(e,n,t){e.exports={inputElement:"input-text-input-TextInput__inputElement--3z9Nm"}},"./packages/social/common/FacebookConnectButton.jsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),o=t("./node_modules/react-redux/es/index.js"),r=t("./packages/styleguide/icon/Icon.jsx"),i=t("./packages/common/classnames/classnames.jsx"),s=t("./packages/common/i18n/i18n.jsx"),l=t("./packages/social/common/FacebookConnectButton.less"),c=t.n(l),u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},d=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();function m(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}var p=function(e){function n(){var e,t,a;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return t=a=m(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(r))),a.onClick=function(){a.connectToFB()},a.connectToFB=function(){require(["trjs!ta/registration/FB"],function(e){e.showLogin(function(e,n){window.require(["ta/registration/RegOverlay"],function(t){var o="MOBILE"===a.props.viewportCategory;t.showRegOverlay(null,null,o,{flow:"FACEBOOK_CONNECT",pid:40466,userRequestedForce:"true",extraQueryParams:{token:e.accessToken,expires:n,social:"true"},onClose:function(){a.props.onClose&&a.props.onClose()}})})},function(){a.props.onFbAuthFailure&&a.props.onFbAuthFailure()})})},m(a,t)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a["Component"]),d(n,[{key:"componentDidMount",value:function(){require(["trjs!ta/registration/FB"],function(e){})}},{key:"render",value:function(){return a.createElement(a.Fragment,null,a.createElement("div",{id:"fb_context_data",className:"hidden","data-ta-server-time":this.props.taServerTime,"data-app-id":this.props.facebookConnectAppId,"data-skip-session-check":this.props.skipFacebookSessionCheck,"data-api-version":this.props.apiVersion}),a.createElement("div",{id:"fb_sdk_url","data-url":this.props.sdkUrl}),a.createElement("div",{className:c.a.buttonContainer},a.createElement("button",{className:Object(i.a)("ui_button",{fullwidth:this.props.fullwidth},c.a.facebook_ui_button),onClick:this.onClick},a.createElement(r.a,{className:c.a.icon,name:"facebook"}),a.createElement("span",null,Object(s.localize)("reg_continue_w_face")))))}}]),n}();p.defaultProps={onClose:void 0,onFbAuthFailure:void 0,fullwidth:!1},n.a=Object(o.connect)(function(e,n){return u({taServerTime:e.auth.fbApi.taServerTime,facebookConnectAppId:e.auth.fbApi.facebookConnectAppId,skipFacebookSessionCheck:e.auth.fbApi.skipFacebookSessionCheck,apiVersion:e.auth.fbApi.apiVersion,sdkUrl:e.auth.fbApi.sdkUrl,viewportCategory:e.meta.device.viewportCategory},n)})(p)},"./packages/social/common/FacebookConnectButton.less":function(e,n,t){e.exports={icon:"social-common-FacebookConnectButton__icon--3ww5Q",buttonContainer:"social-common-FacebookConnectButton__buttonContainer--22BSy",facebook_ui_button:"social-common-FacebookConnectButton__facebook_ui_button--2pGrz"}},"./packages/social/confirm-username/CheckUsernameQuery.gql":function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CheckUsernameQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"username"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"checkUsername"},arguments:[{kind:"Argument",name:{kind:"Name",value:"username"},value:{kind:"Variable",name:{kind:"Name",value:"username"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:103}};t.loc.source={body:"query CheckUsernameQuery($username: String!) {\n  checkUsername(username: $username) {\n    status\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},"./packages/social/confirm-username/ConfirmUsername.jsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),o=t("./node_modules/react-apollo/react-apollo.browser.umd.js"),r=t("./node_modules/react-redux/es/index.js"),i=t("./packages/styleguide/loading/LoadingSpinner.jsx"),s=t("./packages/common/i18n/i18n.jsx"),l=t("./packages/common/logging/logging.jsx"),c=t.n(l),u=t("./packages/input/text-input/TextInput.jsx"),d=t("@ta/social.button"),m=t.n(d),p=t("./packages/common/classnames/classnames.jsx"),f=t("./packages/common/tracking/tracking.jsx"),g=t.n(f),b=t("./node_modules/lodash/debounce.js"),k=t.n(b),v=t("./packages/social/confirm-username/ConfirmUsername.less"),_=t.n(v),h=t("./packages/social/confirm-username/UpdateInsightProfileCardAction.gql"),y=t.n(h),O=t("./packages/social/confirm-username/SubmitOnMount.jsx"),N=new Set,w=Object(r.connect)(function(e){return{userId:e.auth.loggedInUserId,taUnique:e.meta.taUnique}})(function(e){var n=e.userId,t=e.taUnique,r=e.cardId,i=e.cardAction;return N.has(r)?null:(N.add(r),a.createElement(o.Mutation,{mutation:y.a},function(e){var o={userId:n,taUnique:t,cardId:r,cardAction:i};return a.createElement(O.a,{submit:function(){e({variables:o})}})}))}),S=t("./packages/social/confirm-username/ScreenCompleteMutation.gql"),E=t.n(S),j=t("./packages/social/confirm-username/UsernameValidationMutation.gql"),C=t.n(j),F=t("./packages/social/confirm-username/ConfirmUsernameQuery.gql"),I=t.n(F),x=t("./packages/social/confirm-username/CheckUsernameQuery.gql"),T=t.n(x);t.d(n,"b",function(){return L});var A=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();function U(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var P="Social_onboarding_unknown",M=/^[a-zA-Z]+\d{11}$/,D=function(e){return e&&"string"==typeof e&&e.match(M)},L=function(e){return e.states.find(function(e){return"ONBOARDING_CONFIRM_USER"===e.id&&"COMPLETED"===e.state})},V=function(e){return e.accepted?null:a.createElement("div",{className:_.a.terms},Object(s.unescaped)(Object(s.localize)("social_legal_tou_returnmem_confirm",{0:"/pages/terms.html",1:_.a.link})))},R=function(e){var n=e.usernameMutationVars,t=e.screenCompleteMutationVars,r=e.onUsernameValid,i=e.screenCompleteCallback,s=e.children,l=e.textInputIsInvalid;return a.createElement(o.Mutation,{mutation:E.a,refetchQueries:[{query:I.a,variables:{userId:n.userId}}]},function(e){return a.createElement(o.Mutation,{mutation:C.a,onCompleted:function(n){r(n)&&(e({variables:t}),i())}},function(e){return a.createElement("form",{onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},onSubmit:function(t){t.preventDefault&&t.preventDefault(),l()||e({variables:n})}},s)})})};R.defaultProps={children:null};var q=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onChange=function(e,n){t.state.dataInput=!0,t.setState(U({},e,n)),"username"===e&&"string"==typeof n&&(t.clearErrorState("username"),t.debouncedHandleUsernameChange(n))},t.setErrorState=function(e){var n=t.state.name?t.state.name:Object(s.localize)("onboarding_social_name_screen_display_name_field_v2"),o=t.state.username?t.state.username:Object(s.localize)("social_edit_profile_username");switch(e){case"USERNAME_TOO_SHORT":t.setError(a.createElement(a.Fragment,null,Object(s.localize)("profile_update_error_username_too_short",{0:o})),"username");break;case"USERNAME_TOO_LONG":t.setError(a.createElement(a.Fragment,null,Object(s.localize)("profile_update_error_username_too_long",{0:o})),"username");break;case"USERNAME_INVALID_CHARACTERS":t.setError(Object(s.unescaped)(Object(s.localize)("profile_update_error_username_invalid_characters")),"username");break;case"USERNAME_ALREADY_EXISTS":t.setError(a.createElement(a.Fragment,null,Object(s.localize)("profile_update_error_username_already_exists",{0:o})),"username");break;case"USERNAME_CONTAINS_PROFANITY":t.setError(a.createElement(a.Fragment,null,Object(s.localize)("profile_update_error_contains_profanity")),"username");break;case"USERNAME_CONTAINS_TA_WORDS":t.setError(a.createElement(a.Fragment,null,Object(s.localize)("profile_update_error_username_contains_ta_words")),"username");break;case"DISPLAYNAME_TOO_SHORT":t.setError(a.createElement(a.Fragment,null,Object(s.localize)("mobile_profile_update_error_display_name_too_short")),"displayname");break;case"DISPLAYNAME_TOO_LONG":t.setError(a.createElement(a.Fragment,null,Object(s.localize)("profile_update_error_display_name_too_long",{0:n})),"displayname");break;case"DISPLAYNAME_CONTAINS_PROFANITY":t.setError(a.createElement(a.Fragment,null,Object(s.localize)("profile_update_error_contains_profanity")),"displayname");break;case"DISPLAYNAME_CONTAINS_TA_WORDS":t.setError(a.createElement(a.Fragment,null,Object(s.localize)("profile_update_error_username_contains_ta_words")),"displayname");break;default:c.a.error("Unknown username edit error: "+e),t.setError(a.createElement(a.Fragment,null,Object(s.localize)("social_loading_error_1")),"username")}},t.setError=function(e,n){t.setState({error:{message:e,field:n,advisory:!1}})},t.setAdvisory=function(e,n){t.setState({error:{message:e,field:n,advisory:!0}})},t.clearErrorState=function(e){t.setAdvisory(null,e)},t.hasError=function(e){return t.state.error&&t.state.error.field===e},t.isAdvisory=function(){return t.state.error&&t.state.error.advisory},t.newUser=function(){return!t.props.displayName||!t.props.username||D(t.props.username)},t.handleUsernameChange=function(e){t.props.client.query({query:T.a,variables:{username:e},fetchPolicy:"no-cache"}).then(function(e){var n=e.data.checkUsername.status;"OK"!==n?"USERNAME_IS_SAME"===n?t.clearErrorState("username"):t.setErrorState(n):t.setAdvisory(a.createElement("span",{className:_.a.advisory},Object(s.localize)("social_username_available")),"username")})},t.debouncedHandleUsernameChange=k()(t.handleUsernameChange,500),t.state={name:D(e.username)?"":e.displayName,username:D(e.username)?"":e.username,error:null,dataInput:!1},P=e.trackingModule,t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a["Component"]),A(n,[{key:"componentDidMount",value:function(){var e=D(this.props.username);g()({module:P,action:"namescreen_displayname",context:this.props.displayName&&!e?"prefilled":"blank"}),g()({module:P,action:"namescreen_username",context:this.props.username&&!e?"prefilled":"blank"})}},{key:"render",value:function(){var e=this;return a.createElement(R,{usernameMutationVars:{userId:this.props.userId,displayName:this.props.displayName!==this.state.name?this.state.name:null,username:this.props.username!==this.state.username?this.state.username:null},screenCompleteMutationVars:{userId:this.props.userId,taUnique:this.props.taUnique,cardId:"ONBOARDING_CONFIRM_USER",cardState:"COMPLETED",newlyAccepted:!this.props.acceptedTou},screenCompleteCallback:function(){e.props.onComplete(e.state.dataInput)},onUsernameValid:function(n){return"OK"===n.updateMemberProfile.status?(g()({module:P,action:"namescreen_complete_success",context:""}),!0):(e.setErrorState(n.updateMemberProfile.status),g()({module:P,action:"namescreen_submit_error",context:n.updateMemberProfile.status}),!1)},textInputIsInvalid:function(){return e.state.name?!e.state.username&&(e.setErrorState("USERNAME_TOO_SHORT"),!0):(e.setErrorState("DISPLAYNAME_TOO_SHORT"),!0)}},a.createElement(a.Fragment,null,a.createElement(w,{cardId:"ONBOARDING_CONFIRM_USER",cardAction:"SHOW"}),a.createElement("div",{className:_.a.contentWrapper},a.createElement("div",{className:_.a.title},this.newUser()?Object(s.localize)("onboarding_social_name_screen_new_header"):Object(s.localize)("onboarding_social_name_screen_returning_header")),a.createElement("div",{className:"ui_label_group"},a.createElement("span",{className:_.a.label},Object(s.localize)("onboarding_social_name_screen_display_name_field_v2")),a.createElement("span",{className:_.a.helperText},Object(s.localize)("onboarding_social_name_screen_display_name_helper_text_period_814")),a.createElement(u.a,{maxLength:40,value:this.state.name||"",className:Object(p.a)(_.a.editInput,U({},_.a.errorInputBox,this.hasError("displayname"))),onChange:function(n,t){return e.onChange("name",t)},placeholder:Object(s.localize)("onboarding_social_name_screen_display_name_ghost_text")}),Object(s.unescaped)("&nbsp;"),this.state.error&&this.hasError("displayname")&&a.createElement("span",{className:_.a.errorLabel},this.state.error.message)),a.createElement("div",{className:"ui_label_group"},a.createElement("span",{className:_.a.label},Object(s.localize)("social_edit_profile_username")),a.createElement("span",{className:_.a.helperText},Object(s.localize)("onboarding_social_name_screen_username_helper_text_period_814")),a.createElement("span",{className:_.a.username},a.createElement(u.a,{maxLength:20,value:this.state.username||"",className:Object(p.a)(_.a.usernameInput,_.a.editInput,U({},_.a.errorInputBox,this.hasError("username")&&!this.isAdvisory())),onChange:function(n,t){return e.onChange("username",t)},placeholder:Object(s.localize)("onboarding_social_name_screen_username_ghost_text")}),Object(s.unescaped)("&nbsp;"),this.state.error&&this.hasError("username")&&a.createElement("span",{className:_.a.errorLabel},this.state.error.message))),a.createElement(V,{accepted:this.props.acceptedTou}),a.createElement("div",{className:_.a.buttonContainer},a.createElement(f.Track,{click:{module:P,action:"namescreen_confirm_click",context:""},visible:{module:P,action:"namescreen_shown",context:""}},a.createElement(m.a,{type:"primary",size:"fullwidth"},Object(s.localize)("onboarding_social_name_screen_cta")))))))}}]),n}();n.a=Object(r.connect)(function(e){return{userId:e.auth.loggedInUserId,taUnique:e.meta.taUnique}})(function(e){return a.createElement(o.Query,{query:I.a,variables:{userId:e.userId},fetchPolicy:"network-only"},function(n){var t=n.loading,r=n.data,l=n.error,u=n.refetch;if(l)return c.a.error("Error in ConfirmUsername query: "+l),g()({module:P,action:"confirmusername_query_error_shown",context:e.userId}),a.createElement("div",{className:_.a.ui_error},Object(s.localize)("compliment_9bd"),a.createElement("div",{className:_.a.ui_error_button},a.createElement(m.a,{type:"primary",onClick:function(){return u()}},Object(s.localize)("link_uploader_refresh")),a.createElement(m.a,{type:"primary",onClick:e.closerForError},Object(s.localize)("btn_cancel"))));if(t)return a.createElement("div",{className:_.a.spinner},a.createElement(i.a,null));if(r){var d=r.getTermOfUseAcceptanceInfo&&r.getTermOfUseAcceptanceInfo.accepted,p=r.insightProfile&&r.insightProfile.uiCardsState;if(p&&L(p)&&d)return e.onComplete(!1),null;var f=r.memberProfiles[0],b=f?f.displayName:"",k=f?f.username:"";return a.createElement(o.ApolloConsumer,null,function(n){return a.createElement(q,{userId:e.userId,taUnique:e.taUnique,displayName:b,username:k,onComplete:e.onComplete,trackingModule:e.trackingModule,acceptedTou:d,client:n})})}return null})})},"./packages/social/confirm-username/ConfirmUsername.less":function(e,n,t){e.exports={contentWrapper:"social-confirm-username-ConfirmUsername__contentWrapper--3dBff",title:"social-confirm-username-ConfirmUsername__title--1S1KY",label:"social-confirm-username-ConfirmUsername__label--j1lup",terms:"social-confirm-username-ConfirmUsername__terms--2A-Lt",link:"social-confirm-username-ConfirmUsername__link--1xodC",spinner:"social-confirm-username-ConfirmUsername__spinner--2qYGC",username:"social-confirm-username-ConfirmUsername__username--2E0nZ",usernameInput:"social-confirm-username-ConfirmUsername__usernameInput--j7Nkq",editInput:"social-confirm-username-ConfirmUsername__editInput--2YaOq",errorInputBox:"social-confirm-username-ConfirmUsername__errorInputBox--2Jq5w",errorLabel:"social-confirm-username-ConfirmUsername__errorLabel--NHCYk",advisory:"social-confirm-username-ConfirmUsername__advisory--1OLFY",helperText:"social-confirm-username-ConfirmUsername__helperText--38Jus",buttonContainer:"social-confirm-username-ConfirmUsername__buttonContainer--Rhlcv",ui_error:"social-confirm-username-ConfirmUsername__ui_error--3erWq",ui_error_button:"social-confirm-username-ConfirmUsername__ui_error_button--3hamo"}},"./packages/social/confirm-username/ConfirmUsernameQuery.gql":function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ConfirmUsernameQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"memberProfiles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userIds"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}]}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"insightProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uiCardsState"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"states"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"getTermOfUseAcceptanceInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:273}};t.loc.source={body:"query ConfirmUsernameQuery($userId: String!) {\n  memberProfiles(userIds: [{ id: $userId }]) {\n    displayName\n    username\n  }\n  insightProfile {\n    uiCardsState {\n      states {\n        id\n        state\n      }\n    }\n  }\n  getTermOfUseAcceptanceInfo {\n    accepted\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},"./packages/social/confirm-username/ScreenCompleteMutation.gql":function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ConfirmUsernameComplete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"taUnique"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cardId"}},type:{kind:"NamedType",name:{kind:"Name",value:"CardTypeEnumInput"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cardState"}},type:{kind:"NamedType",name:{kind:"Name",value:"CardStateEnumInput"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"newlyAccepted"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateInsightProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"request"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"ObjectField",name:{kind:"Name",value:"taUnique"},value:{kind:"Variable",name:{kind:"Name",value:"taUnique"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"profile"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"uiCardsState"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"states"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"cardId"}}},{kind:"ObjectField",name:{kind:"Name",value:"state"},value:{kind:"Variable",name:{kind:"Name",value:"cardState"}}}]}]}}]}}]}}]}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"acceptTermsOfUse"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"newlyAccepted"}}}]}]}]}}],loc:{start:0,end:398}};t.loc.source={body:"mutation ConfirmUsernameComplete(\n  $userId: String!\n  $taUnique: String\n  $cardId: CardTypeEnumInput\n  $cardState: CardStateEnumInput\n  $newlyAccepted: Boolean!\n) {\n  updateInsightProfile(\n    request: {\n      id: { userId: $userId, taUnique: $taUnique }\n      profile: { uiCardsState: { states: [{ id: $cardId, state: $cardState }] } }\n    }\n  )\n  acceptTermsOfUse @include(if: $newlyAccepted)\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},"./packages/social/confirm-username/SubmitOnMount.jsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),o=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();function r(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}var i=function(e){function n(){var e,t,a;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return t=a=r(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),a.componentDidMount=function(){a.props.submit()},r(a,t)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a["Component"]),o(n,[{key:"render",value:function(){return null}}]),n}();n.a=i},"./packages/social/confirm-username/UpdateInsightProfileCardAction.gql":function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateInsightProfile"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"taUnique"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cardId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CardTypeEnumInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cardAction"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ActionTypeEnumInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateInsightProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"request"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"ObjectField",name:{kind:"Name",value:"taUnique"},value:{kind:"Variable",name:{kind:"Name",value:"taUnique"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"profile"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"uiCardActions"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"cardId"},value:{kind:"Variable",name:{kind:"Name",value:"cardId"}}},{kind:"ObjectField",name:{kind:"Name",value:"cardAction"},value:{kind:"Variable",name:{kind:"Name",value:"cardAction"}}}]}]}}]}}]}}],directives:[]}]}}],loc:{start:0,end:323}};t.loc.source={body:"mutation updateInsightProfile(\n  $userId: String\n  $taUnique: String!\n  $cardId: CardTypeEnumInput!\n  $cardAction: ActionTypeEnumInput!\n) {\n  updateInsightProfile(\n    request: {\n      id: { userId: $userId, taUnique: $taUnique }\n      profile: { uiCardActions: [{ cardId: $cardId, cardAction: $cardAction }] }\n    }\n  )\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},"./packages/social/confirm-username/UsernameValidationMutation.gql":function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UsernameValidation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"displayName"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"username"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateMemberProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"displayName"},value:{kind:"Variable",name:{kind:"Name",value:"displayName"}}},{kind:"Argument",name:{kind:"Name",value:"username"},value:{kind:"Variable",name:{kind:"Name",value:"username"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"memberProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:263}};t.loc.source={body:"mutation UsernameValidation($userId: String!, $displayName: String, $username: String) {\n  updateMemberProfile(userId: $userId, displayName: $displayName, username: $username) {\n    status\n    memberProfile {\n      id\n      displayName\n      username\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},"./packages/social/feed/feedFragments/HometownFields.fragment.gql":function(e,n){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"HometownFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MemberLocation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fallbackString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:203}};t.loc.source={body:"fragment HometownFields on MemberLocation {\n  locationId\n  fallbackString\n  location {\n    locationId\n    name\n    additionalNames {\n      long\n    }\n    parent {\n      locationId\n      name\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},"./packages/social/onboarding-controller/OnboardingController.jsx":function(e,n,t){"use strict";t.r(n);var a=t("./node_modules/react/index.js"),o=t("./packages/common/api/api.jsx"),r=t("./packages/common/features/features.jsx"),i=t("./packages/common/routing/routing.jsx"),s=t("./packages/common/tracking/tracking.jsx"),l=t.n(s),c=t("./packages/common/localstorage/localstorage.jsx"),u=t("./packages/events/window-scroll/WindowScroll.jsx"),d=t("@ta/social.educational-tooltips"),m=t("@ta/social.onboarding-state"),p=t("@ta/social.onboarding"),f=t("./node_modules/react-apollo/react-apollo.browser.umd.js"),g=t("./node_modules/react-redux/es/index.js"),b=t("./packages/common/client/ClientOnly.jsx"),k=t("./packages/common/logging/logging.jsx"),v=t.n(k),_=t("./packages/styleguide/loading/LoadingSpinner.jsx"),h=t("@ta/overlays.modal"),y=t("@ta/overlays.managers"),O=t("./packages/social/suggested-followees/ValidatedFacebookToken.jsx"),N=t("./packages/social/confirm-username/ConfirmUsername.jsx"),w=t("@ta/tracking.interactions"),S=t("./packages/common/classnames/classnames.jsx"),E=t("./packages/social/onboarding-controller/OnboardingProfileQuery.gql"),j=t.n(E),C=t("./packages/social/onboarding-controller/OnboardingModal.less"),F=t.n(C),I=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();var x="valuepropscreen",T="followscreen_brand",A="Allsetscreen",U=[x,"namescreen",T,"facebookconnectscreen","followscreen_facebook",A],P=["namescreen",T,"facebookconnectscreen","followscreen_facebook",A],M=[T,"facebookconnectscreen","followscreen_facebook",A],D={UNKNOWN:"Social_onboarding_unknown",DEFAULT:"Social_onboarding_default",BRAND_EDUCATOR:"Social_onboarding_brandedu",MASTHEAD:"Social_onboarding_masthead",FOLLOW_ACTION:"Social_onboarding_follow_action",LIKE_ACTION:"Social_onboarding_like_action",REPOST_ACTION:"Social_onboarding_repost_action",SAVE_ACTION:"Social_onboarding_save_action",GOOGLE_ONETAP:"Social_onboarding_googleonetap"},L={UNKNOWN:U,DEFAULT:U,BRAND_EDUCATOR:P,MASTHEAD:P,FOLLOW_ACTION:M,LIKE_ACTION:M,REPOST_ACTION:M,SAVE_ACTION:M,GOOGLE_ONETAP:P},V=!0,R=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onCloseAttempt=function(){t.screenAllowsClose()&&(l()({module:D[t.props.firedFrom],action:t.state.flow[t.state.screen]+"_close",context:t.userIsLoggedIn()?"logged_in":"logged_out"}),t.disableModal(),t.props.onClose&&t.props.onClose())},t.onRegOverlayComplete=function(e){if(t.userIsLoggedIn()){V=!0,t.incrementFlow();var n=e&&(e.hasCreatedMember||!e.hasAcceptedTermsOfUse);t.state.showLoading!==n&&t.setState({showLoading:n})}},t.onRegOverlayClose=function(){t.state.waiting&&t.setState({waiting:!1})},t.openRegOverlay=function(){t.state.waiting||t.setState({waiting:!0}),window.require(["ta/registration/RegOverlay"],function(e){var n="MOBILE"===t.props.viewportCategory;e.showRegOverlay(null,null,n,{flow:"CORE_COMBINED",pid:40463,userRequestedForce:"true",extraQueryParams:{social:"true"},onSuccess:function(e){t.onRegOverlayComplete(e)},onClose:t.onRegOverlayClose})})},t.userIsLoggedIn=function(){return null!==t.props.loggedInUserId},t.screenAllowsClose=function(){switch(L[t.props.firedFrom]){case U:return t.state.flow[t.state.screen]===x;case M:return t.state.flow[t.state.screen]===T||t.state.flow[t.state.screen]===A&&"Home"!==t.props.servlet;case P:return t.state.flow[t.state.screen]===A&&"Home"!==t.props.servlet;default:return!1}},t.incrementFlow=function(){t.setState({screen:t.state.screen+1},function(){t.setUpCurrentFlow()})},t.incrementFlowAndUpdateNeedsRefresh=function(e){e&&t.setState({userMadeChanges:!0}),t.incrementFlow()},t.endFlow=function(e){t.disableModal(),e&&e(),t.props.onFlowEnd&&t.props.onFlowEnd(t.state.userMadeChanges)},t.disableModal=function(){t.state.disabled||t.setState({disabled:!0})},t.seenOnboarding=function(e){if(V=!1,null===e)return!1;switch(t.props.firedFrom){case"DEFAULT":case"UNKNOWN":return t.userIsLoggedIn()?e.states.find(function(e){return"ONBOARDING_CONFIRM_USER"===e.id&&"COMPLETED"===e.state}):e.states.find(function(e){return"ONBOARDING_SPLASH"===e.id});case"MASTHEAD":case"BRAND_EDUCATOR":case"GOOGLE_ONETAP":return e.states.find(function(e){return"ONBOARDING_CONFIRM_USER"===e.id&&"COMPLETED"===e.state});case"FOLLOW_ACTION":case"LIKE_ACTION":case"REPOST_ACTION":case"SAVE_ACTION":return e.states.find(function(e){return"ONBOARDING_FOLLOW"===e.id});default:return v.a.error("Unexpected flow state in onboarding, this should never happen."),!0}},t.state={disabled:e.readOnly,waiting:!1,showLoading:e.immediateLoad,screen:0,userMadeChanges:!1,flow:L[e.firedFrom]},V=!0,t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a["Component"]),I(n,[{key:"componentDidMount",value:function(){Object(r.featureIsEnabled)("suggested_facebook_connections")||this.setState({flow:this.state.flow.filter(function(e){return"followscreen_facebook"!==e})}),this.setUpCurrentFlow()}},{key:"shouldComponentUpdate",value:function(e){return this.props.firedFrom!==e.firedFrom&&(this.state={disabled:!1,waiting:!1,showLoading:e.immediateLoad,screen:0,userMadeChanges:!1,flow:L[e.firedFrom]},V=!0),!0}},{key:"setUpCurrentFlow",value:function(){this.state.screen>=this.state.flow.length&&this.endFlow()}},{key:"render",value:function(){var e=this;if(this.state.disabled||this.state.waiting||this.props.readOnly)return null;var n=function(n){var t,o,r,i=n.spinner,s=n.children,l={name:"onboarding-interstitial",isFullBleed:!0,onClose:e.onCloseAttempt,disableFullscreenOnMobile:e.state.flow[e.state.screen]===A,closeXColorVariant:e.state.flow[e.state.screen]===x||e.state.flow[e.state.screen]===A?"WHITE":void 0,closeX:e.screenAllowsClose()};return a.createElement(a.Fragment,null,a.createElement(y.Opener,{name:"onboarding-interstitial"},function(e){return e(),null}),a.createElement(h.Modal,l,a.createElement("div",{className:Object(S.a)(F.a.onboardingContainer,F.a[e.state.flow[e.state.screen]],(t={},o=F.a.spinner,r=i,o in t?Object.defineProperty(t,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[o]=r,t))},s)))};return a.createElement(f.Query,{query:j.a,variables:{userId:this.props.loggedInUserId,loggedIn:this.userIsLoggedIn()},errorPolicy:"all"},function(t){var o=t.loading,r=t.data;if(o)return e.state.showLoading?a.createElement(n,{spinner:!0},a.createElement(_.a,null)):null;if(e.userIsLoggedIn()&&(!r||!r.memberProfiles||!r.memberProfiles[0]))return null;if(r&&r.insightProfile){var i=r.insightProfile.uiCardsState;if(V&&e.seenOnboarding(i))return l()({module:D[e.props.firedFrom],action:e.state.screen+"_notshown",context:e.userIsLoggedIn()?"logged_in":"logged_out"}),e.disableModal(),e.props.onDisable&&e.props.onDisable(),null}return"Home"===e.props.servlet&&e.state.flow[e.state.screen]===x&&"MOBILE"===e.props.viewportCategory?a.createElement(p.SplashScreen,{onComplete:e.userIsLoggedIn()?e.incrementFlow:e.openRegOverlay,trackingModule:D[e.props.firedFrom]}):a.createElement(b.a,null,a.createElement(w.TrackingNamespaceContext.Provider,{value:{namespace:"onboarding"}},a.createElement(w.OnboardingTrackingContext.Provider,{value:{userId:e.props.loggedInUserId,uid:e.props.uid}},a.createElement(n,null,function(n){var t=n&&n.memberProfiles&&n.memberProfiles[0],o=t&&t.hometown&&t.hometown.location&&t.hometown.location.additionalNames&&t.hometown.location.additionalNames.long,r=n&&n.myExternallyConnectedAccountTypes&&n.myExternallyConnectedAccountTypes.includes("FACEBOOK");switch(e.state.flow[e.state.screen]){case x:return a.createElement(p.SplashScreen,{onComplete:e.userIsLoggedIn()?e.incrementFlow:e.openRegOverlay,trackingModule:D[e.props.firedFrom]});case"namescreen":return a.createElement(y.Closer,null,function(n){return a.createElement(N.a,{onComplete:e.incrementFlowAndUpdateNeedsRefresh,trackingModule:D[e.props.firedFrom],closerForError:function(){e.endFlow(n)}})});case"hometownscreen":return a.createElement(p.ChooseHometown,{onComplete:e.incrementFlowAndUpdateNeedsRefresh,currentHometown:o,trackingModule:D[e.props.firedFrom]});case T:return a.createElement(w.FollowTabTypeContext.Provider,{value:{tabType:"SUGGESTED_FOR_YOU"}},a.createElement(p.SuggestedFollows,{onComplete:e.incrementFlowAndUpdateNeedsRefresh,trackingModule:D[e.props.firedFrom],isInitialScreen:L[e.props.firedFrom]===M}));case"facebookconnectscreen":return a.createElement(w.FollowTabTypeContext.Provider,{value:{tabType:"FACEBOOK_FRIENDS"}},a.createElement(p.FacebookConnect,{onComplete:e.incrementFlow,onSkip:function(){e.setState({screen:e.state.screen+2},function(){e.setUpCurrentFlow()})},facebookConnected:r,trackingModule:D[e.props.firedFrom]}));case"followscreen_facebook":return a.createElement(O.a,{callback:e.incrementFlow,trackingModule:D[e.props.firedFrom],isOnboarding:!0},a.createElement(p.SuggestedFacebookFollows,{onComplete:e.incrementFlowAndUpdateNeedsRefresh,trackingModule:D[e.props.firedFrom]}));case A:return a.createElement(y.Closer,null,function(n){return a.createElement(p.AllSet,{photo:t.avatar,displayName:t.displayName,onComplete:function(){e.endFlow(n)},trackingModule:D[e.props.firedFrom],userHasInteracted:e.state.userMadeChanges})});default:return v.a.error("OnboardingModal: No case provided for current screen type: "+e.state.flow[e.state.screen]+" screen: "+e.state.screen+"."),null}}(r)))))})}}]),n}();R.defaultProps={onClose:void 0,onFlowEnd:void 0,onDisable:void 0};var q=Object(g.connect)(function(e){return{loggedInUserId:e.auth.loggedInUserId,viewportCategory:e.meta.device.viewportCategory,uid:e.tracking.uid,readOnly:e.meta.readonlyMode,servlet:e.meta.initialServletName}})(R),B=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();var z=["FOLLOW_ACTION","LIKE_ACTION","REPOST_ACTION","SAVE_ACTION"],H=["Home","Profile"],$=null,G=750,Q=["MASTHEAD","DEFAULT","BRAND_EDUCATOR","UNKNOWN"],K=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onFlowEnd=function(e){t.allowsPageRefresh()&&e?(c.a.set(p.OnboardingCompleteReload,!0),window.location.reload()):(t.setState({disabled:!0}),t.props.onboardingDone())},t.onClose=function(){t.setState({disabled:!0}),t.props.onboardingDone()},t.onDisable=function(){return t.setState({disabled:!0})},t.onScroll=function(){$+G<window.pageYOffset&&t.setState({waitForScroll:!1})},t.entryPointRequiresScrollToFire=function(){return z.includes(t.props.entryPoint)},t.allowsPageRefresh=function(){return t.isHome()&&Q.includes(t.state.firedFrom)},t.allowsLaunchOnPageLoad=function(){return t.isHome()},t.isHome=function(){return"Home"===t.props.servlet},t.isUnscopedHotels=function(e){return!("Hotels"!==t.props.servlet||"latitude"in e||"longitude"in e||"geo"in e)},t.isDisabledThroughFeature=function(){return Object(r.featureIsEnabled)("disable_social_onboarding")||Object(r.featureIsEnabled)("disable_social_onboarding_and_brand_educator")||Object(r.featureIsEnabled)("onboarding_use_recommended_follow_modal")&&"DESKTOP"===t.props.viewportCategory||z.includes(t.props.entryPoint)&&(!Object(r.featureIsEnabled)("onboarding_new_entrypoints_test")||!H.includes(t.props.servlet))||Object(r.featureIsEnabled)("onboarding_disable_on_non_component_header")&&"MASTHEAD"===t.props.entryPoint&&"Home"!==t.props.servlet||!Object(r.featureIsEnabled)("onboarding_after_google_onetap")&&"GOOGLE_ONETAP"===t.props.entryPoint},t.userIsLoggedIn=function(){return null!==t.props.loggedInUserId},t.state={disabled:t.isDisabledThroughFeature()||null!==e.cachedCookieFound&&e.cachedCookieFound,waitForSignal:!0,waitForScroll:!1,firedFrom:"DEFAULT"},t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a["Component"]),B(n,[{key:"componentDidMount",value:function(){if(this.allowsLaunchOnPageLoad()){if(l()({module:D[this.state.firedFrom],action:"onboarding_onmount",context:this.userIsLoggedIn()?"logged_in":"logged_out"}),this.state.disabled)return void l()({module:D[this.state.firedFrom],action:"valuepropscreen_notshown",context:this.userIsLoggedIn()?"logged_in":"logged_out"});this.setState({waitForSignal:!1})}}},{key:"shouldComponentUpdate",value:function(e){return null===this.props.cachedCookieFound&&e.cachedCookieFound&&this.setState({disabled:!0}),!0}},{key:"componentDidUpdate",value:function(e){e.shouldFire||!this.props.shouldFire||this.isDisabledThroughFeature()||(this.setState({disabled:!1,waitForSignal:!1,waitForScroll:this.entryPointRequiresScrollToFire(),firedFrom:this.props.entryPoint}),this.entryPointRequiresScrollToFire()&&($=window.pageYOffset))}},{key:"render",value:function(){var e=this;return this.state.disabled||this.state.waitForSignal||this.props.readOnly||null===this.props.cachedCookieFound?null:this.state.waitForScroll?a.createElement(u.a,{callback:this.onScroll,throttle:600}):"Hotels"===this.props.servlet?a.createElement(i.RouteConsumer,null,function(n){var t=n.route;return!e.isUnscopedHotels(t)&&a.createElement(q,{firedFrom:e.state.firedFrom,onFlowEnd:e.onFlowEnd,onClose:e.onClose,onDisable:e.onDisable,immediateLoad:e.props.immediateLoad})}):a.createElement(q,{firedFrom:this.state.firedFrom,onFlowEnd:this.onFlowEnd,onClose:this.onClose,onDisable:this.onDisable,immediateLoad:this.props.immediateLoad})}}]),n}();n.default=Object(o.bind)({data:function(e,n){var t=n("/data/1.0/onboarding/shown");return function(){var n=t.get().data;return{loggedInUserId:e.auth.loggedInUserId,viewportCategory:e.meta.device.viewportCategory,shouldFire:Object(m.getState)(e).shouldFire,immediateLoad:Object(m.getState)(e).immediateLoad,entryPoint:Object(m.getState)(e).entryPoint,cachedCookieFound:n?n.seen:null,readOnly:e.meta.readonlyMode,servlet:e.meta.initialServletName}}},actions:{onboardingDone:d.ACTIONS.onboardingDone}})(K)},"./packages/social/onboarding-controller/OnboardingModal.less":function(e,n,t){e.exports={onboardingContainer:"social-onboarding-controller-OnboardingModal__onboardingContainer--2qbeI",namescreen:"social-onboarding-controller-OnboardingModal__namescreen--2TuCQ",hometownscreen:"social-onboarding-controller-OnboardingModal__hometownscreen--2MKHH",facebookconnectscreen:"social-onboarding-controller-OnboardingModal__facebookconnectscreen--1A-fM",Allsetscreen:"social-onboarding-controller-OnboardingModal__Allsetscreen--21ouJ",followscreen_brand:"social-onboarding-controller-OnboardingModal__followscreen_brand--2OrdY",followscreen_facebook:"social-onboarding-controller-OnboardingModal__followscreen_facebook--3gX8S",spinner:"social-onboarding-controller-OnboardingModal__spinner--3e9ow",valuepropscreen:"social-onboarding-controller-OnboardingModal__valuepropscreen--PU6IV"}},"./packages/social/onboarding-controller/OnboardingProfileQuery.gql":function(e,n,t){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"OnboardingProfile"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"loggedIn"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"memberProfiles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userIds"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}]}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hometown"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"HometownFields"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"myExternallyConnectedAccountTypes"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"loggedIn"}}}]}]},{kind:"Field",name:{kind:"Name",value:"insightProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uiCardsState"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"states"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:533}};a.loc.source={body:'#import "../../../packages/social/feed/feedFragments/HometownFields.fragment.gql"\n\nquery OnboardingProfile($userId: String, $loggedIn: Boolean!) {\n  memberProfiles(userIds: [{ id: $userId }]) {\n    id\n    avatar {\n      id\n      photoSizes {\n        url\n        width\n        height\n      }\n    }\n    displayName\n    username\n    hometown {\n      ...HometownFields\n    }\n  }\n  myExternallyConnectedAccountTypes @include(if: $loggedIn)\n  insightProfile {\n    uiCardsState {\n      states {\n        id\n        state\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var o={};a.definitions=a.definitions.concat(t("./packages/social/feed/feedFragments/HometownFields.fragment.gql").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!o[n]&&(o[n]=!0,!0)})),e.exports=a},"./packages/social/suggested-followees/ValidFacebookTokenQuery.gql":function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FacebookTokenQuery"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recommendedExternalConnectionsToFollow"},arguments:[{kind:"Argument",name:{kind:"Name",value:"connectionType"},value:{kind:"EnumValue",value:"FACEBOOK"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"additionalInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasFacebookToken"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"myExternallyConnectedAccountTypes"},arguments:[],directives:[]}]}}],loc:{start:0,end:188}};t.loc.source={body:"query FacebookTokenQuery {\n  recommendedExternalConnectionsToFollow(connectionType: FACEBOOK) {\n    additionalInfo {\n      hasFacebookToken\n    }\n  }\n  myExternallyConnectedAccountTypes\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},"./packages/social/suggested-followees/ValidatedFacebookToken.jsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),o=t("./node_modules/react-apollo/react-apollo.browser.umd.js"),r=t("./node_modules/react-redux/es/index.js"),i=t("./packages/common/classnames/classnames.jsx"),s=t("./packages/common/features/features.jsx"),l=t("./packages/common/i18n/i18n.jsx"),c=t("./packages/styleguide/button/Button.jsx"),u=t("./packages/styleguide/loading/LoadingSpinner.jsx"),d=t("./packages/common/tracking/tracking.jsx"),m=t.n(d),p=t("./packages/social/common/FacebookConnectButton.jsx"),f=t("./packages/social/suggested-followees/ValidFacebookTokenQuery.gql"),g=t.n(f),b=t("./packages/social/suggested-followees/ValidatedFacebookToken.less"),k=t.n(b),v=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();function _(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}var y=function(e){return e.isFacebookConnected?a.createElement(a.Fragment,null,a.createElement("div",{className:k.a.header},Object(l.localize)("facebook_reconnect_header"))):a.createElement(a.Fragment,null,a.createElement("div",{className:Object(i.a)(k.a.header,k.a.twoLines)},Object(l.localize)("have_friends_header")),a.createElement("div",{className:k.a.text},Object(l.localize)("have_friends_body")))},O=function(e){function n(){var e,t,a;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return t=a=h(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(r))),a.refetched=!1,a.timesRefetched=0,a.trackedSet=new Set,a.track=function(e){a.trackedSet.has(e)||(a.trackedSet.add(e),m()({module:a.props.trackingModule,action:e,context:""}))},h(a,t)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a["Component"]),v(n,[{key:"render",value:function(){var e=this,n=function(){return e.props.isOnboarding?a.createElement(d.Track,{className:k.a.buttonContainer,click:{module:e.props.trackingModule,action:"Facebooktokenmissingtryagainlater_continue_click",context:""},visible:{module:e.props.trackingModule,action:"Facebooktokenmissingtryagainlater_shown",context:""}},a.createElement(c.a,{type:"primary",onClick:e.props.callback,size:e.props.isMobile?"fullwidth":"default"},Object(l.localize)("button_continue"))):null},t=function(){return a.createElement("div",{className:Object(i.a)(k.a.mainContainer,_({},k.a.onboarding,e.props.isOnboarding))},a.createElement("div",{className:Object(i.a)(k.a.header,k.a.twoLines)},Object(l.localize)("social_loading_error_1")),a.createElement("div",{className:Object(i.a)(k.a.text,k.a.error)},Object(l.localize)("facebook_reconnect_error_v2")),a.createElement(n,null))},r=function(){return e.props.isOnboarding?a.createElement(d.Track,{click:{module:e.props.trackingModule,action:"Facebooktokenmissingconnect_skip_click",context:""},visible:{module:e.props.trackingModule,action:"Facebooktokenmissingconnect_shown",context:""}},a.createElement("div",{className:k.a.hyperlink,onClick:e.props.callback},Object(l.localize)("onboarding_social_skip_link"))):null},m=function(n){var t=n.isFacebookConnected,o=n.refetch;return a.createElement("div",{className:Object(i.a)(k.a.mainContainer,_({},k.a.onboarding,e.props.isOnboarding))},a.createElement(y,{isFacebookConnected:t}),a.createElement(p.a,{onClose:function(){e.track("Facebooktokenmissingconnect_continuewithfacebook_click"),e.refetched=!0,e.timesRefetched=0,o().then(function(){return e.forceUpdate()})},fullwidth:!1}),a.createElement(r,null))},f=function(){return a.createElement("div",{className:Object(i.a)(k.a.mainContainer,k.a.loading)},a.createElement(u.a,null))};return Object(s.featureIsEnabled)("disable_fb_token_validation")?this.props.children:a.createElement(o.Query,{query:g.a,fetchPolicy:"network-only"},function(n){var o=n.loading,r=n.data,i=n.refetch;if(o)return a.createElement(f,null);if(!r)return e.track("Facebooktokenmissingconnect_fail"),a.createElement(t,null);var s=r&&r.myExternallyConnectedAccountTypes&&r.myExternallyConnectedAccountTypes.includes("FACEBOOK");if(!s&&e.props.isOnboarding&&e.props.callback)return e.props.callback(),null;var l=r.recommendedExternalConnectionsToFollow&&r.recommendedExternalConnectionsToFollow.additionalInfo&&r.recommendedExternalConnectionsToFollow.additionalInfo.hasFacebookToken;if(s){if(!l&&e.timesRefetched<4)return e.timesRefetched++,setTimeout(function(){i().then(function(){return e.forceUpdate()})},1e3),a.createElement(f,null);if(l)return e.refetched&&e.track("Facebooktokenmissingconnect_complete_success"),e.props.children;if(e.refetched)return e.track("Facebooktokenmissingconnect_fail"),a.createElement(t,null)}return a.createElement(m,{isFacebookConnected:s,refetch:i})})}}]),n}();O.defaultProps={callback:void 0,isOnboarding:!1},n.a=Object(r.connect)(function(e){return{isMobile:"MOBILE"===e.meta.device.viewportCategory}})(O)},"./packages/social/suggested-followees/ValidatedFacebookToken.less":function(e,n,t){e.exports={mainContainer:"social-suggested-followees-ValidatedFacebookToken__mainContainer--LIWjW",loading:"social-suggested-followees-ValidatedFacebookToken__loading--1NsL1",onboarding:"social-suggested-followees-ValidatedFacebookToken__onboarding--pCZO5",header:"social-suggested-followees-ValidatedFacebookToken__header--2kBQB",twoLines:"social-suggested-followees-ValidatedFacebookToken__twoLines--3tqeQ",buttonContainer:"social-suggested-followees-ValidatedFacebookToken__buttonContainer--gq0CL",text:"social-suggested-followees-ValidatedFacebookToken__text--1V7Df",error:"social-suggested-followees-ValidatedFacebookToken__error--3h11S",hyperlink:"social-suggested-followees-ValidatedFacebookToken__hyperlink--2m8fW"}},"./packages/styleguide/button/Button.jsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),o=t("./packages/common/classnames/classnames.jsx"),r=function(e){var n=e.children,t=e.size,r=e.type,i=e.chevron,s=e.loading,l=e.disabled,c=e.onClick;return a.createElement("button",{className:Object(o.a)("ui_button","none"!==r?r:"","default"!==t?t:"",{chevron:i,disabled:l,loading:s}),disabled:l,onClick:c},n)};r.defaultProps={children:null,onClick:function(){},type:"original",size:"default",chevron:!1,loading:!1,disabled:!1},n.a=r},"./packages/styleguide/icon/Icon.jsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),o=function(e){var n=e.name,t=e.className;return a.createElement("span",{className:"ui_icon "+n+" "+t})};o.defaultProps={className:""},n.a=o},"./packages/styleguide/loading/LoadingSpinner.jsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),o=function(e){var n=e.size,t=e.inverted;return a.createElement("div",{className:"ui_spinner "+(n||"")+" "+(t?"inverted":"")})};o.defaultProps={size:void 0,inverted:!1},n.a=o},"@ta/overlays.managers":function(n,t){n.exports=e},"@ta/overlays.modal":function(e,t){e.exports=n},"@ta/social.button":function(e,n){e.exports=t},"@ta/social.educational-tooltips":function(e,n){e.exports=a},"@ta/social.onboarding":function(e,n){e.exports=o},"@ta/social.onboarding-state":function(e,n){e.exports=r},"@ta/tracking.interactions":function(e,n){e.exports=i},"dll-reference @ta/common.global":function(e,n){e.exports=s}})});