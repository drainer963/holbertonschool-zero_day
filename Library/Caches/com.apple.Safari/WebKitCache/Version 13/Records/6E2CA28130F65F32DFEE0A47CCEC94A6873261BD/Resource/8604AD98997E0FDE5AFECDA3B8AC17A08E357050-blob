define("@ta/public.maps",["@ta/common.global"],function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/components/dist/",n(n.s="./packages/public/maps/maps.jsx")}({"./node_modules/react-dom/index.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react-dom/index.js")},"./node_modules/react-redux/es/index.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react-redux/es/index.js")},"./node_modules/react/index.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react/index.js")},"./packages/common/cdn/cdn.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n("./node_modules/react-redux/es/index.js"),r=n("./node_modules/react/index.js"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var a=function(e){return Object(o.connect)(function(e,t){return i({},t,{imgCdnUrl:e.meta.imageCdnUrl})})(e)},s=a(function(e){var t=e.imgCdnUrl,n=e.src,o=(e.dispatch,function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["imgCdnUrl","src","dispatch"])),a=/^\//.test(n)?"":"/";return r.createElement("img",i({},o,{src:""+t+a+n}))});t.b=a},"./packages/common/imports/imports.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/imports/imports.jsx")},"./packages/common/logging/logging.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/logging/logging.jsx")},"./packages/common/throttle/throttle.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/throttle/throttle.jsx")},"./packages/common/tracking/tracking.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/tracking/tracking.jsx")},"./packages/events/window-scroll/WindowScroll.jsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n("./packages/common/throttle/throttle.jsx"),i=n.n(r),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleScroll=o.props.throttle?i()(function(){o.props.callback()},o.props.throttle,o.props.useDebounce):o.props.callback,s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),a(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.disableListeners()}},{key:"disableListeners",value:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleScroll)}},{key:"render",value:function(){return null}}]),t}();l.defaultProps={throttle:200,useDebounce:!1},t.a=l},"./packages/maps/provider-names/mapProviders.jsx":function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a});var o="ta-maps-google",r="ta-maps-citymaps",i="ta-maps-bing",a="ta-maps-autonavi"},"./packages/public/maps/Popup.less":function(e,t,n){e.exports={markerCalloutContainer:"public-maps-Popup__markerCalloutContainer--1Ww3Z",noInteraction:"public-maps-Popup__noInteraction--AgXu8",topleft:"public-maps-Popup__topleft--p6h-f",top:"public-maps-Popup__top--3gkGh",topright:"public-maps-Popup__topright--2VCJJ",left:"public-maps-Popup__left--20yzn",right:"public-maps-Popup__right--3B9aM",bottomleft:"public-maps-Popup__bottomleft--3ecYL",bottom:"public-maps-Popup__bottom--2nmuQ",bottomright:"public-maps-Popup__bottomright--1KI1G"}},"./packages/public/maps/maps.jsx":function(e,t,n){"use strict";n.r(t);var o=n("./packages/maps/provider-names/mapProviders.jsx"),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var i=Math.PI/180,a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lat=t,this.lng=n}return r(e,[{key:"equals",value:function(e){return this.lat===e.lat&&this.lng===e.lng}},{key:"distanceTo",value:function(e){var t=this.lat*i,n=e.lat*i,o=Math.sin((e.lat-this.lat)*i/2),r=Math.sin((e.lng-this.lng)*i/2),a=o*o+Math.cos(t)*Math.cos(n)*r*r;return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}}]),e}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var l=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.containsPoint=function(e){return o.southwest.lat<=e.lat&&o.southwest.lng<=e.lng&&o.northeast.lat>=e.lat&&o.northeast.lng>=e.lng},this.containsBounds=function(e){return o.southwest.lat<=e.southwest.lat&&o.southwest.lng<=e.southwest.lng&&o.northeast.lat>=e.northeast.lat&&o.northeast.lng>=e.northeast.lng},this.intersectsBounds=function(e){return o.southwest.lat<=e.northeast.lat&&o.southwest.lng<=e.northeast.lng&&o.northeast.lat>=e.southwest.lat&&o.northeast.lng>=e.southwest.lng},this.southwest=t,this.northeast=n}return s(e,[{key:"widthInMeters",value:function(){return this.northeast.distanceTo(new a(this.northeast.lat,this.southwest.lng))}},{key:"heightInMeters",value:function(){return this.northeast.distanceTo(new a(this.southwest.lat,this.northeast.lng))}},{key:"getCenter",value:function(){return new a((this.southwest.lat+this.northeast.lat)/2,(this.southwest.lng+this.northeast.lng)/2)}}],[{key:"fromArray",value:function(t){if(0===t.length)throw new Error("Creating a LatLngBounds from 0 items. You probably don't want this.");for(var n=t[0].lat,o=t[0].lat,r=t[0].lng,i=t[0].lng,s=1;s<t.length;++s){var l=t[s];n=Math.min(l.lat,n),r=Math.min(l.lng,r),o=Math.max(l.lat,o),i=Math.max(l.lng,i)}return new e(new a(n,r),new a(o,i))}}]),e}(),u=n("./node_modules/react/index.js"),c=n("./packages/events/window-scroll/WindowScroll.jsx"),p=n("./packages/common/tracking/tracking.jsx"),f=n.n(p),h=u.createContext({map:null,mapProvider:""}),v=h.Provider,m=h.Consumer,d=n("./node_modules/react-redux/es/index.js"),y=n("./packages/common/imports/imports.jsx"),g=function(e){if(!e)return null;var t=window;return t.ta||(t.ta={}),e.split(".").forEach(function(e){t[e]||(t[e]={}),t=t[e]}),e=t},b=function(e,t,n){var o=g(t);return!!o&&(o[n]=e,!0)},k=function(e,t){var n=g(e);return n?n[t]:null},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.libraryConfig={},this.libraryConfig={},this.interfaceClass=t}return w(e,[{key:"loadLibrary",value:function(e){return!!this.isLibraryLoaded()&&(e.call(null),!0)}},{key:"isLibraryLoaded",value:function(){return!1}},{key:"getLibraryConfig",value:function(){return this.libraryConfig}},{key:"getInterfaceClass",value:function(){return this.interfaceClass}},{key:"configureLibrary",value:function(e){Object.assign(this.libraryConfig,e)}}]),e}(),O=n("./packages/common/logging/logging.jsx"),M=n.n(O),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={}}return _(e,[{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push({callback:t,single:!1}),this}},{key:"once",value:function(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push({callback:t,single:!0}),this}},{key:"off",value:function(e,t){return this.events[e]&&(this.events[e]=t?this.events[e].filter(function(e){return t&&e.callback!==t}):[]),this}},{key:"removeAllListeners",value:function(e){var t=this;return e&&this.events[e]?this.events[e]=[]:e||Object.keys(this.events).forEach(function(e){t.events[e]=[]}),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return this.events[e]&&(this.events[e]=this.events[e].filter(function(n){if(n.callback)try{n.callback.apply(t,o)}catch(t){if("undefined"!=typeof console){var r="Error in event handler for "+e;M.a.debug(r,t)}}return!n.single})),this}}]),e}(),j=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var E=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=new P,this.padding={left:32,right:32,top:32,bottom:32},this.padding=Object.assign(this.padding,n.padding)}return j(e,[{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.once(e,t)}},{key:"off",value:function(e,t){this.events.off(e,t)}},{key:"setCenter",value:function(e){throw"Unimplemented"}},{key:"setZoom",value:function(e){throw"Unimplemented"}},{key:"setBounds",value:function(e,t){throw"Unimplemented"}},{key:"panIntoView",value:function(e,t){return this.setCenter(e),!0}},{key:"getCenter",value:function(){throw"Unimplemented"}},{key:"getZoom",value:function(){throw"Unimplemented"}},{key:"getBounds",value:function(){throw"Unimplemented"}},{key:"resize",value:function(){throw"Unimplemented"}},{key:"createMarkerContainer",value:function(e){throw"Unimplemented"}},{key:"removeMarkerContainer",value:function(e){throw"Unimplemented"}},{key:"addCircleOverlay",value:function(e){throw"Unimplemented"}},{key:"removeCircleOverlay",value:function(e){throw"Unimplemented"}}]),e}(),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var x=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.zIndexOffset=0,this.onMarkerReady=null,this.position=t,this.pinContainer=document.createElement("div"),this.pinContainer.style.position="absolute",this.pinContainer.style.width="0px",this.pinContainer.style.height="0px",this.pinContainer.style.cursor="pointer"}return L(e,[{key:"setPosition",value:function(e){this.position=e}},{key:"getPosition",value:function(){return this.position}},{key:"getContainer",value:function(){return this.pinContainer.parentElement?this.pinContainer:null}},{key:"setMarkerReadyCallback",value:function(e){this.onMarkerReady=e}},{key:"setZIndexOffset",value:function(e){this.zIndexOffset=e}},{key:"showAnchor",value:function(){this.pinContainer.style.width="4px",this.pinContainer.style.height="4px",this.pinContainer.style.background="#000"}}]),e}(),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var S=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.overlayView=new google.maps.OverlayView,n.overlayView.onAdd=n.onAdd.bind(n),n.overlayView.draw=n.draw.bind(n),n.overlayView.onRemove=n.onRemove.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,x),T(t,[{key:"onAdd",value:function(){this.overlayView.getPanes().overlayMouseTarget.appendChild(this.pinContainer),google.maps.event.addDomListener(this.pinContainer,"click",function(e){e.isMarkerClick=!0}),this.onMarkerReady&&this.onMarkerReady()}},{key:"draw",value:function(){var e=this.overlayView.getProjection();if(e){var t=e.fromLatLngToDivPixel(new google.maps.LatLng(this.position.lat,this.position.lng));this.pinContainer.style.left=t.x+"px",this.pinContainer.style.top=t.y+"px";var n=this.zIndexOffset+Math.round(t.y);this.pinContainer.style.zIndex=n.toString()}}},{key:"onRemove",value:function(){this.pinContainer&&this.pinContainer.parentNode&&(this.pinContainer.parentNode.removeChild(this.pinContainer),google.maps.event.trigger(this,"onremove"))}},{key:"setMap",value:function(e){this.overlayView.setMap(e)}},{key:"setZIndexOffset",value:function(e){(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setZIndexOffset",this).call(this,e),this.draw()}},{key:"setPosition",value:function(e){this.position=e,this.draw()}}]),t}(),z=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var Z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=t.position,this.radius=t.radius,this.opacity=t.opacity,this.fillColor=t.fillColor,this.strokeColor=t.strokeColor,this.strokeWidth=t.strokeWidth}return z(e,[{key:"setPosition",value:function(e){this.position=e}},{key:"setRadius",value:function(e){this.radius=e}},{key:"setOpacity",value:function(e){this.opacity=e}},{key:"setFillColor",value:function(e){this.fillColor=e}},{key:"setStrokeColor",value:function(e){this.strokeColor=e}},{key:"setStrokeWidth",value:function(e){this.strokeWidth=e}}]),e}(),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var R=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.googleCircle=new google.maps.Circle({strokeColor:o.strokeColor,strokeWeight:o.strokeWidth,strokeOpacity:o.opacity,fillColor:o.fillColor,fillOpacity:o.opacity,radius:o.radius,map:n,center:{lat:o.position.lat,lng:o.position.lng}}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),I(t,[{key:"removeFromMap",value:function(){this.googleCircle.setMap(null)}},{key:"setPosition",value:function(e){this.position=e,this.googleCircle.setOptions({center:{lat:this.position.lat,lng:this.position.lng}})}},{key:"setRadius",value:function(e){this.radius=e,this.googleCircle.setOptions({radius:this.radius})}},{key:"setOpacity",value:function(e){this.opacity=e,this.googleCircle.setOptions({fillOpacity:this.opacity,strokeOpacity:this.opacity})}},{key:"setFillColor",value:function(e){this.fillColor=e,this.googleCircle.setOptions({fillColor:this.fillColor})}},{key:"setStrokeColor",value:function(e){this.strokeColor=e,this.googleCircle.setOptions({strokeColor:this.strokeColor})}},{key:"setStrokeWidth",value:function(e){this.strokeWidth=e,this.googleCircle.setOptions({strokeWeight:this.strokeWidth})}}]),t}(),B=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var A=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.markerContainers=[],o.circleOverlays=[],o.oldZoom=0,o.clickPosition=null,o.developerBeganMovement=!1;var r={backgroundColor:"transparent",zoom:n.zoom,minZoom:n.minZoom,maxZoom:n.maxZoom,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,center:n.center,gestureHandling:"greedy",clickableIcons:!1,scrollwheel:n.scrollWheelZoom};o.oldZoom=n.zoom,o.map=new google.maps.Map(e,r),google.maps.event.addDomListener(e,"click",function(e){o.clickPosition&&!e.isMarkerClick&&o.events.emit("click",{map:o,position:o.clickPosition}),o.clickPosition=null}),google.maps.event.addListener(o.map,"click",function(e){o.clickPosition=new a(e.latLng.lat,e.latLng.lng)}),google.maps.event.addListener(o.map,"dragstart",function(){o.events.emit("panStart",{map:o,position:o.getCenter(),zoom:o.getZoom()})});var i=google.maps.event.addListener(o.map,"tilesloaded",function(){o.events.emit("renderComplete",{map:o}),google.maps.event.removeListener(i)});return google.maps.event.addListener(o.map,"idle",function(){var e=!o.developerBeganMovement;o.developerBeganMovement=!1;var t=o.getZoom();t!==o.oldZoom&&(o.oldZoom=t,o.events.emit("zoomChange",{map:o,position:o.getCenter(),zoom:o.getZoom(),userGesture:e})),o.events.emit("centerChange",{map:o,position:o.getCenter(),zoom:o.getZoom(),userGesture:e})}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,E),B(t,[{key:"setCenter",value:function(e){this.developerBeganMovement=!0,this.map.panTo(new google.maps.LatLng(e.lat,e.lng))}},{key:"setZoom",value:function(e){this.developerBeganMovement=!0,this.map.setZoom(Math.round(e))}},{key:"setBounds",value:function(e,t){this.developerBeganMovement=!0;var n={north:e.northeast.lat,east:e.northeast.lng,south:e.southwest.lat,west:e.southwest.lng},o=t?{left:t.left,right:t.right,top:t.top,bottom:t.bottom}:null;this.map.fitBounds(n,o)}},{key:"getCenter",value:function(){var e=this.map.getCenter();return new a(e.lat(),e.lng())}},{key:"panIntoView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{left:0,right:0,top:0,bottom:0},n=this.map.getDiv().offsetWidth,o=this.map.getDiv().offsetHeight,r=function(e,t){var n=t.getProjection().fromLatLngToPoint(t.getBounds().getNorthEast()),o=t.getProjection().fromLatLngToPoint(t.getBounds().getSouthWest()),r=Math.pow(2,t.getZoom()),i=t.getProjection().fromLatLngToPoint(e);return new google.maps.Point((i.x-o.x)*r,(i.y-n.y)*r)}(new google.maps.LatLng(e.lat,e.lng),this.map),i=0,a=0,s=t.left+this.padding.left,l=t.right+this.padding.right,u=t.top+this.padding.top,c=t.bottom+this.padding.bottom;r.x<s&&(i=r.x-s),r.x>n-l&&(i=r.x-(n-l)),r.y<u&&(a=r.y-u),r.y>o-c&&(a=r.y-(o-c));var p=0!==i||0!==a;return p&&(this.developerBeganMovement=!0,this.map.panBy(i,a)),p}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getBounds",value:function(){var e=this.map.getBounds(),t=e.getSouthWest(),n=e.getNorthEast();return new l(new a(t.lat(),t.lng()),new a(n.lat(),n.lng()))}},{key:"resize",value:function(){google.maps.event.trigger(this.map,"resize")}},{key:"createMarkerContainer",value:function(e){var t=new S(e);return t.setMap(this.map),this.markerContainers.push(t),t}},{key:"removeMarkerContainer",value:function(e){var t=this.markerContainers.indexOf(e);t>-1&&(e.setMap(null),this.markerContainers.splice(t,1))}},{key:"addCircleOverlay",value:function(e){var t=new R(e,this.map);return this.circleOverlays.push(t),t}},{key:"removeCircleOverlay",value:function(e){var t=this.circleOverlays.indexOf(e);t>-1&&(e.removeFromMap(),this.circleOverlays.splice(t,1))}}]),t}(),W=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var F={domain:"maps.google.com",version:"3.31",channel:"ta",lang:"",clientId:"gme-tripadvisorinc"},D="ta.maps.provider.google",U=function(){var e=k(D,"loadCallbackList");e&&e.forEach(function(e){e()}),b([],D,"loadCallbackList")},G=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,A));return e.configureLibrary(F),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,C),W(t,[{key:"isLibraryLoaded",value:function(){return window.google&&window.google.maps}},{key:"loadLibrary",value:function(e){if(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadLibrary",this).call(this,e))return!0;if(k(D,"loadCallback")){var n=k(D,"loadCallbackList");return n&&n.push(e),!1}b(U,D,"loadCallback"),b([e],D,"loadCallbackList");var o=this.getLibraryConfig(),r={v:o.version,client:o.clientId,channel:o.channel,language:o.lang,c:"true",async:"2",callback:D+".loadCallback"},i=new URLSearchParams(r),a="//"+o.domain+"/maps/api/js?"+i.toString();return Object(y.importScript)(a),!1}}]),t}(),H=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var N=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.leafletLayerGroup=n,Leaflet.TAIcon||(Leaflet.TAIcon=Leaflet.Icon.extend({options:{markerContainer:null},createIcon:function(){return this.options.markerContainer.pinContainer}})),o.leafletIcon=new Leaflet.TAIcon({markerContainer:o}),o.leafletMarker=Leaflet.marker([o.position.lat,o.position.lng],{icon:o.leafletIcon,bubblingMouseEvents:!1}),o.leafletLayerGroup.addLayer(o.leafletMarker),o.leafletMarker.getElement().style.outline="none",o.leafletMarker.on("click dblclick mousedown mousemove mouseup",function(){}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,x),H(t,[{key:"setZIndexOffset",value:function(e){this.zIndexOffset!==e&&(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setZIndexOffset",this).call(this,e),this.leafletMarker.setZIndexOffset(e))}},{key:"remove",value:function(){this.leafletLayerGroup.removeLayer(this.leafletMarker)}},{key:"setPosition",value:function(e){this.position=e,this.leafletMarker.setLatLng([this.position.lat,this.position.lng])}}]),t}(),V=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var q=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.leafletCircle=Leaflet.circle([o.position.lat,o.position.lng],{color:o.strokeColor,fillColor:o.fillColor,radius:o.radius,weight:o.radius,opacity:o.opacity,fillOpacity:o.opacity}),n.addLayer(o.leafletCircle),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),V(t,[{key:"removeFromMap",value:function(){this.leafletCircle.remove()}},{key:"setPosition",value:function(e){this.leafletCircle.setLatLng([this.position.lat,this.position.lng]),this.position=e}},{key:"setRadius",value:function(e){this.leafletCircle.setRadius(e),this.radius=e}},{key:"setOpacity",value:function(e){this.opacity=e,this.updateCircleStyle()}},{key:"setFillColor",value:function(e){this.fillColor=e,this.updateCircleStyle()}},{key:"setStrokeColor",value:function(e){this.strokeColor=e,this.updateCircleStyle()}},{key:"setStrokeWidth",value:function(e){this.strokeWidth=e,this.updateCircleStyle()}},{key:"updateCircleStyle",value:function(){this.leafletCircle.setStyle({fillColor:this.fillColor,color:this.strokeColor,weight:this.strokeWidth,opacity:this.opacity,fillOpacity:this.opacity})}}]),t}(),X=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var J=function(e){return e?e.substr(0,2):null},K=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.markerContainers=[],o.circleOverlays=[],o.zoomDidChange=!1,o.developerBeganMovement=!1;var r=n.center||new a(0,0);return o.map=Leaflet.citymaps.map(e,null,{center:[r.lat,r.lng],zoom:n.zoom,minZoom:n.minZoom,maxZoom:n.maxZoom,language:J(n.locale),scrollWheelZoom:n.scrollWheelZoom,keepBuffer:"TABLET"===n.userAgentCategory?0:2,loadingGrid:"TABLET"!==n.userAgentCategory,citymapsTileLayerHost:"true"===n.config.citymapsDevTiles?"dev":void 0,scalePosition:n.isRtl?"bottomleft":"bottomright"}),o.markerGroup=Leaflet.featureGroup([]).addTo(o.map),o.map.getBaseLayer().once("load",function(){o.events.emit("renderComplete",{map:o})}),o.map.on("click",function(e){o.events.emit("click",{map:o,position:new a(e.latlng.lat,e.latlng.lng)})}),o.map.on("dragstart",function(){o.events.emit("panStart",{map:o,position:o.getCenter(),zoom:o.getZoom()})}),o.map.on("moveend",function(){var e=!o.developerBeganMovement;o.developerBeganMovement=!1,o.zoomDidChange&&(o.zoomDidChange=!1,o.events.emit("zoomChange",{map:o,position:o.getCenter(),zoom:o.getZoom(),userGesture:e})),o.events.emit("centerChange",{map:o,position:o.getCenter(),zoom:o.getZoom(),userGesture:e})}),o.map.on("zoomend",function(){o.zoomDidChange=!0,o.map.getZoom()>=o.map.getMaxZoom()?o.map.doubleClickZoom.disable():o.map.doubleClickZoom.enable()}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,E),X(t,[{key:"setCenter",value:function(e){this.developerBeganMovement=!0,this.map.panTo(Leaflet.latLng(e.lat,e.lng),{animate:!0})}},{key:"setZoom",value:function(e){this.developerBeganMovement=!0,this.map.setZoom(e)}},{key:"setBounds",value:function(e,t){this.developerBeganMovement=!0;var n=Leaflet.latLngBounds(Leaflet.latLng(e.southwest.lat,e.southwest.lng),Leaflet.latLng(e.northeast.lat,e.northeast.lng)),o=t?{paddingTopLeft:Leaflet.point(t.top,t.left),paddingBottomRight:Leaflet.point(t.bottom,t.right)}:null;this.map.fitBounds(n,o)}},{key:"panIntoView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{left:0,right:0,top:0,bottom:0},n=this.map.latLngToContainerPoint(e),o=this.map.getSize(),r=0,i=0,a=t.left+this.padding.left,s=t.right+this.padding.right,l=t.top+this.padding.top,u=t.bottom+this.padding.bottom;n.x<a&&(r=n.x-a),n.x>o.x-s&&(r=n.x-(o.x-s)),n.y<l&&(i=n.y-l),n.y>o.y-u&&(i=n.y-(o.y-u));var c=0!==r||0!==i;return c&&(this.developerBeganMovement=!0,this.map.panBy([r,i])),c}},{key:"getCenter",value:function(){var e=this.map.getCenter();return new a(e.lat,e.lng)}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getBounds",value:function(){var e=this.map.getBounds();return new l(new a(e.getSouth(),e.getWest()),new a(e.getNorth(),e.getEast()))}},{key:"resize",value:function(){this.map.invalidateSize({pan:!1})}},{key:"createMarkerContainer",value:function(e){var t=new N(e,this.markerGroup);return this.markerContainers.push(t),t}},{key:"removeMarkerContainer",value:function(e){var t=this.markerContainers.indexOf(e);t>-1&&(e.remove(),this.markerContainers.splice(t,1))}},{key:"addCircleOverlay",value:function(e){var t=new q(e,this.map);return this.circleOverlays.push(t),t}},{key:"removeCircleOverlay",value:function(e){var t=this.circleOverlays.indexOf(e);t>-1&&(e.removeFromMap(),this.circleOverlays.splice(t,1))}}]),t}(),Q=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var Y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,K))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,C),Q(t,[{key:"isLibraryLoaded",value:function(){return window.Leaflet&&window.Leaflet.citymaps}},{key:"loadLibrary",value:function(e){if(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadLibrary",this).call(this,e))return!0;for(var n="https://ta-media.citymaps.io/lib/v1.1.4/citymaps.min.js",o=document.getElementsByTagName("script"),r=0;r<o.length;++r){var i=o[r];if(i.getAttribute("src")===n)return i.addEventListener("load",function(){e()}),!1}return Object(y.importScript)(n).then(e),!1}}]),t}(),$=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,x),$(t,[{key:"setPosition",value:function(e){this.position=e,this.positionContainer()}},{key:"setMap",value:function(e,t){var n=this;this.map=e,e?(t.appendChild(this.pinContainer),this.positionContainer(),this.viewChangeEventHandler=Microsoft.Maps.Events.addHandler(e,"viewchange",function(){n.positionContainer()}),this.viewChangedEventHandler=Microsoft.Maps.Events.addHandler(e,"viewchangeend",function(){n.positionContainer()}),this.mapResizeEventHandler=Microsoft.Maps.Events.addHandler(e,"mapresize",function(){n.positionContainer()}),this.onMarkerReady&&this.onMarkerReady()):(t.removeChild(this.pinContainer),Microsoft.Maps.Events.removeHandler(this.viewChangeEventHandler),Microsoft.Maps.Events.removeHandler(this.viewChangedEventHandler),Microsoft.Maps.Events.removeHandler(this.mapResizeEventHandler))}},{key:"positionContainer",value:function(){if(this.map){var e=this.map.tryLocationToPixel(new Microsoft.Maps.Location(this.position.lat,this.position.lng),Microsoft.Maps.PixelReference.control);this.pinContainer.style.left=e.x+"px",this.pinContainer.style.top=e.y+"px";var t=this.zIndexOffset+Math.round(e.y);this.pinContainer.style.zIndex=t.toString()}}},{key:"setZIndexOffset",value:function(e){(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setZIndexOffset",this).call(this,e),this.positionContainer()}}]),t}(),te=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var ne=function(e,t,n,o,r){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="'+2*e+'" height="'+2*e+'">\n    <circle cx="'+e+'" cy="'+e+'" r="'+(e-o)+'" stroke="'+n+'" \n      stroke-width="'+o+'" fill="'+t+'" fill-opacity="'+r+'" stroke-opacity="'+r+'"\n    /></svg>',anchor:new Microsoft.Maps.Point(e,e)}},oe=function(e,t,n){return n/function(e,t){return 156543.04*Math.abs(Math.cos(e))/Math.pow(2,t)}(e,t)},re=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.map=n;var r=new Microsoft.Maps.Location(o.position.lat,o.position.lng);return o.pushPin=new Microsoft.Maps.Pushpin(r,ne(oe(o.position.lat,n.getZoom(),o.radius),o.fillColor,o.strokeColor,o.strokeWidth,o.opacity)),o.map.entities.push(o.pushPin),o.viewChangeHandler=Microsoft.Maps.Events.addHandler(o.map,"viewchangeend",function(){o.updateCircleStyle()}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),te(t,[{key:"removeFromMap",value:function(){this.map.entities.remove(this.pushPin),Microsoft.Maps.Events.removeHandler(this.viewChangeHandler)}},{key:"setPosition",value:function(e){this.position=e;var t=new Microsoft.Maps.Location(this.position.lat,this.position.lng);this.pushPin.setLocation(t)}},{key:"setRadius",value:function(e){this.radius=e,this.updateCircleStyle()}},{key:"setOpacity",value:function(e){this.opacity=e,this.updateCircleStyle()}},{key:"setFillColor",value:function(e){this.fillColor=e,this.updateCircleStyle()}},{key:"setStrokeColor",value:function(e){this.strokeColor=e,this.updateCircleStyle()}},{key:"setStrokeWidth",value:function(e){this.strokeWidth=e,this.updateCircleStyle()}},{key:"updateCircleStyle",value:function(){var e=oe(this.position.lat,this.map.getZoom(),this.radius),t=ne(e,this.fillColor,this.strokeColor,this.strokeWidth,this.opacity);this.pushPin.setOptions(t)}}]),t}(),ie=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var ae={key:"AtNq3Ps1jJbLXvagAsAA2Xp3qUpfXLyZbJxgwDWM3kjrQoZKnOWwULXDn9howX8s"},se=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.hasPanEventAttached=!1,o.markerContainers=[],o.circleOverlays=[],o.developerBeganMovement=!1;var r={credentials:ae.key,center:new Microsoft.Maps.Location(n.center.lat,n.center.lng),mapTypeId:Microsoft.Maps.MapTypeId.road,zoom:n.zoom,minZoom:n.minZoom,maxZoom:n.maxZoom,showMapTypeSelector:!1,showDashboard:!1,showScalebar:!1,disableScrollWheelZoom:!n.scrollWheelZoom,disableKeyboardInput:!0,enableClickableLogo:!1,enableSearchLogo:!1,useInertia:!1};return o.map=new Microsoft.Maps.Map(e,r),o.markerLayer=document.createElement("div"),o.markerLayer.style.zIndex="1",o.markerLayer.style.position="absolute",e.appendChild(o.markerLayer),o.oldZoom=o.getZoom(),o.oldCenter=o.getCenter(),o.bindMapEvents(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,E),ie(t,[{key:"setCenter",value:function(e){this.developerBeganMovement=!0;var t=new Microsoft.Maps.Location(e.lat,e.lng);this.map.setView({center:t,animate:!0})}},{key:"setZoom",value:function(e){this.developerBeganMovement=!0,this.map.setView({zoom:e,animate:!0})}},{key:"setBounds",value:function(e,t){this.developerBeganMovement=!0;var n=0;t&&(n=Math.max(n,t.top),n=Math.max(n,t.bottom),n=Math.max(n,t.left),n=Math.max(n,t.right));var o=Microsoft.Maps.LocationRect.fromEdges(e.northeast.lat,e.southwest.lng,e.southwest.lat,e.northeast.lng);this.map.setView({bounds:o,padding:n})}},{key:"getCenter",value:function(){var e=this.map.getCenter();return new a(e.latitude,e.longitude)}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getBounds",value:function(){var e=this.map.getBounds();return new l(new a(e.getSouth(),e.getWest()),new a(e.getNorth(),e.getEast()))}},{key:"resize",value:function(){Microsoft.Maps.Events.invoke(this.map,"viewchangeend")}},{key:"createMarkerContainer",value:function(e){var t=new ee(e);return this.markerContainers.push(t),t.setMap(this.map,this.markerLayer),t}},{key:"removeMarkerContainer",value:function(e){var t=this.markerContainers.indexOf(e);t>-1&&(e.setMap(null,this.markerLayer),this.markerContainers.splice(t,1))}},{key:"addCircleOverlay",value:function(e){var t=new re(e,this.map);return this.circleOverlays.push(t),t}},{key:"removeCircleOverlay",value:function(e){var t=this.circleOverlays.indexOf(e);t>-1&&(e.removeFromMap(),this.circleOverlays.splice(t,1))}},{key:"bindMapEvents",value:function(){var e=this;Microsoft.Maps.Events.addHandler(this.map,"click",function(t){e.events.emit("click",{map:e,position:new a(t.location.latitude,t.location.longitude)})}),Microsoft.Maps.Events.addOne(this.map,"viewchangestart",function(){e.events.emit("renderComplete",{map:e})}),Microsoft.Maps.Events.addHandler(this.map,"viewchangeend",function(){var t=!e.developerBeganMovement;e.developerBeganMovement=!1,e.isZoomTheSameAfterEvent()||e.events.emit("zoomChange",{map:e,position:e.getCenter(),zoom:e.getZoom(),userGesture:t}),e.events.emit("centerChange",{map:e,position:e.getCenter(),zoom:e.getZoom(),userGesture:t})}),Microsoft.Maps.Events.addHandler(this.map,"viewchangestart",function(){e.oldZoom=e.getZoom(),e.oldCenter=e.getCenter(),e.hasPanEventAttached||(e.hasPanEventAttached=!0,Microsoft.Maps.Events.addOne(e.map,"viewchange",function(){e.developerBeganMovement||e.isCenterTheSameAfterEvent()||!e.isZoomTheSameAfterEvent()||e.events.emit("panStart",{map:e,position:e.getCenter(),zoom:e.getZoom()}),e.hasPanEventAttached=!1}))})}},{key:"isZoomTheSameAfterEvent",value:function(){return this.oldZoom===this.getZoom()}},{key:"isCenterTheSameAfterEvent",value:function(){if(!this.oldCenter)return!1;var e=this.getCenter(),t=this.oldCenter.lat===e.lng,n=this.oldCenter.lat===e.lng;return t&&n}}]),t}(),le=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var ue={domain:"www.bing.com"},ce=function(){var e=k("ta.maps.provider.bing","loadCallbackList");e&&e.forEach(function(e){e()}),b([],"ta.maps.provider.bing","loadCallbackList")},pe=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,se));return e.configureLibrary(ue),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,C),le(t,[{key:"isLibraryLoaded",value:function(){return window.Microsoft&&window.Microsoft.Maps}},{key:"loadLibrary",value:function(e){if(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadLibrary",this).call(this,e))return!0;if(k("ta.maps.provider.bing","bingMapLibraryLoadedCallback")){var n=k("ta.maps.provider.bing","loadCallbackList");return n&&n.push(e),!1}b([e],"ta.maps.provider.bing","loadCallbackList"),window.bingMapLibraryLoadedCallback=ce;var o="//"+this.getLibraryConfig().domain+"/api/maps/mapcontrol?setMkt=zh-CN&callback=bingMapLibraryLoadedCallback";return Object(y.importScript)(o),!1}}]),t}(),fe=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var he=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.checkForParent=function(){o.pinContainer.parentElement?o.onMarkerReady&&o.onMarkerReady():o.map&&setTimeout(o.checkForParent,1)},o.positionMarker=function(){if(o.map){var e=o.map.lngLatToContainer(new AMap.LngLat(o.position.lng,o.position.lat)),t=o.zIndexOffset+Math.round(e.y);o.autonaviMarker.setzIndex(t)}},o.map=n;var r={map:o.map,position:new AMap.LngLat(e.lng,e.lat),content:o.pinContainer,offset:new AMap.Pixel(0,0),clickable:!0};return o.map.on("mapmove",o.positionMarker),o.autonaviMarker=new AMap.Marker(r),o.pinContainer.addEventListener("click",function(e){e.isMarkerClick=!0}),o.map.add(o.autonaviMarker),o.pinContainer.parentElement||setTimeout(o.checkForParent,1),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,x),fe(t,[{key:"setPosition",value:function(e){this.position=e,this.autonaviMarker.setPosition(new AMap.LngLat(e.lng,e.lat))}},{key:"setMap",value:function(e){this.map&&!e&&this.map.off("mapmove",this.positionMarker),this.map=e,this.autonaviMarker.setMap(e)}},{key:"setZIndexOffset",value:function(e){(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setZIndexOffset",this).call(this,e),this.positionMarker()}}]),t}(),ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var me=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.map=n;var r=new AMap.LngLat(o.position.lng,o.position.lat);return o.circle=new AMap.Circle({center:r,radius:e.radius,fillColor:e.fillColor,fillOpacity:e.opacity,strokeColor:e.strokeColor,strokeWeight:e.strokeWidth,strokeOpacity:e.opacity}),o.map.add(o.circle),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),ve(t,[{key:"removeFromMap",value:function(){this.map.remove(this.circle)}},{key:"setPosition",value:function(e){this.position=e;var t=new AMap.LngLat(this.position.lng,this.position.lat);this.circle.setCenter(t)}},{key:"setRadius",value:function(e){this.radius=e,this.circle.setRadius(e)}},{key:"setOpacity",value:function(e){this.opacity=e,this.updateCircleStyle()}},{key:"setFillColor",value:function(e){this.fillColor=e,this.updateCircleStyle()}},{key:"setStrokeColor",value:function(e){this.strokeColor=e,this.updateCircleStyle()}},{key:"setStrokeWidth",value:function(e){this.strokeWidth=e,this.updateCircleStyle()}},{key:"updateCircleStyle",value:function(){var e=new AMap.LngLat(this.position.lng,this.position.lat);this.circle.setOptions({center:e,radius:this.radius,fillColor:this.fillColor,fillOpacity:this.opacity,strokeColor:this.strokeColor,strokeWeight:this.strokeWidth,strokeOpacity:this.opacity})}}]),t}(),de=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var ye=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.markerContainers=[],o.circleOverlays=[],o.clickPosition=null,o.touchEvents=!1,o.developerBeganMovement=!1,o.moveEndWillFire=!1,o.zoomChanged=!1,o.moveEndTimeout=null,o.handleMoveEnd=function(){var e=!o.developerBeganMovement;o.developerBeganMovement=!1,o.zoomChanged&&(o.zoomChanged=!1,o.events.emit("zoomChange",{map:o,position:o.getCenter(),zoom:o.getZoom(),userGesture:e})),o.events.emit("centerChange",{map:o,position:o.getCenter(),zoom:o.getZoom(),userGesture:e})};var r={scrollWheel:n.scrollWheelZoom,resizeEnable:!0,zoom:n.zoom,zooms:[n.minZoom,n.maxZoom],center:new AMap.LngLat(n.center.lng,n.center.lat)};o.map=new AMap.Map(e,r),o.map.on("complete",function(){o.events.emit("renderComplete",{map:o})}),e.addEventListener("touchstart",function(){o.touchEvents=!0});var i=function(e){o.clickPosition&&!e.isMarkerClick&&o.events.emit("click",{map:o,position:o.clickPosition}),o.clickPosition=null,o.touchEvents=!1};return e.addEventListener("click",function(e){o.touchEvents||i(e)}),e.addEventListener("touchend",i),o.map.on("click",function(e){o.clickPosition=new a(e.lnglat.lat,e.lnglat.lng)}),o.map.on("zoomchange",function(){o.zoomChanged=!0,o.scheduleMoveEnd()}),o.map.on("dragstart",function(){o.developerBeganMovement||o.events.emit("panStart",{map:o,position:o.getCenter(),zoom:o.getZoom()})}),o.map.on("movestart",function(){o.moveEndWillFire=!0}),o.map.on("moveend",function(){o.moveEndWillFire=!1,o.scheduleMoveEnd()}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,E),de(t,[{key:"scheduleMoveEnd",value:function(){this.moveEndTimeout&&clearTimeout(this.moveEndTimeout),this.moveEndTimeout=setTimeout(this.handleMoveEnd,0)}},{key:"setCenter",value:function(e){this.developerBeganMovement=!0,this.map.setCenter(new AMap.LngLat(e.lng,e.lat))}},{key:"setZoom",value:function(e){this.developerBeganMovement=!0,this.map.setZoom(e)}},{key:"setBounds",value:function(e){this.developerBeganMovement=!0;var t=new AMap.Bounds(new AMap.LngLat(e.southwest.lng,e.southwest.lat),new AMap.LngLat(e.northeast.lng,e.northeast.lat));this.map.setBounds(t)}},{key:"getCenter",value:function(){var e=this.map.getCenter();return new a(e.lat,e.lng)}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getBounds",value:function(){var e=this.map.getBounds(),t=e.getSouthWest(),n=e.getNorthEast();return new l(new a(t.getLat(),t.getLng()),new a(n.getLat(),n.getLng()))}},{key:"resize",value:function(){AMap.event.trigger(this.map,"complete")}},{key:"createMarkerContainer",value:function(e){var t=new he(e,this.map);return this.markerContainers.push(t),t.setMap(this.map),t}},{key:"removeMarkerContainer",value:function(e){var t=this.markerContainers.indexOf(e);t>-1&&(e.setMap(null),this.markerContainers.splice(t,1))}},{key:"addCircleOverlay",value:function(e){var t=new me(e,this.map);return this.circleOverlays.push(t),t}},{key:"removeCircleOverlay",value:function(e){var t=this.circleOverlays.indexOf(e);t>-1&&(e.removeFromMap(),this.circleOverlays.splice(t,1))}}]),t}(),ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var be={domain:"webapi.amap.com",version:"1.4.10",key:"47e0349a41e8b5f3870f9aae11275ef8"},ke=function(){var e=k("ta.maps.provider.autonavi","loadCallbackList");e&&e.forEach(function(e){e()}),b([],"ta.maps.provider.autonavi","loadCallbackList")},we=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ye));return e.configureLibrary(be),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,C),ge(t,[{key:"isLibraryLoaded",value:function(){return!!window.AMap}},{key:"loadLibrary",value:function(e){if(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadLibrary",this).call(this,e))return!0;if(k("ta.maps.provider.autonavi","autonaviMapLibraryLoadedCallback")){var n=k("ta.maps.provider.autonavi","loadCallbackList");return n&&n.push(e),!1}b([e],"ta.maps.provider.autonavi","loadCallbackList"),window.autonaviMapLibraryLoadedCallback=ke;var o=this.getLibraryConfig(),r="https://"+o.domain+"/maps?v="+o.version+"&key="+o.key+"&callback=autonaviMapLibraryLoadedCallback";return Object(y.importScript)(r),!1}}]),t}(),Ce=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var Oe=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.appendChild(o.pinContainer),o.addedToMap=!0,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,x),Ce(t,[{key:"remove",value:function(){this.addedToMap=!1}}]),t}(),Me=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var _e=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addedToMap=!1,n.addedToMap=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),Me(t,[{key:"removeFromMap",value:function(){this.addedToMap=!1}}]),t}(),Pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var je=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,e));return n.markerContainers=[],n.circleOverlays=[],n.resizeCalled=!1,n.center=e.center||new a(0,0),n.zoom=e.zoom,n.mockMapContainer=document.createElement("div"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,E),Pe(t,[{key:"once",value:function(e,n){(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"once",this).call(this,e,n),"renderComplete"===e&&this.simulateRenderComplete()}},{key:"simulateRenderComplete",value:function(){this.events.emit("renderComplete",{map:this})}},{key:"simulateClick",value:function(e){this.events.emit("click",{map:this,position:e})}},{key:"simulateUserPan",value:function(){this.events.emit("panStart",{map:this,position:this.getCenter(),zoom:this.getZoom()}),this.center=new a(this.center.lat+Math.random()-.5,this.center.lng+Math.random()-.5),this.events.emit("centerChange",{map:this,position:this.center,zoom:this.zoom,userGesture:!0})}},{key:"simulateUserZoom",value:function(){this.zoom=this.zoom+Math.random()<.5?1:-1,this.events.emit("zoomChange",{map:this,position:this.center,zoom:this.zoom,userGesture:!0}),this.events.emit("centerChange",{map:this,position:this.center,zoom:this.zoom,userGesture:!0})}},{key:"setCenter",value:function(e){this.center=e,this.events.emit("centerChange",{map:this,position:this.center,zoom:this.zoom,userGesture:!1})}},{key:"setZoom",value:function(e){this.zoom=e,this.events.emit("zoomChange",{map:this,position:this.center,zoom:this.zoom,userGesture:!1}),this.events.emit("centerChange",{map:this,position:this.center,zoom:this.zoom,userGesture:!1})}},{key:"setBounds",value:function(e){this.center=e.getCenter(),this.zoom=15,this.events.emit("zoomChange",{map:this,position:this.center,zoom:this.zoom,userGesture:!1}),this.events.emit("centerChange",{map:this,position:this.center,zoom:this.zoom,userGesture:!1})}},{key:"panIntoView",value:function(e){var t=!e.equals(this.center);return t&&this.setCenter(e),t}},{key:"getCenter",value:function(){return this.center}},{key:"getZoom",value:function(){return this.zoom}},{key:"getBounds",value:function(){return new l(new a(this.center.lat-.1,this.center.lng-.1),new a(this.center.lat+.1,this.center.lng+.1))}},{key:"resize",value:function(){this.resizeCalled=!0}},{key:"createMarkerContainer",value:function(e){var t=new Oe(e,this.mockMapContainer);return this.markerContainers.push(t),t}},{key:"removeMarkerContainer",value:function(e){var t=this.markerContainers.indexOf(e);t>-1&&(e.remove(),this.markerContainers.splice(t,1))}},{key:"addCircleOverlay",value:function(e){var t=new _e(e);return this.circleOverlays.push(t),t}},{key:"removeCircleOverlay",value:function(e){var t=this.circleOverlays.indexOf(e);t>-1&&(e.removeFromMap(),this.circleOverlays.splice(t,1))}}]),t}(),Ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var Le,xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,je))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,C),Ee(t,[{key:"isLibraryLoaded",value:function(){return!0}}]),t}(),Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Se=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function ze(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie=(Ze(Le={},o.d,G),Ze(Le,o.c,Y),Ze(Le,o.b,pe),Ze(Le,o.a,we),Ze(Le,"mock",xe),Le),Re=function(e){if("mock"===e.forceMapProvider){var t={mapProvider:"mock",mapConfig:{}};return new Promise(function(e){return e({json:function(){return new Promise(function(e){return e(t)})}})})}return fetch("/data/1.0/maps/provider?"+(n={servletName:e.servlet,locale:e.locale,geoId:e.geoId,forceMapProvider:e.forceMapProvider},o={},Object.keys(n).forEach(function(e){null!==n[e]&&void 0!==n[e]&&(o[e]=n[e])}),new URLSearchParams(o)).toString(),{credentials:"same-origin"});var n,o},Be=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=ze(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={loadedMapProvider:void 0,loadedMapFactory:void 0,mapInterface:void 0},o.componentMounted=!1,o.createMapInterface=function(e){var t=o.state,n=t.loadedMapFactory,r=t.loadedMapProvider;if(!o.state.mapInterface&&r&&n&&e){var i=new(n.getInterfaceClass())(e,Object.assign({},o.props.interfaceProps,{config:n.getLibraryConfig(),locale:o.props.locale,isRtl:o.props.isRtl,userAgentCategory:o.props.userAgentCategory}));o.setState({mapInterface:i}),o.props.onInterfaceLoaded(i,r)}},ze(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u["PureComponent"]),Se(t,[{key:"componentDidMount",value:function(){this.componentMounted=!0,this.loadMap()}},{key:"componentDidUpdate",value:function(){this.createMapInterface(this.props.containerNode)}},{key:"componentWillUnmount",value:function(){this.componentMounted=!1}},{key:"loadMap",value:function(){var e=this;Re(this.props).then(function(e){return e.json()}).then(function(t){if(e.componentMounted){var n=function(e){var t=e?Ie[e]:null;if(!t)throw new Error("Unsupported map provider: "+(e||"null"));return new t}(t.mapProvider);n.configureLibrary(Te({lang:e.props.locale},t.mapConfig));var o=n.isLibraryLoaded();n.loadLibrary(function(){o||f()({module:"map_view",action:"load",context:t.mapProvider||""}),e.componentMounted&&e.setState({loadedMapFactory:n,loadedMapProvider:t.mapProvider})})}})}},{key:"render",value:function(){return null}}]),t}(),Ae=Object(d.connect)(function(e,t){return Te({isRtl:e.i18n.isRtl,userAgentCategory:e.meta.device.userAgentCategory,locale:e.i18n.locale,servlet:e.meta.initialServletName,geoId:e.page.geoId},t)})(Be),We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Fe=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function De(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ue=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=De(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={mapInterface:null,mapProvider:null},o.onMapInterfaceLoaded=function(e,t){e.once("renderComplete",function(){o.props.onLoad&&o.componentMounted&&e&&o.props.onLoad({map:e})}),e.on("click",function(e){o.props.onClick&&o.props.onClick(e)}),e.on("centerChange",function(e){o.props.onCenterChange&&o.props.onCenterChange(e)}),e.on("panStart",function(e){f()({module:"map_move",action:"pan",context:e.zoom.toString(10)}),o.props.onPanStart&&o.props.onPanStart(e)}),e.on("renderComplete",function(e){o.props.onRenderComplete&&o.props.onRenderComplete(e)});var n=o.props.initialZoom;e.on("zoomChange",function(e){f()({module:"map_move",action:e.zoom>n?"zoom_in":"zoom_out"}),n=e.zoom,o.props.onZoomChange&&o.props.onZoomChange(e)}),o.props.initialBounds&&e.setBounds(o.props.initialBounds),o.setState({mapInterface:e,mapProvider:t})},o.setContainerRef=function(e){o.containerRef||(o.containerRef=e,o.forceUpdate())},o.handleResize=function(){o.state.mapInterface&&o.state.mapInterface.resize()},o.componentMounted=!1,o.containerRef=null,De(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u["PureComponent"]),Fe(t,[{key:"componentDidMount",value:function(){this.componentMounted=!0}},{key:"componentWillUnmount",value:function(){this.componentMounted=!1,f()({module:"map_view",action:"close"})}},{key:"render",value:function(){var e=this.state,t=e.mapInterface,n=e.mapProvider,o=this.props,r=o.children,i=o.style,a=o.className;return u.createElement("div",{className:a,style:We({position:"relative"},i,{touchAction:"none"})},u.createElement(c.a,{callback:this.handleResize}),u.createElement(Ae,{interfaceProps:{zoom:this.props.initialZoom,center:this.props.initialCenter,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,onLoad:this.props.onLoad,scrollWheelZoom:this.props.scrollWheelZoom},containerNode:this.containerRef,onInterfaceLoaded:this.onMapInterfaceLoaded,forceMapProvider:this.props.forceMapProvider}),u.createElement("div",{className:"map_container",style:{width:"100%",height:"100%",position:"absolute",zIndex:0,overflow:"hidden"},ref:this.setContainerRef}),u.createElement(v,{value:{map:t,mapProvider:n||""}},r))}}]),t}();Ue.defaultProps={className:"",initialCenter:new a(0,0),initialZoom:13,initialBounds:null,minZoom:2,maxZoom:19,scrollWheelZoom:!0,children:[],style:{},onLoad:null,onClick:null,onPanStart:null,onCenterChange:null,onZoomChange:null,onRenderComplete:null};var Ge=Ue,He=function(e){var t=20037508.34*e.lng/180,n=Math.log(Math.tan((90+e.lat)*Math.PI/360))/(Math.PI/180);return[t,n=20037508.34*n/180]},Ne=function(e){var t=180*e[0]/20037508.34,n=180*e[1]/20037508.34;return n=Math.atan(Math.exp(n*(Math.PI/180)))/(Math.PI/360)-90,new a(n,t)},Ve={getBoundsZoom:function(e,t,n){var o=He(e.southwest),r=He(e.northeast),i=r[0]-o[0],a=r[1]-o[1],s=Math.max(i/t,a/n),l=Math.floor(function(e){return Math.log2(156543.03390625/e)}(s));return isFinite(l)?l:void 0},getPaddedBounds:function(e,t,n){var o=He(e),r=function(e){return 156543.03390625/Math.pow(2,e)}(t),i=r*n.left,a=r*n.right,s=r*n.top,u=r*n.bottom,c=[o[0]-i,o[1]-u],p=[o[0]+a,o[1]+s];return new l(Ne(c),Ne(p))}},qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Xe=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function Je(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ke=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=Je(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={circleOverlay:null},Je(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u["PureComponent"]),Xe(t,[{key:"componentDidMount",value:function(){this.handleProps(this.props)}},{key:"componentDidUpdate",value:function(){this.handleProps(this.props)}},{key:"componentWillUnmount",value:function(){var e=this.props.map,t=this.state.circleOverlay;e&&t&&(e.removeCircleOverlay(t),this.setState({circleOverlay:null}))}},{key:"handleProps",value:function(e){var t=this.state.circleOverlay,n=e.map;n&&(t||(t=n.addCircleOverlay(this.props),this.setState({circleOverlay:t})),t.setPosition(e.position),t.setRadius(e.radius),t.setFillColor(e.fillColor),t.setStrokeColor(e.strokeColor),t.setStrokeWidth(e.strokeWidth),t.setOpacity(e.opacity))}},{key:"render",value:function(){return null}}]),t}(),Qe=function(e){return u.createElement(m,null,function(t){var n=t.map;return u.createElement(Ke,qe({},e,{map:n}))})},Ye=n("./node_modules/react-dom/index.js"),$e=n.n(Ye),et=u.createContext({position:null}),tt=et.Provider,nt=et.Consumer,ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},rt=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function it(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var at=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=it(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={markerContainer:null},o.onMouseEnter=function(){o.hoverTimeout=setTimeout(o.handleMouseEnter,300)},o.onMouseLeave=function(){o.clearHoverTimeout(),o.props.onMouseLeave&&o.props.onMouseLeave()},o.onTouchStart=function(){o.usingTouchEvents=!0},o.onTouchEnd=function(){o.handleClick()},o.onClick=function(){o.usingTouchEvents||o.handleClick()},o.handleMouseEnter=function(){o.props.disableTracking||f()({module:"pin",action:"pin_hover",context:o.props.trackingContext||""}),o.props.onMouseEnter&&o.props.onMouseEnter()},o.handleClick=function(){o.props.disableTracking||f()({module:"pin",action:"pin_click",context:o.props.trackingContext||""}),o.props.onClick&&o.props.onClick()},o.usingTouchEvents=!1,o.hovered=!1,o.hoverTimeout=null,it(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u["PureComponent"]),rt(t,[{key:"componentDidMount",value:function(){this.handleProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.handleProps(e)}},{key:"componentWillUnmount",value:function(){var e=this.props.map,t=this.state.markerContainer;this.clearHoverTimeout(),e&&t&&(e.removeMarkerContainer(t),this.setState({markerContainer:null}))}},{key:"clearHoverTimeout",value:function(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null)}},{key:"handleProps",value:function(e){var t=this,n=e.position,o=e.map,r=e.showAnchor,i=e.zIndexOffset,a=this.state.markerContainer;o&&(a||(a=o.createMarkerContainer(n),this.setState({markerContainer:a}),a.getContainer()||a.setMarkerReadyCallback(function(){return t.forceUpdate()})),r&&a.showAnchor(),a.setZIndexOffset(i),n.equals(a.getPosition())||a.setPosition(n))}},{key:"render",value:function(){var e=this.state.markerContainer,t=this.props,n=t.children,o=t.position,r=t.className,i=e?e.getContainer():null;if(n&&i){var a=u.createElement("div",{className:r,onClick:this.onClick,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},n);return u.createElement(tt,{value:{position:o}},$e.a.createPortal(a,i))}return null}}]),t}();at.defaultProps={showAnchor:!1,containerClass:null,map:null,zIndexOffset:0};var st=function(e){return u.createElement(m,null,function(t){var n=t.map;return u.createElement(at,ot({},e,{map:n}))})};st.defaultProps={children:[],showAnchor:!1,zIndexOffset:0,onMouseEnter:null,onMouseLeave:null,onClick:null,trackingContext:null,className:null,disableTracking:!1};var lt=st,ut=n("./packages/common/cdn/cdn.jsx"),ct=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var pt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u["PureComponent"]),ct(t,[{key:"render",value:function(){var e=this.props;return u.createElement(lt,{position:e.position,zIndexOffset:e.zIndexOffset,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,trackingContext:e.trackingContext},u.createElement(ut.a,{style:{cursor:"pointer",width:e.width+"px",height:e.height+"px",position:"absolute",left:"-"+e.anchor.x+"px",top:"-"+e.anchor.y+"px",opacity:e.alpha,transition:e.animated?"width 0.3s, height 0.3s, left 0.3s, top 0.3s":null},src:e.src}),e.children)}}]),t}();pt.defaultProps={zIndexOffset:0,animated:!1,children:null,onMouseEnter:null,onMouseLeave:null,onClick:null,alpha:1,trackingContext:null};var ft=pt,ht=n("./packages/public/maps/Popup.less"),vt=n.n(ht),mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function dt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var yt=function(){},gt=function(e,t,n){var o={left:t/2,right:t/2,top:n/2,bottom:n/2};return e.includes("left")&&(o.left=t,o.right=0),e.includes("right")&&(o.left=0,o.right=t),e.includes("top")&&(o.top=n,o.bottom=0),e.includes("bottom")&&(o.top=0,o.bottom=n),o},bt=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=dt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.hasAutoPanned=!1,o.checkAutoPan=function(e){if(e&&o.props.autoPan&&!o.hasAutoPanned){o.hasAutoPanned=!0;var t=e.offsetWidth,n=e.offsetHeight;o.props.map.panIntoView(o.props.position,gt(o.props.direction,t,n))}},dt(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u["PureComponent"]),mt(t,[{key:"render",value:function(){var e=this.props,t=e.direction,n=e.position,o=e.zIndexOffset,r=e.offset,i=e.children,a=e.disableInteraction,s=vt.a[t];return u.createElement(lt,{position:n,zIndexOffset:o,disableTracking:!0},u.createElement("div",{ref:this.checkAutoPan,className:vt.a.markerCalloutContainer+" "+(a?vt.a.noInteraction:"")+" "+s,style:{marginTop:r.y,marginLeft:r.x},onClick:yt,onMouseEnter:yt,onMouseLeave:yt},i))}}]),t}(),kt=function(e){if(!e.visible)return null;var t=function(t){return u.createElement(m,null,function(n){var o=n.map;return o&&u.createElement(bt,{direction:e.direction,offset:e.offset,position:t,autoPan:e.autoPan,map:o,zIndexOffset:e.zIndexOffset,disableInteraction:e.disableInteraction},e.children)})};return e.position?t(e.position):u.createElement(nt,null,function(e){return t(e.position)})};kt.defaultProps={position:null,autoPan:!0,visible:!0,zIndexOffset:99999999,disableInteraction:!1};var wt=kt;n.d(t,"MapProviderGoogle",function(){return o.d}),n.d(t,"MapProviderCitymaps",function(){return o.c}),n.d(t,"MapProviderBing",function(){return o.b}),n.d(t,"MapProviderAutonavi",function(){return o.a}),n.d(t,"LatLng",function(){return a}),n.d(t,"LatLngBounds",function(){return l}),n.d(t,"MapComponent",function(){return Ge}),n.d(t,"Util",function(){return Ve}),n.d(t,"CircleOverlay",function(){return Qe}),n.d(t,"MapInterface",function(){return E}),n.d(t,"MapContextProvider",function(){return v}),n.d(t,"MapContextConsumer",function(){return m}),n.d(t,"Marker",function(){return lt}),n.d(t,"IconMarker",function(){return ft}),n.d(t,"Popup",function(){return wt}),n.d(t,"MockMapInterface",function(){return je})},"dll-reference @ta/common.global":function(t,n){t.exports=e}})});